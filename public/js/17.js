(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{MFeq:function(e,t,i){(e.exports=i("I1BE")(!1)).push([e.i,".comment .pagedetail[data-v-3d01b97c] {\n  display: flex;\n  flex-direction: column;\n}",""])},aYyG:function(e,t,i){var a=i("MFeq");"string"==typeof a&&(a=[[e.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,s);a.locals&&(e.exports=a.locals)},bUBt:function(e,t,i){"use strict";i.r(t);var a=i("hAWA"),s=i("D1GP"),n=i("0sb7"),l=i("mRTQ"),r=i("NZoF"),o={watch:{text:function(e){e.length>0?this.showSubmit=!0:this.showSubmit=!1}},props:{idea:{type:Number,default:void 0,required:!0},replyTo:{default:void 0,required:!1}},data:function(){return{loading:!1,showSubmit:!1,text:""}},methods:{submit:function(){var e=this;if(this.text.length>0){this.loading=!0;var t={text:this.text};void 0!==this.replyTo&&(t.reply_to=this.replyTo),axios.post(this.$APP_URL+"/ideas/"+this.idea+"/replies",t).then((function(t){t.data.result?(e.text="",e.$emit("submit",t.data.reply)):e.handleError(t.data.errors)})).catch((function(e){return console.log(e)})).then((function(){return e.loading=!1}))}}},name:"NewIdeaReply",components:{MaterialTextArea:r.a}},d=i("KHd+"),c=Object(d.a)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return null!=e.$page.props.user?i("div",{staticClass:"sendidea clearfix"},[i("div",{staticClass:"input-group-btn mb-0"},[i("img",{staticClass:"idea-profile",attrs:{src:e.$page.props.user.profile}}),e._v(" "),i("MaterialTextArea",{staticClass:"w-100",attrs:{"input-class":"form-control autoresize",placeholder:"نظر شما چیست؟",name:"text",maxlength:"2500"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),e._v(" "),i("transition",{attrs:{name:"slide"}},[e.showSubmit?i("div",{staticClass:"justify-content-end mt-0"},[i("loading-button",{staticClass:"btn btn-primary",attrs:{loading:e.loading},nativeOn:{click:function(t){return e.submit(t)}}},[e._v("ارسال")])],1):e._e()])],1):e._e()}),[],!1,null,null,null).exports,p=i("fEx1"),u=i("SYfJ");p.a.addLocale(u);var v,f,h,_={mounted:function(){this.liked=this.ideaReply.is_liked},data:function(){return{deleted:!1,showReply:!1,replies:[],repliesLoading:!0,showReplies:!1,next_page_url:null,loadingMore:!1,liked:!1}},methods:{commentDelete:function(){var e=this.replies.indexOf(comment);e>-1&&(this.replies.splice(e,1),this.loadMore())},likeComment:function(){this.liked?this.liked=!1:this.liked=!0,axios.post(this.$APP_URL+"/idea-replies/"+this.ideaReply.id+"/like")},loadReplies:function(){var e=this;this.showReplies=!this.showReplies,this.showReplies&&(this.repliesLoading=!0,axios.post(this.$APP_URL+"/idea-replies/"+this.ideaReply.id+"/replies").then((function(t){var i=t.data;i.result&&(e.next_page_url=i.data.next_page_url,e.replies=i.data.data),e.repliesLoading=!1})).catch((function(e){return console.log(e)})).then((function(){return e.repliesLoading=!1})))},deleteComment:function(){var e=this;this.deleted=!0,axios.delete("/idea-replies/"+this.ideaReply.idea_id+"/replies/"+this.ideaReply.id).then((function(t){e.$emit("deleted",e.ideaReply)})).catch((function(e){return console.log(e)}))},loadMore:function(){var e=this;null===this.next_page_url||this.loadingMore||(this.loadingMore=!0,axios.get(this.next_page_url).then((function(t){var i=t.data;i.result&&(e.next_page_url=i.data.next_page_url,e.replies=e.replies.concat(i.data.data)),e.loadingMore=!1})).catch((function(e){return console.log(e)})).then((function(){return e.loadingMore=!1})))},submit:function(e){var t=this;void 0!==this.replyTo?this.$emit("replied",e):(this.replies.unshift(e),setTimeout((function(){var e=t.$el;t.$parent.$el.scrollTop+=e.getBoundingClientRect().top}),300))}},computed:{ideaReply_time:function(){return new p.a("fa-FA").format(Date.parse(this.ideaReply.created_at),"twitter")}},components:(v={NewIdeaReply:c,LoadingSpinner:l.a},f="NewIdeaReply",h=c,f in v?Object.defineProperty(v,f,{value:h,enumerable:!0,configurable:!0,writable:!0}):v[f]=h,v),props:{replyTo:{default:void 0,required:!1},ideaReply:{type:Object,default:void 0,required:!0}},name:"IdeaReply"},m=(i("bnEJ"),Object(d.a)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mb-3"},[e.deleted?e._e():i("div",{staticClass:"idea-reply"},[i("div",{staticClass:"idea-reply-header"},[i("inertia-link",{staticClass:"d-flex align-items-center",attrs:{href:"/"+e.ideaReply.user.username}},[i("img",{staticClass:"profile-sm",attrs:{src:e.ideaReply.user.profile}}),e._v(" "),i("div",{staticClass:"pr-3 pagedetail"},[i("span",{staticClass:"name"},[i("strong",[e._v("\n              "+e._s(e.ideaReply.user.name)+"\n            ")])])])]),e._v(" "),i("div",{staticClass:"d-flex align-items-center"},[i("span",{staticClass:"font-10 text-muted"},[e._v(e._s(e.ideaReply_time))]),e._v(" "),i("div",[i("b-dropdown",{attrs:{size:"lg",variant:"link","toggle-class":"text-decoration-none","no-caret":""},scopedSlots:e._u([{key:"button-content",fn:function(){return[i("i",{staticClass:"material-icons openmenu clickale text-muted hover-dark"},[e._v("more_vert")])]},proxy:!0}],null,!1,3552891933)},[e._v(" "),i("b-dropdown-item",[i("div",{staticClass:"d-flex align-items-center"},[i("i",{staticClass:"material-icons ml-2 text-dark"},[e._v("link")]),e._v(" "),i("div",[i("div",[i("strong",[e._v(" گزارش تخلف ")])]),e._v(" "),i("small",{staticClass:"text-muted"},[e._v(" این دیدگاه در تضاد با قوانین ترنوبو است ")])])])]),e._v(" "),e.checkUser(e.ideaReply.user_id)?i("b-dropdown-item",{staticClass:"hover-danger",on:{click:e.deleteComment}},[i("div",{staticClass:"d-flex hover-danger align-items-center"},[i("i",{staticClass:"material-icons-outlined ml-2"},[e._v("delete_sweep")]),e._v(" "),i("div",[i("div",[i("strong",[e._v(" حذف ")])])])])]):e._e()],1)],1)])],1),e._v(" "),i("div",{staticClass:"idea-reply-body"},[i("div",{staticStyle:{"unicode-bidi":"plaintext",width:"100% !important",display:"block","text-align":"justify"},domProps:{innerHTML:e._s(e.ideaReply.text)}})])]),e._v(" "),i("div",{staticClass:"w-100 d-flex align-content-center justify-content-between pt-2"},[i("span",{domProps:{innerHTML:e._s(e.ideaReply.liked_by)}}),e._v(" "),i("div",{staticClass:"actions"},[i("i",{staticClass:"hover-dark clickable",class:{"material-icons-outlined":!e.showReplies,"material-icons":e.showReplies},on:{click:e.loadReplies}},[e._v(" insert_comment ")]),e._v(" "),i("i",{staticClass:"hover-danger clickable material-icons",class:{"text-danger":e.liked},on:{click:e.likeComment}},[e._v("\n        "+e._s(e.liked?"favorite":"favorite_border")+"\n      ")])])]),e._v(" "),i("transition",{attrs:{name:"slide"}},[e.showReplies?i("div",{staticClass:"idea-reply-replies"},[i("new-idea-reply",{attrs:{idea:e.ideaReply.idea_id,"reply-to":e.ideaReply.id},on:{submit:e.submit}}),e._v(" "),void 0===e.replyTo?i("div",{staticClass:"border-right pr-3",staticStyle:{"border-color":"#212121 !important"}},[e._l(e.replies,(function(t){return i("idea-reply",{key:t.id,attrs:{"reply-to":e.ideaReply.id,"idea-reply":t},on:{replied:e.submit,deleted:e.ideaReplyDelete}})})),e._v(" "),e.repliesLoading?i("div",{staticClass:"w-100 d-flex p-2 justify-content-center align-items-center"},[i("loading-spinner")],1):e._e()],2):e._e(),e._v(" "),i("div",{staticClass:"w-100 d-flex align-items-center justify-content-center p-2"},[null!==e.next_page_url?i("loading-button",{staticClass:"btn btn-outline-dark",attrs:{loading:e.loadingMore},nativeOn:{click:function(t){return e.loadMore(t)}}},[e._v("بارگیری بیشتر")]):e._e()],1)],1):e._e()])],1)}),[],!1,null,"3d01b97c",null).exports);var g={methods:{submit:function(e){this.ideaReplies.unshift(e)},ideaReplyDelete:function(e){var t=this.ideaReplies.indexOf(e);t>-1&&(this.ideaReplies.splice(t,1),this.loadMore())},loadMore:function(){var e=this;null===this.next_page_url||this.ideaRepliesLoading||(this.ideaRepliesLoading=!0,axios.get(this.next_page_url).then((function(t){var i=t.data;i.result&&(e.next_page_url=i.data.next_page_url,e.ideaReplies=e.ideaReplies.concat(i.data.data)),e.ideaRepliesLoading=!1})).catch((function(e){return console.log(e)})).then((function(){return e.ideaRepliesLoading=!1})))}},props:{noScroll:{type:Boolean,default:!1,required:!1},idea:{type:Number,default:void 0,required:!0}},mounted:function(){var e=this;axios.get(this.$APP_URL+"/ideas/"+this.idea+"/replies").then((function(t){var i=t.data;i.result&&(e.next_page_url=i.data.next_page_url,e.ideaReplies=i.data.data),e.ideaRepliesLoading=!1})).catch((function(e){return console.log(e)}))},data:function(){return{ideaRepliesLoading:!0,ideaReplies:void 0,next_page_url:null}},name:"IdeaReplies",components:function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({LoadingSpinner:l.a,IdeaReply:m,NewIdeaReply:c},"IdeaReply",m)},y=Object(d.a)(g,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"idea-replies px-2"},[i("new-idea-reply",{attrs:{idea:e.idea},on:{submit:e.submit}}),e._v(" "),e._l(e.ideaReplies,(function(t){return i("idea-reply",{key:"idea_reply_"+t.id,attrs:{"idea-reply":t},on:{deleted:e.ideaReplyDelete}})})),e._v(" "),e.ideaRepliesLoading?i("div",{staticClass:"d-flex w-100 justify-content-center align-items-center py-3"},[i("LoadingSpinner")],1):e._e()],2)}),[],!1,null,null,null).exports,x={methods:{loadMore:function(){this.$refs.replies.loadMore()}},props:{pages:{type:Array,default:void 0},idea:{type:Object,default:void 0}},components:{NoContent:s.a,FeedbackCard:n.a,IdeaReplies:y},name:"Ideapage",layout:a.a},b=Object(d.a)(x,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("base-layout",[i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],staticClass:"content-container-right",attrs:{"infinite-scroll-distance":5}},[i("div",{staticClass:"w-100 d-flex justify-content-end align-items-center py-3"},[i("inertia-link",{staticClass:"text-grey",attrs:{href:"/ideas"}},[e._v("\n        بازگشت\n        "),i("i",{staticClass:"material-icons"},[e._v("keyboard_backspace")])])],1),e._v(" "),i("FeedbackCard",{attrs:{idea:e.idea}}),e._v(" "),i("idea-replies",{ref:"replies",staticClass:"mt-3",attrs:{idea:e.idea.id}})],1),e._v(" "),i("sidebar-left",[i("div",{staticClass:"card"},[i("div",{staticClass:"card-body px-2 py-1"},e._l(e.pages,(function(e){return i("people-suggestion",{key:e.id,attrs:{page:e}})})),1)])])],1)}),[],!1,null,null,null);t.default=b.exports},bnEJ:function(e,t,i){"use strict";i("aYyG")}}]);