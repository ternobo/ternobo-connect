{"version":3,"sources":["webpack:///./resources/js/Components/Modals/NewPostModal.vue?0c6e","webpack:///./resources/js/Components/Modals/NewPostModal.vue?ebf6","webpack:///resources/js/Components/Modals/NewPostModal.vue","webpack:///./resources/js/Components/Modals/NewPostModal.vue","webpack:///./resources/js/Mixins/Modal.js","webpack:///./resources/js/Components/inputs/FileInput.vue?0472","webpack:///./resources/js/Components/inputs/FileInput.vue?1608","webpack:///resources/js/Components/inputs/FileInput.vue","webpack:///./resources/js/Components/inputs/FileInput.vue"],"names":["component","_vm","this","_h","$createElement","_c","_self","attrs","isCropping","model","value","callback","$$v","showModal","expression","staticClass","$page","user","profile","_v","_s","name","showTypesItems","showType","categories","on","newCategory","category","text","leftCharacter","staticStyle","style","width","txtlen","rotateImage","_e","undefined","image","video","removeMedia","ref","aspectRatio","cropImage","$event","scopedSlots","_u","key","fn","proxy","tags","imageSelect","directives","rawName","modifiers","loading","nativeOn","submitPost","ModalMixin","created","show","data","watch","newValue","$emit","props","type","Boolean","default","required","change","open","_t"],"mappings":"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","file":"js/NewPostModal.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-modal',{attrs:{\"no-close-on-backdrop\":_vm.isCropping,\"hide-footer\":\"\",\"size\":\"lg\",\"title\":\"تولید محتوای تازه\",\"centered\":true},model:{value:(_vm.showModal),callback:function ($$v) {_vm.showModal=$$v},expression:\"showModal\"}},[_c('div',{staticClass:\"w-100\",attrs:{\"action\":\"/posts\",\"data-ajax\":\"\",\"method\":\"POST\",\"data-reload\":\"1\",\"enctype\":\"multipart/form-data\"}},[_c('div',{staticClass:\"new-post position-relative\"},[_c('div',{staticClass:\"selections\"},[_c('div',{staticClass:\"userinfo col-lg-4 p-0\"},[_c('lazy-image',{staticClass:\"profile m-0\",attrs:{\"src\":_vm.$page.user.profile,\"loading\":\"lazy\"}}),_vm._v(\" \"),_c('strong',[_vm._v(_vm._s(_vm.$page.user.name))])],1),_vm._v(\" \"),_c('div',{staticClass:\"categoryandtype\"},[_c('div',{staticClass:\"mx-1 col-lg-5 p-0\"},[_c('tselect',{attrs:{\"items\":_vm.showTypesItems,\"showNewItem\":false,\"direction\":\"rtl\"},model:{value:(_vm.showType),callback:function ($$v) {_vm.showType=$$v},expression:\"showType\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"ml-1 p-0 col-lg-7\"},[_c('tselect',{attrs:{\"items\":_vm.categories,\"value-option\":\"name\",\"showNewItem\":true,\"direction\":\"rtl\"},on:{\"new-item\":_vm.newCategory},model:{value:(_vm.category),callback:function ($$v) {_vm.category=$$v},expression:\"category\"}},[_c('i',{staticClass:\"material-icons-outlined\"},[_vm._v(\"layers\")]),_vm._v(\" دسته‌بندی\\n                        \")])],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"text px-0\"},[_c('div',{staticClass:\"textarea\"},[_c('textarea-autosize',{staticClass:\"w-100 autoresize autodirection\",attrs:{\"min-height\":201,\"rows\":\"8\",\"placeholder\":\"اگر در خویش میل نوشتن سراغ کردی باید سه چیز در تو باشد. شناختی، هنری و سحری (جبران خلیل جبران)\",\"maxlength\":\"2500\"},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}}),_vm._v(\" \"),_c('div',{staticClass:\"character-counter\"},[_c('span',{staticClass:\"counter tex-dark\"},[_vm._v(_vm._s(_vm.leftCharacter))]),_vm._v(\" \"),_c('div',{staticClass:\"progress ml-1 mb-0\",staticStyle:{\"width\":\"100px\",\"height\":\"5px\"}},[_c('div',{staticClass:\"progress-bar\",style:({ width : _vm.txtlen }),attrs:{\"role\":\"progressbar\",\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\"}})])])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"mediatag\"},[_c('div',{staticClass:\"position-relative\",attrs:{\"id\":\"mediaPreview\"}},[_c('div',{staticClass:\"topleftactions\"},[(_vm.isCropping)?_c('button',{staticClass:\"closebtn\",staticStyle:{\"height\":\"30px\",\"width\":\"30px\",\"padding\":\"3px\"},on:{\"click\":_vm.rotateImage}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"rotate_left\")])]):_vm._e(),_vm._v(\" \"),(_vm.image !== undefined || _vm.video !== undefined)?_c('button',{staticClass:\"closebtn\",on:{\"click\":_vm.removeMedia}},[_c('i',{staticClass:\"material-icons font-22\"},[_vm._v(\"close\")])]):_vm._e()]),_vm._v(\" \"),(_vm.isCropping)?_c('cropper',{ref:\"cropper\",staticClass:\"cropper\",attrs:{\"src\":_vm.image,\"stencil-props\":{ aspectRatio: 16/12 }}}):_vm._e(),_vm._v(\" \"),(_vm.video !== undefined && _vm.video !== null)?_c('video',{staticClass:\"w-100\",attrs:{\"src\":_vm.video,\"controls\":\"\"}}):_vm._e(),_vm._v(\" \"),(_vm.isCroppingDone)?_c('img',{ref:\"cropResult\",staticClass:\"w-100\"}):_vm._e(),_vm._v(\" \"),(_vm.isCropping && _vm.image !== undefined && _vm.image !== null)?_c('div',{staticClass:\"w-100 d-flex justify-content-center mb-3 position-relative\"},[_c('div',{staticClass:\"cropperactions\"},[_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":_vm.cropImage}},[_vm._v(\"تایید\")]),_vm._v(\" \"),_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.isCropping = false}}},[_vm._v(\"لغو\")])])]):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"tags pt-2 pr-0 pb-3\"},[_c('div',{staticClass:\"d-flex align-items-center justify-content-between mb-2\"},[_c('div',{staticClass:\"w-100 d-flex flex-column\"},[_c('span',{staticClass:\"font-18 bold\"},[_vm._v(\"برچسب‌ها\")]),_vm._v(\" \"),_c('span',{staticClass:\"text-muted bold font-11\"},[_vm._v(\"حداکثر ۳ برچست\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"d-flex align-items-center\"},[_c('v-select',{staticClass:\"w-100\",attrs:{\"dir\":\"rtl\",\"taggable\":\"\",\"multiple\":\"\",\"push-tags\":\"\"},scopedSlots:_vm._u([{key:\"open-indicator\",fn:function(){return [_c('span')]},proxy:true}]),model:{value:(_vm.tags),callback:function ($$v) {_vm.tags=$$v},expression:\"tags\"}}),_vm._v(\" \"),_c('div',{staticClass:\"d-flex align-items-center\"},[_c('file-input',{on:{\"change\":_vm.imageSelect}},[_c('a',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover\",modifiers:{\"hover\":true}}],staticClass:\"text-grey d-flex align-items-center clickable\",attrs:{\"title\":\"افزودن ویدیو / تصویر\"}},[_c('i',{staticClass:\"material-icons-outlined text-grey\"},[_vm._v(\"crop_original\")])])]),_vm._v(\" \"),_c('span',{staticClass:\"splitor-line mx-2\"}),_vm._v(\" \"),_c('inertia-link',{staticClass:\"text-grey d-flex align-items-center font-12\",attrs:{\"href\":\"/articles/create\",\"data-toggle\":\"tooltip\",\"title\":\"\",\"data-placement\":\"bottom\",\"data-original-title\":\"افزودن مقاله\"}},[_c('i',{staticClass:\"material-icons-outlined text-grey\"},[_vm._v(\"article\")])])],1)],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"media pl-2\"},[_c('input',{attrs:{\"type\":\"hidden\",\"name\":\"sizes\",\"value\":\"\",\"id\":\"postimage-options\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"submit position-relative\"},[_c('loading-button',{staticClass:\"btn btn-primary\",staticStyle:{\"margin-bottom\":\"-8px\"},attrs:{\"loading\":_vm.loading},nativeOn:{\"click\":function($event){return _vm.submitPost($event)}}},[_vm._v(\"\\n                    ارسال\\n                \")])],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewPostModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewPostModal.vue?vue&type=script&lang=js&\"","<template>\n<b-modal v-model='showModal' :no-close-on-backdrop=\"isCropping\" hide-footer size=\"lg\" title=\"تولید محتوای تازه\" :centered=\"true\">\n    <div action=\"/posts\" data-ajax method=\"POST\" data-reload=\"1\" enctype=\"multipart/form-data\" class=\"w-100\">\n        <div class=\"new-post position-relative\">\n            <div class=\"selections\">\n                <div class=\"userinfo col-lg-4 p-0\">\n                    <lazy-image :src=\"$page.user.profile\" class=\"profile m-0\" loading=\"lazy\" />\n                    <strong>{{ $page.user.name }}</strong>\n                </div>\n                <div class=\"categoryandtype\">\n                    <div class=\"mx-1 col-lg-5 p-0\">\n                        <tselect :items=\"showTypesItems\" :showNewItem=\"false\" v-model=\"showType\" direction='rtl'></tselect>\n                    </div>\n                    <div class=\"ml-1 p-0 col-lg-7\">\n                        <tselect v-on:new-item=\"newCategory\" :items=\"categories\" value-option=\"name\" :showNewItem=\"true\" v-model=\"category\" direction='rtl'>\n                            <i class=\"material-icons-outlined\">layers</i> دسته‌بندی\n                        </tselect>\n                    </div>\n                </div>\n            </div>\n            <div class=\"text px-0\">\n                <div class=\"textarea\">\n                    <textarea-autosize :min-height=\"201\" v-model=\"text\" rows=\"8\" placeholder=\"اگر در خویش میل نوشتن سراغ کردی باید سه چیز در تو باشد. شناختی، هنری و سحری (جبران خلیل جبران)\" class=\"w-100 autoresize autodirection\" maxlength=\"2500\"></textarea-autosize>\n                    <div class=\"character-counter\">\n                        <span class=\"counter tex-dark\">{{ leftCharacter }}</span>\n                        <div class=\"progress ml-1 mb-0\" style=\"width: 100px;height: 5px;\">\n                            <div class=\"progress-bar\" role=\"progressbar\" :style=\"{ width : txtlen }\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"mediatag\">\n                <div id='mediaPreview' class=\"position-relative\">\n                    <div class=\"topleftactions\">\n                        <button class=\"closebtn\" @click=\"rotateImage\" v-if=\"isCropping\" style=\"height: 30px;width: 30px;padding: 3px;\"> <i class=\"material-icons\">rotate_left</i></button>\n                        <button class=\"closebtn\" v-if=\"image !== undefined || video !== undefined\" @click=\"removeMedia\"> <i class=\"material-icons font-22\">close</i></button>\n                    </div>\n                    <cropper v-if=\"isCropping\" class=\"cropper\" ref=\"cropper\" :src=\"image\" :stencil-props=\"{ aspectRatio: 16/12 }\"></cropper>\n                    <video class=\"w-100\" v-if=\"video !== undefined && video !== null\" :src=\"video\" controls></video>\n\n                    <img class=\"w-100\" v-if=\"isCroppingDone\" ref=\"cropResult\" />\n\n                    <div v-if=\"isCropping && image !== undefined && image !== null\" class='w-100 d-flex justify-content-center mb-3 position-relative'>\n                        <div class='cropperactions'>\n                            <button type='button' @click=\"cropImage\">تایید</button>\n                            <button type='button' @click=\"isCropping = false\">لغو</button>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"tags pt-2 pr-0 pb-3\">\n                    <div class=\"d-flex align-items-center justify-content-between mb-2\">\n                        <div class=\"w-100 d-flex flex-column\">\n                            <span class=\"font-18 bold\">برچسب‌ها</span>\n                            <span class=\"text-muted bold font-11\">حداکثر ۳ برچست</span>\n                        </div>\n\n                    </div>\n                    <div class=\"d-flex align-items-center\">\n                        <v-select class=\"w-100\" dir=\"rtl\" v-model=\"tags\" taggable multiple push-tags>\n                            <template #open-indicator>\n                                <span></span>\n                            </template>\n                        </v-select>\n                        <div class=\"d-flex align-items-center\">\n                            <file-input v-on:change=\"imageSelect\">\n                                <a class=\"text-grey d-flex align-items-center clickable\" v-b-tooltip.hover title=\"افزودن ویدیو / تصویر\">\n                                    <i class=\"material-icons-outlined text-grey\">crop_original</i>\n                                </a>\n                            </file-input>\n                            <span class=\"splitor-line mx-2\"></span>\n                            <inertia-link href=\"/articles/create\" class=\"text-grey d-flex align-items-center font-12\" data-toggle=\"tooltip\" title=\"\" data-placement=\"bottom\" data-original-title=\"افزودن مقاله\"><i class=\"material-icons-outlined text-grey\">article</i></inertia-link>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"media pl-2\">\n                <input type=\"hidden\" name=\"sizes\" value=\"\" id=\"postimage-options\" />\n            </div>\n            <div class=\"submit position-relative\">\n                <loading-button :loading=\"loading\" class=\"btn btn-primary\" @click.native=\"submitPost\" style=\"margin-bottom: -8px;\">\n                    ارسال\n                </loading-button>\n            </div>\n        </div>\n    </div>\n</b-modal>\n</template>\n\n<script>\nimport ModalMixin from '../../Mixins/Modal';\nimport {\n    Cropper\n} from 'vue-advanced-cropper'\nimport {\n    Inertia\n} from '@inertiajs/inertia'\nimport FileInput from \"../../Components/inputs/FileInput\";\n\nexport default {\n    methods: {\n        newCategory(value) {\n            this.categories.push({\n                name: value,\n                id: value\n            });\n            axios.post(\"/categories\", {\n                name: value\n            });\n        },\n        cropImage() {\n            this.isCroppingDone = true;\n            this.isCropping = false;\n            const {\n                canvas,\n                coordinates\n            } = this.$refs.cropper.getResult();\n            canvas.toBlob((blob) => {\n                this.$refs.cropResult.src = URL.createObjectURL(blob);\n                this.cropCordinates = coordinates;\n            });\n        },\n        rotateImage() {\n            var image = document.createElement(\"img\");\n            image.crossOrigin = \"anonymous\";\n            image.src = this.image;\n            image.onload = () => {\n                var canvas = document.createElement(\"canvas\");\n                var ctx = canvas.getContext(\"2d\");\n\n                if (image.width > image.height) {\n                    canvas.width = image.height;\n                    canvas.height = image.width;\n                    ctx.translate(image.height, image.width / image.height);\n                } else {\n                    canvas.height = image.width;\n                    canvas.width = image.height;\n                    ctx.translate(image.height, image.width / image.height);\n                }\n                ctx.rotate(Math.PI / 2);\n                ctx.drawImage(image, 0, 0);\n                this.image = canvas.toDataURL();\n            };\n        },\n        removeMedia() {\n            this.isCroppingDone = false;\n            if (this.$refs.cropResult) {\n                this.$refs.cropResult.src = \"\"\n            };\n            this.file = false;\n            this.image = undefined;\n            this.video = undefined;\n        },\n        imageSelect(event) {\n            var input = event.target;\n            if (input.files && input.files[0]) {\n                let file = event.target.files[0];\n                var filetype = file.type;\n                let blobURL = URL.createObjectURL(file);\n                if (filetype.startsWith(\"image\")) {\n                    this.file = file;\n                    this.video = undefined;\n                    this.image = blobURL;\n                    this.isCropping = true;\n                } else if (filetype.startsWith(\"video\")) {\n                    this.isCropping = false;\n                    this.file = file;\n                    this.image = undefined;\n                    this.video = blobURL;\n                }\n            }\n        },\n\n        submitPost() {\n            this.loading = true;\n            const formData = new FormData();\n            formData.append(\"text\", this.text);\n            if (this.category) {\n                formData.append(\"category\", this.category.name);\n            }\n            formData.append(\"type\", this.showType.value);\n            formData.append(\"tags\", JSON.stringify(this.tags));\n            if (this.file !== undefined) {\n                formData.append(\"media\", this.file);\n                if (this.cropCordinates !== undefined) {\n                    formData.append(\"sizes\", JSON.stringify(this.cropCordinates));\n                }\n            }\n            axios.post(this.$APP_URL + '/posts', formData)\n                .then((response) => {\n                    const data = response.data;\n                    if (data.result) {\n                        Inertia.reload({\n                            only: ['posts']\n                        });\n                        this.$emit(\"update:show\", false);\n                    } else {\n                        const errors = data.errors;\n                        this.handleError(errors);\n                    }\n                }).catch((error) => {\n\n                }).then(() => this.loading = false);\n        }\n\n    },\n    watch: {\n        text(newValue) {\n            this.txtlen = (((newValue.length / 2500)) * 100) + \"%\";\n            this.leftCharacter = 2500 - newValue.length;\n        },\n\n    },\n    created() {\n        this.showType = this.showTypesItems[0];\n    },\n    data() {\n        return {\n            showTypesItems: [{\n                    name: \"همه\",\n                    value: \"public\",\n                    icon: \"public\"\n                },\n                {\n                    name: \"فقط دوستان\",\n                    value: \"private\",\n                    icon: \"group\"\n                }\n            ],\n            showType: undefined,\n            category: undefined,\n            text: undefined,\n            categories: this.$page.user.page.categories,\n            tags: [],\n            txtlen: \"0%\",\n            isCropping: false,\n            isCroppingDone: false,\n            image: undefined,\n            video: undefined,\n            file: undefined,\n            cropCordinates: undefined,\n            loading: false,\n            leftCharacter: 2500\n        }\n    },\n    components: {\n        Cropper,\n        FileInput\n    },\n    mixins: [ModalMixin],\n    name: \"NewPostModal\"\n}\n</script>\n\n<style>\n\n</style>\n","import { render, staticRenderFns } from \"./NewPostModal.vue?vue&type=template&id=05ab0f10&\"\nimport script from \"./NewPostModal.vue?vue&type=script&lang=js&\"\nexport * from \"./NewPostModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","const ModalMixin = {\n    created: function(){\n        this.showModal = this.show;\n    },\n    data: function() {\n        return {\n            showModal: false\n        }\n    },\n    watch: {\n        show(newValue) {\n            this.showModal = this.show;\n        },\n        showModal(newValue) {\n            this.$emit(\"update:show\", newValue);\n        },\n\n    },\n    props: {\n        show: {\n            type: Boolean,\n            default: false,\n            required: false\n        },\n    }\n};\nexport default ModalMixin;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('input',{ref:\"fileInput\",staticClass:\"d-none\",attrs:{\"type\":\"file\",\"accept\":\"image/jpeg, image/png, video/mp4, video/avi\"},on:{\"change\":_vm.change}}),_vm._v(\" \"),_c('div',{on:{\"click\":_vm.open}},[_vm._t(\"default\",[_c('button',{staticClass:\"btn btn-primary\"},[_vm._v(\"File Select\")])])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileInput.vue?vue&type=script&lang=js&\"","<template>\n<div>\n    <input type=\"file\" class=\"d-none\" accept=\"image/jpeg, image/png, video/mp4, video/avi\" ref=\"fileInput\" v-on:change=\"change\" />\n    <div @click=\"open\">\n        <slot>\n            <button class=\"btn btn-primary\">File Select</button>\n        </slot>\n    </div>\n</div>\n</template>\n\n<script>\nexport default {\n    name: \"FileInput\",\n    methods: {\n        open() {\n            this.$refs.fileInput.click();\n        },\n        change(e) {\n            this.$emit(\"change\", e);\n        }\n    },\n\n}\n</script>\n\n<style>\n\n</style>\n","import { render, staticRenderFns } from \"./FileInput.vue?vue&type=template&id=e58bcaa4&\"\nimport script from \"./FileInput.vue?vue&type=script&lang=js&\"\nexport * from \"./FileInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}