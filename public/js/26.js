(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{woY1:function(t,a,e){"use strict";e.r(a);var i=e("hAWA"),s=e("0sb7"),n=e("D1GP"),l={watch:{filter:function(t){var a=this;if("my-ideas"==this.status)this.loadMyIdeas();else{var e={status:this.status};"fav"==t&&(e.fav=!0),this.ideasArray=[],this.loadingPage=!0,axios({method:"GET",headers:{"X-Inertia":"true"},url:"/ideas",params:e}).then((function(t){var e=t.data.props.ideas;e&&(a.ideasArray=e.data,a.page=e.current_page,a.next_page_url=e.next_page_url)})).catch((function(t){console.log(t),self.$nextTick((function(){self.status=oldValue})),a.ideasArray=a.ideas.data})).then((function(){a.loadingPage=!1}))}},status:function(t,a){var e={status:t};if("fav"==this.filter&&(e.fav=!0),"my-ideas"==t)this.loadMyIdeas();else{var i=this;this.ideasArray=[],this.loadingPage=!0,axios({method:"GET",headers:{"X-Inertia":"true"},url:"/ideas",params:e}).then((function(t){var a=t.data.props.ideas;a&&(i.ideasArray=a.data,i.page=a.current_page,i.next_page_url=a.next_page_url)})).catch((function(t){console.log(t),self.$nextTick((function(){self.status=a})),i.ideasArray=i.ideas.data})).then((function(){i.loadingPage=!1}))}}},created:function(){this.ideasArray=this.ideas.data,this.page=this.ideas.current_page,this.next_page_url=this.ideas.next_page_url},methods:{loadMyIdeas:function(){var t={onlyMy:!0};"fav"==this.filter&&(t.fav=!0);var a=this;this.ideasArray=[],this.loadingPage=!0,axios({method:"GET",headers:{"X-Inertia":"true"},url:"/ideas",params:t}).then((function(t){var e=t.data.props.ideas;e&&(a.ideasArray=e.data,a.page=e.current_page,a.next_page_url=e.next_page_url)})).catch((function(t){console.log(t),self.$nextTick((function(){self.status=oldValue})),a.ideasArray=a.ideas.data})).then((function(){a.loadingPage=!1}))},loadMore:function(){var t=this;if(!this.loadingPage&&null!==this.next_page_url){var a=this,e={method:"GET",headers:{"X-Inertia":"true"},url:this.next_page_url};this.loadingPage=!0,axios(e).then((function(t){var e=t.data.props.ideas;e&&(a.ideasArray=a.ideasArray.concat(e.data),a.page=e.current_page,a.next_page_url=e.next_page_url)})).catch((function(a){t.next_page_url=e.url})).then((function(){a.loadingPage=!1}))}},saveIdea:function(){var t=this;this.loading=!0,axios.post("/ideas",{title:this.ideaTitle,description:this.ideaDescription}).then((function(a){if(a.data.result)t.ideaDescription=null,t.ideaTitle="",t.ideasArray.unshift(a.data.idea);else{var e=a.data.errors;Object.keys(e).forEach((function(a,i){t.toast(e[a][0])}))}t.loading=!1})).catch((function(a){console.log(a),t.toast("خطا در برقراری ارتباط"),t.loading=!1}))}},data:function(){return{showNewIdea:void 0,ideaTitle:"",ideaDescription:"",loading:!1,ideasArray:[],page:1,next_page_url:void 0,loadingPage:!1,status:"voting",filter:"mostnew"}},props:{ideas:{type:Object,default:void 0},pages:{type:Array,default:void 0}},layout:i.a,components:{FeedbackCard:s.a,NoContent:n.a}},o=e("KHd+"),r=Object(o.a)(l,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("base-layout",[e("div",{staticClass:"content-container-right"},[e("div",{staticClass:"card mb-3 w-100"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"d-flex align-items-center justify-content-between",staticStyle:{"min-height":"39px"}},[e("h2",{staticClass:"font-16 bold m-0"},[t._v("ما چطور می‌توانیم کیفیت خدماتمان را در ترنوبو بهبود ببخشیم؟")]),t._v(" "),e("transition",{attrs:{name:"fade"}},[t.showNewIdea?t._e():e("button",{staticClass:"btn bold btn-action rounded-pill",on:{click:function(a){t.showNewIdea=!0}}},[e("i",{staticClass:"material-icons-outlined"},[t._v("emoji_objects")]),t._v("\n              ثبت ایده جدید\n            ")])])],1),t._v(" "),e("transition",{attrs:{name:"slide"}},[t.showNewIdea?e("div",[e("div",{staticClass:"d-flex align-items-center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.ideaTitle,expression:"ideaTitle"}],staticClass:"form-control bg-body border-0",attrs:{type:"text",placeholder:"ایده‌ی خودتان را با ما به اشتراک بگذارید",max:"150",maxlength:"150"},domProps:{value:t.ideaTitle},on:{input:function(a){a.target.composing||(t.ideaTitle=a.target.value)}}}),t._v(" "),e("div",{staticClass:"d-flex w-25 align-items-center"},[e("span",{staticClass:"mx-2"},[t._v(" "+t._s(150-t.ideaTitle.length)+" ")]),t._v(" "),e("b-progress",{staticClass:"w-100",attrs:{value:t.ideaTitle.length/150*100,max:100}})],1)]),t._v(" "),e("div",{staticClass:"py-2"},[e("textarea-autosize",{staticClass:"form-control",attrs:{maxlength:"2500","min-height":230,placeholder:"کمی بیشتری در رابطه با ایده خودتان توضیح دهید...(اختیاری)"},model:{value:t.ideaDescription,callback:function(a){t.ideaDescription=a},expression:"ideaDescription"}})],1),t._v(" "),e("div",{staticClass:"d-flex align-items-center flex-row-reverse pt-3"},[e("loading-button",{staticClass:"btn btn-primary",attrs:{loading:t.loading},nativeOn:{click:function(a){return t.saveIdea(a)}}},[t._v("ارسال")]),t._v(" "),e("button",{staticClass:"btn btn-transparent text-light",attrs:{disabled:t.loading},on:{click:function(a){t.showNewIdea=!1}}},[t._v("لغو")])],1)]):t._e()])],1)]),t._v(" "),e("div",{staticClass:"tabs"},[e("ul",{staticClass:"default position-relative"},[e("li",{class:{"is-active":"voting"===t.status},on:{click:function(a){t.status="voting"}}},[e("a",[t._v("درحال رای‌گیری")])]),t._v(" "),e("li",{class:{"is-active":"scheduled"===t.status},on:{click:function(a){t.status="scheduled"}}},[e("a",[t._v("برنامه ریزی شده")])]),t._v(" "),e("li",{class:{"is-active":"done"===t.status},on:{click:function(a){t.status="done"}}},[e("a",[t._v("انجام شده")])]),t._v(" "),e("li",{staticClass:"position-absolute",class:{"is-active":"my-ideas"===t.status},staticStyle:{left:"0"},on:{click:function(a){t.status="my-ideas"}}},[e("a",{staticClass:"active"},[e("i",{staticClass:"material-icons"},[t._v("outlined_flag")]),t._v(" پیشنهادات من")])])])]),t._v(" "),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"ideas",attrs:{"infinite-scroll-disabled":t.loadingPage,"infinite-scroll-distance":"12"}},[e("div",{staticClass:"item-filters mb-3 mt-2"},[e("div",{staticClass:"filter-item",class:{active:"mostnew"==t.filter},on:{click:function(a){t.filter="mostnew"}}},[e("i",{staticClass:"material-icons-outlined"},[t._v("new_releases")]),t._v(" جدید‌ترین‌ها")]),t._v(" "),e("div",{staticClass:"filter-item",class:{active:"fav"==t.filter},on:{click:function(a){t.filter="fav"}}},[e("i",{staticClass:"material-icons-outlined"},[t._v("favorite_border")]),t._v(" محبوب‌ترین‌ها")])]),t._v(" "),t._l(t.ideasArray,(function(t){return e("FeedbackCard",{key:t.id,attrs:{idea:t}})})),t._v(" "),t.loadingPage?e("div",{staticClass:"w-100 d-flex justify-content-center py-3"},[e("loading-spinner",{staticClass:"image__spinner"})],1):t._e(),t._v(" "),null!==t.next_page_url||t.loadingPage?t._e():e("div",[e("no-content",[t._v(" هیچ ایده‌ای وجود ندارد ")])],1)],2)]),t._v(" "),e("sidebar-left",[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body px-2 py-1"},t._l(t.pages,(function(t){return e("people-suggestion",{key:t.id,attrs:{page:t}})})),1)])])],1)}),[],!1,null,null,null);a.default=r.exports}}]);