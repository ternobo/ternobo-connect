(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{LXOR:function(t,e,i){var n=i("LbUf");"string"==typeof n&&(n=[[t.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(n,s);n.locals&&(t.exports=n.locals)},LbUf:function(t,e,i){(t.exports=i("I1BE")(!1)).push([t.i,".quillWrapper[data-v-61c53124] {\n  min-height: 100%;\n  width: 100%;\n  flex: 1 1 auto;\n}\n.new-article[data-v-61c53124] {\n  display: flex;\n  flex-direction: column;\n  min-height: calc(100vh - 130px);\n}\n.editor-section[data-v-61c53124] {\n  flex: 1 1 auto;\n  background: #fff;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n.cover-section[data-v-61c53124] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: url(/images/uploadcover.svg) no-repeat;\n  background-position: center;\n  background-size: contain;\n  cursor: pointer;\n  height: 300px;\n  position: relative;\n}\n.cover-section img[data-v-61c53124] {\n  width: 100%;\n  height: 300px;\n  object-fit: cover;\n}\n.actions-section[data-v-61c53124] {\n  display: flex;\n}",""])},LgIB:function(t,e,i){"use strict";var n={methods:{removeLastTag:function(){(null==this.input||this.input.length<1)&&(this.tags.pop(),this.$emit("input",this.tags))},removeTag:function(t){this.tags.splice(t,1),this.$emit("input",this.tags)},addTag:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!=t?-1==this.tags.indexOf(t)&&(this.tags.push(t),this.input=null,this.$emit("input",this.tags),this.suggestions=[]):null!=this.input&&-1==this.tags.indexOf(this.input)&&(this.tags.push(this.input),this.input=null,this.$emit("input",this.tags))},check:function(){(null==this.val||this.val.length<1)&&this.required||this.notValid?this.invalid=!0:this.invalid=!1}},created:function(){this.tags=this.value},watch:{value:function(){this.tags=this.value},input:function(t){var e=this;null!=t&&t.length>0&&axios.get(this.$APP_URL+"/gettags?term="+t+"&q="+t).then((function(t){var i=t.data;i.results.length>0&&(e.suggestions=i.results)}))}},data:function(){return{tags:[],suggestions:[],input:null,invalid:!1}},props:{notValid:{type:Boolean,default:!1,required:!1},value:{type:Array,required:!1},required:{type:Boolean,default:!1,required:!1},type:{type:String,default:"text",required:!1},maxlength:{type:Number,default:15e3,required:!1},inputClass:{type:String,default:"",required:!1},placeholder:{type:String,default:void 0,required:!1}}},s=i("KHd+"),a=Object(s.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex tag-input",class:{focus:null!=t.tags&&null!=t.tags&&t.tags.length>0}},[i("div",{staticClass:"tags"},t._l(t.tags,(function(e,n){return i("div",{key:"newpost_tag_"+e+"_"+n,staticClass:"tag-item",on:{click:function(e){return t.removeTag(n)}}},[t._v("\n            "+t._s(e)+"\n        ")])})),0),t._v(" "),"checkbox"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"input",class:[t.inputClass,{invalid:t.invalid}],attrs:{placeholder:" ",disabled:null!=t.tags&&null!=t.tags&&3==t.tags.length,maxlength:t.maxlength,type:"checkbox"},domProps:{checked:Array.isArray(t.input)?t._i(t.input,null)>-1:t.input},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTag()},blur:t.check,change:function(e){var i=t.input,n=e.target,s=!!n.checked;if(Array.isArray(i)){var a=t._i(i,null);n.checked?a<0&&(t.input=i.concat([null])):a>-1&&(t.input=i.slice(0,a).concat(i.slice(a+1)))}else t.input=s}}}):"radio"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"input",class:[t.inputClass,{invalid:t.invalid}],attrs:{placeholder:" ",disabled:null!=t.tags&&null!=t.tags&&3==t.tags.length,maxlength:t.maxlength,type:"radio"},domProps:{checked:t._q(t.input,null)},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTag()},blur:t.check,change:function(e){t.input=null}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"input",class:[t.inputClass,{invalid:t.invalid}],attrs:{placeholder:" ",disabled:null!=t.tags&&null!=t.tags&&3==t.tags.length,maxlength:t.maxlength,type:t.type},domProps:{value:t.input},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTag()},blur:t.check,input:function(e){e.target.composing||(t.input=e.target.value)}}}),t._v(" "),t._m(0),t._v(" "),t.suggestions.length>0&&null!=this.input&&this.input.length>0?i("div",{staticClass:"tags-suggestion"},[i("div",{staticClass:"tags flex-wrap"},t._l(t.suggestions,(function(e,n){return i("div",{key:"suggested_tag_"+e+"_"+n,staticClass:"tag-item",on:{click:function(i){return t.addTag(e.text)}}},[t._v("\n                "+t._s(e.text)+"\n            ")])})),0)]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"d-flex align-items-center"},[this._v("\n        برچسب‌ها\n        "),e("small",{staticClass:"max-text mr-1"},[this._v("حداکثر 3 برچسب")])])}],!1,null,null,null);e.a=a.exports},bD4Y:function(t,e,i){"use strict";i("LXOR")},hAWA:function(t,e,i){"use strict";var n={},s=i("KHd+"),a=Object(s.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bottom-nav d-lg-none d-flex"},[i("inertia-link",{class:{active:"/notifications"===t.$root.url},attrs:{href:"/notifications"}},[i("i",{staticClass:"navheader-icon",class:{unread:t.$page.props.notifications_count>0}},[t._v(t._s("/notifications"===t.$root.url?"notifications":"notifications_none"))])]),t._v(" "),i("inertia-link",{class:{active:"/connections"===t.$root.url},attrs:{href:"/connections"}},[i("i",{staticClass:"navheader-icon"},[t._v("group")])]),t._v(" "),i("inertia-link",{class:{active:"/feed"===t.$root.url},attrs:{href:"/feed"}},[i("i",{staticClass:"navheader-icon material-icons"},[t._v("home")])]),t._v(" "),i("inertia-link",{class:{active:"/bookmarks"===t.$root.url},attrs:{href:"/bookmarks"}},[i("i",{staticClass:"navheader-icon"},[t._v("bookmarks")])]),t._v(" "),i("inertia-link",{class:{active:t.$root.url==="/"+t.$page.props.user.username},attrs:{href:"/"+t.$page.props.user.username}},[i("i",{staticClass:"navheader-icon"},[i("img",{staticClass:"rounded-circle",staticStyle:{width:"24px",height:"24px"},attrs:{src:t.$page.props.user.profile}})])])],1)}),[],!1,null,null,null).exports,o={name:"AppLayout",components:{AppHeader:i("Oe0w").default,BottomNavigator:a}},l=Object(s.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("AppHeader"),this._v(" "),e("div",{class:{"has-bnav":!this.$root.isDesktop}},[e("transition",{attrs:{mode:"out-in",name:"fade"}},[this._t("default")],2)],1),this._v(" "),this.$root.isDesktop?this._e():e("bottom-navigator")],1)}),[],!1,null,null,null);e.a=l.exports},"y/tn":function(t,e,i){"use strict";i.r(e);var n=i("hAWA"),s=i("1y+g"),a=i("Ql3O"),o=(i("osEC"),{components:{TagInput:i("LgIB").a},methods:{save:function(){var t={slug:this.slug,tags:this.tags,category:this.category};this.$emit("save",t),this.$emit("update:show",!1)},newCategory:function(t){this.categories.push({name:t,id:t}),axios.post("/categories",{name:t})}},data:function(){return{slug:null,category:void 0,editLink:!1,tags:[],categories:this.$page.props.currentPage.categories}},mixins:[a.a]}),l=i("KHd+"),r=Object(l.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return null!=t.$page.props.user?i("b-modal",{attrs:{"hide-footer":"","hide-header":"",size:"md",centered:!0},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[i("div",[i("div",{staticClass:"w-100 pr-2 mb-3 mt-2 d-flex align-items-center dir-ltr text-right text-action",attrs:{dir:"ltr"}},[i("i",{staticClass:"material-icons-outlined clickale p-1 text-grey font-18",on:{click:function(e){t.editLink=!t.editLink}}},[t._v(t._s(t.editLink?"check":"edit"))]),t._v(" "),i("span",{staticClass:"dir-ltr"},[t._v("Ternobo.com/"+t._s(t.$page.props.user.username)+"/")]),t._v(" "),i("input",{directives:[{name:"no-space",rawName:"v-no-space"},{name:"model",rawName:"v-model",value:t.slug,expression:"slug"}],staticClass:"w-100 py-1 text-action dir-ltr text-left",class:{"border-0":!t.editLink},attrs:{type:"text",id:"slug-input",name:"slug",readonly:!t.editLink},domProps:{value:t.slug},on:{input:function(e){e.target.composing||(t.slug=e.target.value)}}}),t._v(" "),i("span",{staticClass:"py-1 px-2",staticStyle:{direction:"rtl","white-space":"nowrap"}},[t._v("پیوند : ")])]),t._v(" "),i("tselect",{staticClass:"my-3",attrs:{items:t.categories,"value-option":"name",showNewItem:!0,direction:"rtl"},on:{"new-item":t.newCategory},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},[i("i",{staticClass:"material-icons-outlined"},[t._v("layers")]),t._v(" دسته‌بندی ")]),t._v(" "),i("div",[i("tag-input",{staticClass:"w-100",model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}})],1)],1),t._v(" "),i("button",{staticClass:"btn btn-primary mt-4",staticStyle:{},on:{click:t.save}},[t._v("ثبت")])]):t._e()}),[],!1,null,null,null).exports,c=i("Wz0r"),u=i("aTBc"),d=i.n(u),p=i("+z1p"),g=i.n(p),h={props:{article:{type:Object,default:void 0,required:!1}},methods:{onReady:function(t){console.log(t)},selectFile:function(){if(void 0===this.thumbnail){var t=this,e=document.createElement("input");e.type="file",e.style.display="none",document.body.append(e),e.click(),e.addEventListener("change",(function(){if(e.files.length>0){var i=e.files[0];if(i.type.startsWith("image")){var n=URL.createObjectURL(i);t.cover=i,t.thumbnail=n,t.cropping=!0}else t.toast("فقط امکان انتخاب تصویر وجود دارد.")}e.remove()}),!1)}},onCropped:function(t,e){var i=this;e.toBlob((function(t){return i.thumbnail=URL.createObjectURL(t)}))},setSettings:function(t){this.tags=t.tags,this.slug=t.slug,null!=t.category&&t.category.id&&(console.log(t.category),this.category=t.category.name)},submit:function(){var t=this,e=new FormData;null!==this.cover&&void 0!==this.cover&&e.append("media",this.cover),null!==this.title&&void 0!==this.title?e.append("title",this.title):this.toast("عنوان مقاله اجباری است."),null!==this.content&&void 0!==this.content?e.append("text",this.content):this.toast("محتوای مقاله اجباری است."),null!==this.slug&&void 0!==this.slug&&e.append("slug",this.slug),null!==this.category&&void 0!==this.category&&e.append("category",this.category),e.append("tags",JSON.stringify(this.tags)),this.loading=!0;void 0!==this.article?(e.append("_method","put"),axios.post("/articles/"+this.article.id,e).then((function(e){e.data.result?c.Inertia.visit(e.data.redirect):t.handleError(t.data.errors)})).then((function(){return t.loading=!1}))):axios.post("/articles",e).then((function(e){e.data.result?c.Inertia.visit(e.data.redirect):t.handleError(t.data.errors)})).then((function(){return t.loading=!1}))}},created:function(){void 0!==this.article&&(this.title=this.article.title,this.content=this.article.text,null!==this.article.medias&&(this.thumbnail=this.article.medias),this.tags=this.article.tags,null!==this.article.category?this.category=this.article.category.name:this.category=void 0,this.slug=this.article.slug)},mounted:function(){void 0!==this.article&&(this.$refs.settings.slug=this.slug,this.$refs.settings.category=this.category,this.$refs.settings.tags=this.tags)},data:function(){return{title:null,content:"",cropping:!1,thumbnail:void 0,slug:null,category:null,tags:[],cover:null,loading:!1,showSettings:!1,editor:g.a,editorConfig:{toolbar:["heading","|","bold","italic","link","bulletedList","numberedList","|","indent","outdent","|","imageUpload","blockQuote","insertTable","mediaEmbed","undo","redo"],language:"fa"}}},components:{CropperModal:s.a,ArticleSettings:r,ckeditor:d.a.component},layout:n.a},v=(i("bD4Y"),Object(l.a)(h,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("base-layout",[i("div",{staticClass:"new-article w-100"},[i("CropperModal",{attrs:{title:"تصویر شاخص مقاله",image:t.thumbnail,show:t.cropping},on:{cropped:t.onCropped,"update:show":function(e){t.cropping=e}}}),t._v(" "),i("ArticleSettings",{ref:"settings",attrs:{show:t.showSettings},on:{save:t.setSettings,"update:show":function(e){t.showSettings=e}}}),t._v(" "),i("div",{staticClass:"cover-section clickable",on:{click:t.selectFile}},[void 0!==t.thumbnail?i("img",{attrs:{src:t.thumbnail}}):t._e(),t._v(" "),void 0!==t.thumbnail?i("div",{staticClass:"position-absolute",staticStyle:{top:"16px",left:"16px"},on:{click:function(e){t.thumbnail=void 0}}},[i("button",{staticClass:"btn closebtn p-4"},[i("i",{staticClass:"material-icons"},[t._v("close")])])]):t._e()]),t._v(" "),i("div",{staticClass:"editor-section border-bottom"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"font-24 border-0 form-control",attrs:{type:"text",placeholder:"عنوان مقاله"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),i("ckeditor",{ref:"editor",attrs:{editor:t.editor,config:t.editorConfig},on:{ready:t.onReady},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),i("div",{staticClass:"actions-section"},[i("loading-button",{staticClass:"btn btn-primary w-100",attrs:{loading:t.loading},nativeOn:{click:function(e){return t.submit(e)}}},[t._v("ارسال")]),t._v(" "),i("button",{staticClass:"btn button-transparent btn-transparent",on:{click:function(e){t.showSettings=!0}}},[i("i",{staticClass:"material-icons text-muted"},[t._v("settings")])])],1)],1)])}),[],!1,null,"61c53124",null));e.default=v.exports}}]);