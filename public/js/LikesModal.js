(self.webpackChunkternobo = self.webpackChunkternobo || []).push([[7608], { 9170: (t, e, o) => { "use strict"; o.r(e), o.d(e, { default: () => r }); var i = o(9949), s = o(2880), a = o(1378), n = o(9250); const l = { watch: { likesPaginate: function (t) { this.likes = t.data, this.next_page_url = t.next_page_url } }, props: { item: { default: 0, required: !0 }, type: { default: "post", required: !1 } }, data: function () { return { error: !1, loading: !0, likesPaginate: null, likes: [], next_page_url: null, loadingMore: !1, typeBasedData: {} } }, methods: { loadMore: function () { var t = this; if (!this.loadingMore && null !== this.next_page_url) { var e = { method: "POST", url: this.next_page_url, data: this.typeBasedData }; this.loadingMore = !0, axios(e).then((function (e) { var o = e.data.likes; o && (t.likes = t.likes.concat(o.data), t.next_page_url = o.next_page_url) })).catch((function (o) { t.next_page_url = e.url })).then((function () { t.loadingMore = !1 })) } }, onShown: function () { var t = this; this.likes = !0, this.loading = !0, this.error = !1, "comment" == this.type ? this.typeBasedData = { comment_id: this.item } : this.typeBasedData = { post_id: this.item }, axios.post("/likes/get", this.typeBasedData).then((function (e) { t.likesPaginate = e.data.likes })).catch((function (e) { t.error = !0 })).then((function () { return t.loading = !1 })) } }, components: { LazyImage: a.Z, FollowButton: s.Z, LoadingSpinner: n.Z }, mixins: [i.Z], name: "LikesModal" }; const r = (0, o(1900).Z)(l, (function () { var t = this, e = t.$createElement, o = t._self._c || e; return o("b-modal", { attrs: { "hide-footer": "", title: "پسند‌ها", size: "md", centered: !0 }, on: { show: t.onShown }, model: { value: t.showModal, callback: function (e) { t.showModal = e }, expression: "showModal" } }, [t.loading || t.error ? o("div", { staticClass: "d-flex align-items-center justify-content-center loading", staticStyle: { "min-height": "200px" } }, [t.loading ? o("loading-spinner") : t._e(), t._v(" "), t.error ? o("div", { staticClass: "d-flex flex-column justify-center align-items-center w-100 err" }, [o("i", { staticClass: "hover-dark text-muted material-icons-outlined", on: { click: t.onShown } }, [t._v("refresh")]), t._v(" "), o("br"), t._v(" "), o("span", { staticClass: "text-muted" }, [t._v("خطا در برقراری ارتباط")])]) : t._e()], 1) : t._e(), t._v(" "), t.loading || t.error ? t._e() : o("div", { directives: [{ name: "infinite-scroll", rawName: "v-infinite-scroll", value: t.loadMore, expression: "loadMore" }], staticClass: "likes-list", attrs: { "infinite-scroll-distance": 10 } }, [t._l(t.likes, (function (e) { return o("div", { key: "like_" + e.id, staticClass: "like-item" }, [o("wire-link", { staticClass: "userinfo", attrs: { href: "/" + e.page.slug } }, [o("lazy-image", { staticClass: "mb-0", class: { "profile-sm": t.$root.isDesktop, "profile-md": !t.$root.isDesktop }, attrs: { imgClass: { "profile-sm": t.$root.isDesktop, "profile-md": !t.$root.isDesktop }, src: e.page.profile } }), t._v(" "), o("div", { staticClass: "page-name d-flex flex-column" }, [o("strong", [t._v(" " + t._s(e.page.name) + " "), 1 === e.page.is_verified ? o("i", { staticClass: "verificationcheck" }, [t._v("check_circle")]) : t._e()]), t._v(" "), o("span", { staticClass: "shortbio" }, [t._v(" " + t._s(e.page.short_bio) + " ")])])], 1), t._v(" "), o("follow-button", { attrs: { page: e.page.id } })], 1) })), t._v(" "), null != this.next_page_url ? o("infinite-loading", { attrs: { spinner: "spiral" }, on: { infinite: t.loadMore } }) : t._e()], 2)]) }), [], !1, null, null, null).exports }, 2880: (t, e, o) => { "use strict"; o.d(e, { Z: () => a }); var i = o(7430); const s = { mounted: function () { if (null !== this.$store.state.user) { var t = this.page; "number" != typeof t && (t = parseInt(t)), this.page_id = t, this.$store.state.shared.followings.includes(t) && (this.followed = !0, this.text = "دنبال شده", this.$emit("followed")) } }, data: function () { return { loading: !1, followed: !1, text: "دنبال کردن", page_id: -1 } }, props: { page: { type: Number, default: void 0, required: !0 } }, methods: { follow: function () { var t = this; if (this.loading = !0, this.followed) { e = { method: "post", url: this.$APP_URL + "/unfollow/" + this.page }; axios(e).then((function (e) { if (e.data.result) t.loading = !1, t.text = "دنبال کردن", t.followed = !1, t.$emit("unfollowed"), t.$store.commit("unfollow", t.$store.state.followings.indexOf(t.page_id)); else { var o = e.data.errors; Object.keys(o).forEach((function (e, i) { t.$bvToast.toast(o[e][0], { noCloseButton: !0, toaster: "b-toaster-bottom-left", bodyClass: ["bg-dark", "text-right", "text-white"], solid: !0 }) })) } t.loading = !1 })).catch((function (t) { this.loading = !1 })) } else { var e = { method: "post", url: this.$APP_URL + "/follow/" + this.page }; axios(e).then((function (e) { if (e.data.result) t.loading = !1, t.$store.commit("addFollower", t.page_id), t.text = "دنبال شده", t.followed = !0, t.$emit("followed"); else { var o = e.data.errors; Object.keys(o).forEach((function (e, i) { t.$bvToast.toast(o[e][0], { noCloseButton: !0, toaster: "b-toaster-bottom-left", bodyClass: ["bg-dark", "text-right", "text-white"], solid: !0 }) })) } t.loading = !1 })).catch((function (e) { t.loading = !1 })) } } }, components: { LoadingButton: i.Z } }; const a = (0, o(1900).Z)(s, (function () { var t = this, e = t.$createElement, o = t._self._c || e; return null !== t.$store.state.user ? o("LoadingButton", { staticClass: "btn follow-btn", class: { "btn-followed-connected": t.followed }, attrs: { loading: t.loading }, nativeOn: { click: function (e) { return t.follow(e) } } }, [t._v(t._s(t.text))]) : t._e() }), [], !1, null, null, null).exports } }]);
//# sourceMappingURL=LikesModal.js.map
