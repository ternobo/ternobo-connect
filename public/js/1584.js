(self.webpackChunkternobo = self.webpackChunkternobo || []).push([[1584, 3832], { 9655: (t, e, i) => { "use strict"; function n(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") } function s(t, e, i) { return e in t ? Object.defineProperty(t, e, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = i, t } function o(t, e) { var i = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), i.push.apply(i, n) } return i } function a(t) { for (var e = 1; e < arguments.length; e++) { var i = null != arguments[e] ? arguments[e] : {}; e % 2 ? o(Object(i), !0).forEach((function (e) { s(t, e, i[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(i)) : o(Object(i)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(i, e)) })) } return t } i.d(e, { Z: () => g }); var r = function (t, e) { return t.matches ? t.matches(e) : t.msMatchesSelector ? t.msMatchesSelector(e) : t.webkitMatchesSelector ? t.webkitMatchesSelector(e) : null }, l = function (t, e) { return t.closest ? t.closest(e) : function (t, e) { for (var i = t; i && 1 === i.nodeType;) { if (r(i, e)) return i; i = i.parentNode } return null }(t, e) }, c = function (t) { return Boolean(t && "function" == typeof t.then) }, d = function t() { var e = this, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, o = i.search, a = i.autoSelect, r = void 0 !== a && a, d = i.setValue, h = void 0 === d ? function () { } : d, u = i.setAttribute, p = void 0 === u ? function () { } : u, m = i.onUpdate, f = void 0 === m ? function () { } : m, v = i.onSubmit, g = void 0 === v ? function () { } : v, b = i.onShow, w = void 0 === b ? function () { } : b, y = i.onHide, _ = void 0 === y ? function () { } : y, x = i.onLoading, C = void 0 === x ? function () { } : x, R = i.onLoaded, k = void 0 === R ? function () { } : R; n(this, t), s(this, "value", ""), s(this, "searchCounter", 0), s(this, "results", []), s(this, "selectedIndex", -1), s(this, "handleInput", (function (t) { var i = t.target.value; e.updateResults(i), e.value = i })), s(this, "handleKeyDown", (function (t) { var i = t.key; switch (i) { case "Up": case "Down": case "ArrowUp": case "ArrowDown": var n = "ArrowUp" === i || "Up" === i ? e.selectedIndex - 1 : e.selectedIndex + 1; t.preventDefault(), e.handleArrows(n); break; case "Tab": e.selectResult(); break; case "Enter": var s = e.results[e.selectedIndex]; e.selectResult(), e.onSubmit(s); break; case "Esc": case "Escape": e.hideResults(), e.setValue(); break; default: return } })), s(this, "handleFocus", (function (t) { var i = t.target.value; e.updateResults(i), e.value = i })), s(this, "handleBlur", (function () { e.hideResults() })), s(this, "handleResultMouseDown", (function (t) { t.preventDefault() })), s(this, "handleResultClick", (function (t) { var i = t.target, n = l(i, "[data-result-index]"); if (n) { e.selectedIndex = parseInt(n.dataset.resultIndex, 10); var s = e.results[e.selectedIndex]; e.selectResult(), e.onSubmit(s) } })), s(this, "handleArrows", (function (t) { var i = e.results.length; e.selectedIndex = (t % i + i) % i, e.onUpdate(e.results, e.selectedIndex) })), s(this, "selectResult", (function () { var t = e.results[e.selectedIndex]; t && e.setValue(t), e.hideResults() })), s(this, "updateResults", (function (t) { var i = ++e.searchCounter; e.onLoading(), e.search(t).then((function (t) { i === e.searchCounter && (e.results = t, e.onLoaded(), 0 !== e.results.length ? (e.selectedIndex = e.autoSelect ? 0 : -1, e.onUpdate(e.results, e.selectedIndex), e.showResults()) : e.hideResults()) })) })), s(this, "showResults", (function () { e.setAttribute("aria-expanded", !0), e.onShow() })), s(this, "hideResults", (function () { e.selectedIndex = -1, e.results = [], e.setAttribute("aria-expanded", !1), e.setAttribute("aria-activedescendant", ""), e.onUpdate(e.results, e.selectedIndex), e.onHide() })), s(this, "checkSelectedResultVisible", (function (t) { var i = t.querySelector('[data-result-index="'.concat(e.selectedIndex, '"]')); if (i) { var n = t.getBoundingClientRect(), s = i.getBoundingClientRect(); s.top < n.top ? t.scrollTop -= n.top - s.top : s.bottom > n.bottom && (t.scrollTop += s.bottom - n.bottom) } })), this.search = c(o) ? o : function (t) { return Promise.resolve(o(t)) }, this.autoSelect = r, this.setValue = h, this.setAttribute = p, this.onUpdate = f, this.onSubmit = g, this.onShow = w, this.onHide = _, this.onLoading = C, this.onLoaded = k }, h = 0, u = function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ""; return "".concat(t).concat(++h) }; const p = function (t, e, i, n, s, o, a, r, l, c) { "boolean" != typeof a && (l = r, r = a, a = !1); const d = "function" == typeof i ? i.options : i; let h; if (t && t.render && (d.render = t.render, d.staticRenderFns = t.staticRenderFns, d._compiled = !0, s && (d.functional = !0)), n && (d._scopeId = n), o ? (h = function (t) { (t = t || this.$vnode && this.$vnode.ssrContext || this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) || "undefined" == typeof __VUE_SSR_CONTEXT__ || (t = __VUE_SSR_CONTEXT__), e && e.call(this, l(t)), t && t._registeredComponents && t._registeredComponents.add(o) }, d._ssrRegister = h) : e && (h = a ? function (t) { e.call(this, c(t, this.$root.$options.shadowRoot)) } : function (t) { e.call(this, r(t)) }), h) if (d.functional) { const t = d.render; d.render = function (e, i) { return h.call(i), t(e, i) } } else { const t = d.beforeCreate; d.beforeCreate = t ? [].concat(t, h) : [h] } return i }({ render: function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { ref: "root" }, [t._t("default", [i("div", t._b({}, "div", t.rootProps, !1), [i("input", t._g(t._b({ ref: "input", on: { input: t.handleInput, keydown: t.core.handleKeyDown, focus: t.core.handleFocus, blur: t.core.handleBlur } }, "input", t.inputProps, !1), t.$listeners)), t._v(" "), i("ul", t._g(t._b({ ref: "resultList" }, "ul", t.resultListProps, !1), t.resultListListeners), [t._l(t.results, (function (e, n) { return [t._t("result", [i("li", t._b({ key: t.resultProps[n].id }, "li", t.resultProps[n], !1), [t._v("\n              " + t._s(t.getResultValue(e)) + "\n            ")])], { result: e, props: t.resultProps[n] })] }))], 2)])], { rootProps: t.rootProps, inputProps: t.inputProps, inputListeners: t.inputListeners, resultListProps: t.resultListProps, resultListListeners: t.resultListListeners, results: t.results, resultProps: t.resultProps })], 2) }, staticRenderFns: [] }, undefined, { name: "Autocomplete", inheritAttrs: !1, props: { search: { type: Function, required: !0 }, baseClass: { type: String, default: "autocomplete" }, autoSelect: { type: Boolean, default: !1 }, getResultValue: { type: Function, default: function (t) { return t } }, defaultValue: { type: String, default: "" }, debounceTime: { type: Number, default: 0 } }, data: function () { var t, e, i, n, s = new d({ search: this.search, autoSelect: this.autoSelect, setValue: this.setValue, onUpdate: this.handleUpdate, onSubmit: this.handleSubmit, onShow: this.handleShow, onHide: this.handleHide, onLoading: this.handleLoading, onLoaded: this.handleLoaded }); return this.debounceTime > 0 && (s.handleInput = (t = s.handleInput, e = this.debounceTime, function () { var s = this, o = arguments, a = function () { n = null, i || t.apply(s, o) }, r = i && !n; clearTimeout(n), n = setTimeout(a, e), r && t.apply(s, o) })), { core: s, value: this.defaultValue, resultListId: u("".concat(this.baseClass, "-result-list-")), results: [], selectedIndex: -1, expanded: !1, loading: !1, position: "below", resetPosition: !0 } }, computed: { rootProps: function () { return { class: this.baseClass, style: { position: "relative" }, "data-expanded": this.expanded, "data-loading": this.loading, "data-position": this.position } }, inputProps: function () { return a({ class: "".concat(this.baseClass, "-input"), value: this.value, role: "combobox", autocomplete: "off", autocapitalize: "off", autocorrect: "off", spellcheck: "false", "aria-autocomplete": "list", "aria-haspopup": "listbox", "aria-owns": this.resultListId, "aria-expanded": this.expanded ? "true" : "false", "aria-activedescendant": this.selectedIndex > -1 ? this.resultProps[this.selectedIndex].id : "" }, this.$attrs) }, inputListeners: function () { return { input: this.handleInput, keydown: this.core.handleKeyDown, focus: this.core.handleFocus, blur: this.core.handleBlur } }, resultListProps: function () { var t = "below" === this.position ? "top" : "bottom"; return { id: this.resultListId, class: "".concat(this.baseClass, "-result-list"), role: "listbox", style: s({ position: "absolute", zIndex: 1, width: "100%", visibility: this.expanded ? "visible" : "hidden", pointerEvents: this.expanded ? "auto" : "none" }, t, "100%") } }, resultListListeners: function () { return { mousedown: this.core.handleResultMouseDown, click: this.core.handleResultClick } }, resultProps: function () { var t = this; return this.results.map((function (e, i) { return a({ id: "".concat(t.baseClass, "-result-").concat(i), class: "".concat(t.baseClass, "-result"), "data-result-index": i, role: "option" }, t.selectedIndex === i ? { "aria-selected": "true" } : {}) })) } }, mounted: function () { document.body.addEventListener("click", this.handleDocumentClick) }, beforeDestroy: function () { document.body.removeEventListener("click", this.handleDocumentClick) }, updated: function () { var t, e, i, n; this.$refs.input && this.$refs.resultList && (this.resetPosition && this.results.length > 0 && (this.resetPosition = !1, this.position = (t = this.$refs.input, e = this.$refs.resultList, i = t.getBoundingClientRect(), n = e.getBoundingClientRect(), i.bottom + n.height > window.innerHeight && window.innerHeight - i.bottom < i.top && window.pageYOffset + i.top - n.height > 0 ? "above" : "below")), this.core.checkSelectedResultVisible(this.$refs.resultList)) }, methods: { setValue: function (t) { this.value = t ? this.getResultValue(t) : "" }, handleUpdate: function (t, e) { this.results = t, this.selectedIndex = e, this.$emit("update", t, e) }, handleShow: function () { this.expanded = !0 }, handleHide: function () { this.expanded = !1, this.resetPosition = !0 }, handleLoading: function () { this.loading = !0 }, handleLoaded: function () { this.loading = !1 }, handleInput: function (t) { this.value = t.target.value, this.core.handleInput(t) }, handleSubmit: function (t) { this.$emit("submit", t) }, handleDocumentClick: function (t) { this.$refs.root.contains(t.target) || this.core.hideResults() } } }, undefined, !1, undefined, !1, void 0, void 0, void 0); function m(t) { m.installed || (m.installed = !0, t.component("Autocomplete", p)) } var f, v = { install: m }; "undefined" != typeof window ? f = window.Vue : void 0 !== i.g && (f = i.g.Vue), f && f.use(v), p.install = m; const g = p }, 7136: (t, e, i) => { "use strict"; i.d(e, { Z: () => r }); var n = i(4015), s = i.n(n), o = i(3645), a = i.n(o)()(s()); a.push([t.id, ".comment .pagedetail[data-v-fb1c371c]{display:flex;flex-direction:column}", "", { version: 3, sources: ["webpack://./resources/js/Components/IdeaReplies/IdeaReply.vue"], names: [], mappings: "AAsMA,sCAEE,YAAa,CACb,qBAtMF", sourcesContent: ["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.comment {\n\t.pagedetail {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n}\n"], sourceRoot: "" }]); const r = a }, 8063: (t, e, i) => { "use strict"; i.d(e, { Z: () => r }); var n = i(4015), s = i.n(n), o = i(3645), a = i.n(o)()(s()); a.push([t.id, '.no-content[data-v-0257f0e1]{display:flex;align-items:center;white-space:nowrap;gap:10px;color:#c8c8c8;padding:15px 0}.no-content[data-v-0257f0e1]:after,.no-content[data-v-0257f0e1]:before{width:100%;height:1px;background:#c8c8c8;content:" "}', "", { version: 3, sources: ["webpack://./resources/js/Components/NoContent.vue"], names: [], mappings: "AAeA,6BACI,YAAa,CACb,kBAAmB,CACnB,kBAAmB,CACnB,QAAS,CACT,aAAc,CACd,cAdJ,CAQA,uEAgBQ,UAAW,CACX,UAAW,CACX,kBAAmB,CACnB,WAbR", sourcesContent: ['\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.no-content {\n    display: flex;\n    align-items: center;\n    white-space: nowrap;\n    gap: 10px;\n    color: #C8C8C8;\n    padding: 15px 0;\n\n    &::before {\n        width: 100%;\n        height: 1px;\n        background: #c8c8c8;\n        content: " ";\n    }\n\n    &::after {\n        width: 100%;\n        height: 1px;\n        background: #c8c8c8;\n        content: " ";\n    }\n}\n'], sourceRoot: "" }]); const r = a }, 516: (t, e, i) => { "use strict"; i.d(e, { fl: () => Tt }); var n = i(538); function s(t, e, i) { return e in t ? Object.defineProperty(t, e, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = i, t } function o(t, e) { var i = Object.keys(t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(t); e && (n = n.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), i.push.apply(i, n) } return i } function a(t) { for (var e, i = 1; i < arguments.length; i++)e = null == arguments[i] ? {} : arguments[i], i % 2 ? o(Object(e), !0).forEach((function (i) { s(t, i, e[i]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(e)) : o(Object(e)).forEach((function (i) { Object.defineProperty(t, i, Object.getOwnPropertyDescriptor(e, i)) })); return t } function r(t) { return function (t) { if (Array.isArray(t)) return l(t) }(t) || function (t) { if ("undefined" != typeof Symbol && Symbol.iterator in Object(t)) return Array.from(t) }(t) || function (t, e) { if (t) { if ("string" == typeof t) return l(t, e); var i = Object.prototype.toString.call(t).slice(8, -1); return "Object" === i && t.constructor && (i = t.constructor.name), "Map" === i || "Set" === i ? Array.from(t) : "Arguments" === i || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i) ? l(t, e) : void 0 } }(t) || function () { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } function l(t, e) { (null == e || e > t.length) && (e = t.length); for (var i = 0, n = Array(e); i < e; i++)n[i] = t[i]; return n } var c, d, h = (function (t) { !function () { function e() { for (var t, n = [], s = 0; s < arguments.length; s++)if (t = arguments[s]) { var o = typeof t; if ("string" === o || "number" === o) n.push(t); else if (Array.isArray(t) && t.length) { var a = e.apply(null, t); a && n.push(a) } else if ("object" === o) for (var r in t) i.call(t, r) && t[r] && n.push(r) } return n.join(" ") } var i = {}.hasOwnProperty; t.exports ? (e.default = e, t.exports = e) : window.classNames = e }() }(d = { path: c, exports: {}, require: function (t, e) { return function () { throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs") }(null == e && d.path) } }, d.exports), d.exports), u = function (t) { return function (e, i) { if (!e) return t; var n; "string" == typeof e ? n = e : i = e; var s = t; return n && (s += "__" + n), s + (i ? Object.keys(i).reduce((function (t, e) { var n = i[e]; return n && (t += " " + ("boolean" == typeof n ? s + "--" + e : s + "--" + e + "_" + n)), t }), "") : "") } }; function p(t, e, i) { function n() { var c = Date.now() - r; c < e && 0 <= c ? s = setTimeout(n, e - c) : (s = null, !i && (l = t.apply(a, o), a = o = null)) } var s, o, a, r, l; null == e && (e = 100); var c = function () { a = this, o = arguments, r = Date.now(); var c = i && !s; return s || (s = setTimeout(n, e)), c && (l = t.apply(a, o), a = o = null), l }; return c.clear = function () { s && (clearTimeout(s), s = null) }, c.flush = function () { s && (l = t.apply(a, o), a = o = null, clearTimeout(s), s = null) }, c } p.debounce = p; var m = p, f = function () { return (f = Object.assign || function (t) { for (var e, i = 1, n = arguments.length; i < n; i++)for (var s in e = arguments[i]) Object.prototype.hasOwnProperty.call(e, s) && (t[s] = e[s]); return t }).apply(this, arguments) }, v = function (t, e) { void 0 === t && (t = {}), void 0 === e && (e = {}), this.type = "manipulateImage", this.move = t, this.scale = e }, g = function (t, e) { void 0 === e && (e = {}), this.type = "resize", this.directions = t, this.params = e }, b = function (t) { this.type = "move", this.directions = t }, w = function () { function t(t, e, i, n, s) { this.type = "drag", this.nativeEvent = t, this.position = i, this.previousPosition = n, this.element = e, this.anchor = s } return t.prototype.shift = function () { var t = this, e = t.element, i = t.anchor, n = t.position, s = e.getBoundingClientRect(), o = s.left, a = s.top; return { left: n.left - o - i.left, top: n.top - a - i.top } }, t }(), y = ["left", "right", "top", "bottom"], _ = ["left", "right"], x = ["top", "bottom"], C = ["left", "top"], R = ["area", "stencil", "none"], k = { left: 0, top: 0, width: 0, height: 0 }; function S(t) { return { left: t.left, top: t.top, right: t.left + t.width, bottom: t.top + t.height } } function $(t) { return { left: t.left + t.width / 2, top: t.top + t.height / 2 } } function A(t, e) { var i = Math.max, n = { left: 0, top: 0, right: 0, bottom: 0 }; return y.forEach((function (s) { var o = e[s], a = S(t)[s]; n[s] = void 0 !== o && void 0 !== a ? i(0, "left" === s || "top" === s ? o - a : a - o) : 0 })), n } function z(t, e) { return { left: t.left - e.left, top: t.top - e.top, width: t.width + e.left + e.right, height: t.height + e.top + e.bottom } } function M(t) { return { left: -t.left, top: -t.top } } function P(t, e) { return f(f({}, t), { left: t.left + e.left, top: t.top + e.top }) } function E(t, e, i, n) { if (i) { var s = $(t); return { width: t.width * e, height: t.height * e, left: t.left + t.width * (1 - e) / 2 + (i.left - s.left) * (n || 1 - e), top: t.top + t.height * (1 - e) / 2 + (i.top - s.top) * (n || 1 - e) } } return { width: t.width * e, height: t.height * e, left: t.left + t.width * (1 - e) / 2, top: t.top + t.height * (1 - e) / 2 } } function O(t) { return t.width / t.height } function L(t, e) { return Math.min(void 0 !== e.right && void 0 !== e.left ? (e.right - e.left) / t.width : 1 / 0, void 0 !== e.bottom && void 0 !== e.top ? (e.bottom - e.top) / t.height : 1 / 0) } function I(t, e) { var i = { left: 0, top: 0 }, n = A(t, e); return n.left && 0 < n.left ? i.left = n.left : n.right && 0 < n.right && (i.left = -n.right), n.top && 0 < n.top ? i.top = n.top : n.bottom && 0 < n.bottom && (i.top = -n.bottom), i } function T(t, e) { var i; return e.minimum && t < e.minimum ? i = e.minimum : e.maximum && t > e.maximum && (i = e.maximum), i } function D(t, e) { var i = O(t), n = O(e); return e.width < 1 / 0 && e.height < 1 / 0 ? i > n ? { width: e.width, height: e.width / i } : { width: e.height * i, height: e.height } : e.width < 1 / 0 ? { width: e.width, height: e.width / i } : e.height < 1 / 0 ? { width: e.height * i, height: e.height } : t } function j(t, e) { return P(t, I(t, e)) } function B(t, e) { var i = Math.min; return f(f({}, t), { minWidth: i(e.width, t.minWidth), minHeight: i(e.height, t.minHeight), maxWidth: i(e.width, t.maxWidth), maxHeight: i(e.height, t.maxHeight) }) } function H(t, e, i) { var n = Math.min, s = Math.max; void 0 === i && (i = !0); var o = {}; return y.forEach((function (a) { var r = t[a], l = e[a]; void 0 !== r && void 0 !== l ? o[a] = "left" === a || "top" === a ? i ? s(r, l) : n(r, l) : i ? n(r, l) : s(r, l) : void 0 === l ? void 0 !== r && (o[a] = r) : o[a] = l })), o } function W(t, e) { return H(t, e, !0) } function F(t) { var e = t.size, i = t.aspectRatio, n = t.ignoreMinimum, s = t.sizeRestrictions; return !!((e.correctRatio || O(e) >= i.minimum && O(e) <= i.maximum) && e.height <= s.maxHeight && e.width <= s.maxWidth && e.width && e.height && (n || e.height >= s.minHeight && e.width >= s.minWidth)) } function U(t, e) { var i = Math.pow; return i(t.width - e.width, 2) + i(t.height - e.height, 2) } function N(t) { var e = Math.min, i = Math.max; function n(t, e) { return void 0 === e && (e = !1), t.reduce((function (t, i) { return F({ size: i, aspectRatio: r, sizeRestrictions: a, ignoreMinimum: e }) && (!t || U(i, { width: s, height: o }) < U(t, { width: s, height: o })) ? i : t }), null) } var s = t.width, o = t.height, a = t.sizeRestrictions, r = { minimum: t.aspectRatio && t.aspectRatio.minimum || 0, maximum: t.aspectRatio && t.aspectRatio.maximum || 1 / 0 }, l = { width: i(a.minWidth, e(a.maxWidth, s)), height: i(a.minHeight, e(a.maxHeight, o)) }, c = []; r && [r.minimum, r.maximum].forEach((function (t) { t && c.push({ width: l.width, height: l.width / t, correctRatio: !0 }, { width: l.height * t, height: l.height, correctRatio: !0 }) })), F({ size: l, aspectRatio: r, sizeRestrictions: a }) && c.push(l); var d = n(c) || n(c, !0); return d && { width: d.width, height: d.height } } function Z(t, e) { var i, n; return t && e ? (i = "" + t + e[0].toUpperCase() + e.slice(1), n = t + "-" + e) : (i = t || e, n = t || e), { name: i, classname: n } } function Y(t) { return /^data:/.test(t) || /^blob:/.test(t) } function X(t) { return !!(t && t.constructor && t.call && t.apply) } function V(t) { return void 0 === t } function q(t, e) { var i = f({ enabled: !!t }, e); return function (t) { return "object" == typeof t && null !== t }(t) && (i = f(f({}, i), t)), i } function K(t) { var e = +t; return (0, Number.isNaN)(e) ? t : e } function G(t, e, i) { return Q(t), !0 } function Q(t) { return (!t || 0 === Object.keys(t).length) && "function" != typeof t } function J(t, e) { var i = Math.pow; return Math.sqrt(i(t.x - e.x, 2) + i(t.y - e.y, 2)) } function tt(t) { var e = t.event, i = t.coordinates, n = t.positionRestrictions, s = void 0 === n ? {} : n, o = P(i, e.directions); return P(o, I(o, s)) } function et(t) { var e = t.coordinates, i = t.transform, n = t.imageSize, s = t.sizeRestrictions, o = t.positionRestrictions, a = t.aspectRatio, r = function (t, e) { return tt({ coordinates: t, positionRestrictions: o, event: new b({ left: e.left - t.left, top: e.top - t.top }) }) }, l = f({}, e); return (Array.isArray(i) ? i : [i]).forEach((function (t) { var e; V((e = "function" == typeof t ? t(f({}, l), n) : t).width) && V(e.height) || (l = function (t, e) { var i = f(f(f({}, t), N({ width: e.width, height: e.height, sizeRestrictions: s, aspectRatio: a })), { left: 0, top: 0 }); return r(i, { left: t.left, top: t.top }) }(l, f(f({}, l), e))), V(e.left) && V(e.top) || (l = r(l, f(f({}, l), e))) })), l } function it(t) { var e = t.cropper, i = t.imageSize, n = e.clientHeight, s = e.clientWidth, o = n, a = i.width * n / i.height; return a > s && (a = s, o = i.height * s / i.width), { width: a, height: o } } function nt(t, e) { return H(t, S(e)) } function st(t) { var e = Math.abs, i = Math.pow, n = Math.min, s = Math.max, o = t.event, a = t.coordinates, r = t.visibleArea, l = t.sizeRestrictions, c = t.areaRestrictions, d = t.positionRestrictions, h = t.settings, u = void 0 === h ? {} : h, p = o.scale, m = o.move, v = f({}, r), g = f({}, a), b = 1, w = 1, y = p.factor && .001 < e(p.factor - 1); v = P(v, { left: m.left || 0, top: m.top || 0 }); var _ = { stencil: { minimum: s(l.minWidth ? l.minWidth / g.width : 0, l.minHeight ? l.minHeight / g.height : 0), maximum: n(l.maxWidth ? l.maxWidth / g.width : 1 / 0, l.maxHeight ? l.maxHeight / g.height : 1 / 0, L(g, d)) }, area: { maximum: L(v, c) } }; p.factor && y && (1 > p.factor ? 1 < (w = s(p.factor, _.stencil.minimum)) && (w = 1) : 1 < p.factor && (1 > (w = n(p.factor, n(_.area.maximum, _.stencil.maximum))) && (w = 1))), w && (v = E(v, w, p.center)); var x = a.left - r.left, C = r.width + r.left - (a.width + a.left), R = a.top - r.top, k = r.height + r.top - (a.height + a.top); return v = P(v, I(v, c)), v = P(v, I(v, { left: void 0 === d.left ? void 0 : d.left - x * w, top: void 0 === d.top ? void 0 : d.top - R * w, bottom: void 0 === d.bottom ? void 0 : d.bottom + k * w, right: void 0 === d.right ? void 0 : d.right + C * w })), g.width *= w, g.height *= w, g.left = v.left + x * w, g.top = v.top + R * w, p.factor && y && u.stencil && (1 < p.factor ? b = n(_.area.maximum, p.factor) / w : 1 > p.factor && (b = s(g.height / v.height, p.factor) / w), v = P(v = E(v, b, $(g), i(1 < p.factor ? _.area.maximum : g.height / v.height, 2)), I(v, c))), { coordinates: g, visibleArea: v } } function ot(t) { var e = Math.min, i = Math.max, n = t.directions, s = t.coordinates, o = t.positionRestrictions, a = void 0 === o ? {} : o, r = t.sizeRestrictions, l = t.preserveRatio, c = t.compensate, d = f({}, n), h = z(s, d).width, u = z(s, d).height; 0 > h && (0 > d.left && 0 > d.right ? (d.left = -(s.width - r.minWidth) / (d.left / d.right), d.right = -(s.width - r.minWidth) / (d.right / d.left)) : 0 > d.left ? d.left = -(s.width - r.minWidth) : 0 > d.right && (d.right = -(s.width - r.minWidth))), 0 > u && (0 > d.top && 0 > d.bottom ? (d.top = -(s.height - r.minHeight) / (d.top / d.bottom), d.bottom = -(s.height - r.minHeight) / (d.bottom / d.top)) : 0 > d.top ? d.top = -(s.height - r.minHeight) : 0 > d.bottom && (d.bottom = -(s.height - r.minHeight))); var p = A(z(s, d), a); c && (p.left && 0 < p.left && 0 === p.right ? (d.right += p.left, d.left -= p.left) : p.right && 0 < p.right && 0 === p.left && (d.left += p.right, d.right -= p.right), p.top && 0 < p.top && 0 === p.bottom ? (d.bottom += p.top, d.top -= p.top) : p.bottom && 0 < p.bottom && 0 === p.top && (d.top += p.bottom, d.bottom -= p.bottom), p = A(z(s, d), a)); var m = { width: 1 / 0, height: 1 / 0, left: 1 / 0, right: 1 / 0, top: 1 / 0, bottom: 1 / 0 }; if (y.forEach((function (t) { var e = p[t]; e && d[t] && (m[t] = i(0, 1 - e / d[t])) })), l) { var v = e.apply(Math, y.map((function (t) { return m[t] }))); v !== 1 / 0 && y.forEach((function (t) { d[t] *= v })) } else y.forEach((function (t) { m[t] !== 1 / 0 && (d[t] *= m[t]) })); if (h = z(s, d).width, u = z(s, d).height, d.right + d.left && (h > r.maxWidth ? m.width = (r.maxWidth - s.width) / (d.right + d.left) : h < r.minWidth && (m.width = (r.minWidth - s.width) / (d.right + d.left))), d.bottom + d.top && (u > r.maxHeight ? m.height = (r.maxHeight - s.height) / (d.bottom + d.top) : u < r.minHeight && (m.height = (r.minHeight - s.height) / (d.bottom + d.top))), l) { var g = e(m.width, m.height); g !== 1 / 0 && y.forEach((function (t) { d[t] *= g })) } else m.width !== 1 / 0 && _.forEach((function (t) { d[t] *= m.width })), m.height !== 1 / 0 && x.forEach((function (t) { d[t] *= m.height })); return d } function at(t, e, i, n, s, o, a, r, l, c) { "boolean" != typeof a && (l = r, r = a, a = !1); const d = "function" == typeof i ? i.options : i; let h; if (t && t.render && (d.render = t.render, d.staticRenderFns = t.staticRenderFns, d._compiled = !0, s && (d.functional = !0)), n && (d._scopeId = n), o ? (h = function (t) { (t = t || this.$vnode && this.$vnode.ssrContext || this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) || "undefined" == typeof __VUE_SSR_CONTEXT__ || (t = __VUE_SSR_CONTEXT__), e && e.call(this, l(t)), t && t._registeredComponents && t._registeredComponents.add(o) }, d._ssrRegister = h) : e && (h = a ? function (t) { e.call(this, c(t, this.$root.$options.shadowRoot)) } : function (t) { e.call(this, r(t)) }), h) if (d.functional) { const t = d.render; d.render = function (e, i) { return h.call(i), t(e, i) } } else { const t = d.beforeCreate; d.beforeCreate = t ? [].concat(t, h) : [h] } return i } var rt = at({ render: function () { var t = this, e = t.$createElement; return (t._self._c || e)("div", { ref: "draggable", class: t.classname, on: { touchstart: t.onTouchStart, mousedown: t.onMouseDown, mouseover: t.onMouseOver, mouseleave: t.onMouseLeave } }, [t._t("default")], 2) }, staticRenderFns: [] }, void 0, { name: "DraggableElement", mixins: [{ beforeMount: function () { window.addEventListener("mouseup", this.onMouseUp, { passive: !1 }), window.addEventListener("mousemove", this.onMouseMove, { passive: !1 }), window.addEventListener("touchmove", this.onTouchMove, { passive: !1 }), window.addEventListener("touchend", this.onTouchEnd, { passive: !1 }) }, beforeDestroy: function () { window.removeEventListener("mouseup", this.onMouseUp), window.removeEventListener("mousemove", this.onMouseMove), window.removeEventListener("touchmove", this.onTouchMove), window.removeEventListener("touchend", this.onTouchEnd) }, mounted: function () { if (!this.$refs.draggable) throw new Error('You should add ref "draggable" to your root element to use draggable mixin'); this.touches = [], this.hovered = !1 }, methods: { onMouseOver: function () { this.hovered || (this.hovered = !0, this.$emit("enter")) }, onMouseLeave: function () { this.hovered && !this.touches.length && (this.hovered = !1, this.$emit("leave")) }, onTouchStart: function (t) { t.cancelable && !this.disabled && 1 === t.touches.length && (this.touches = r(t.touches), !this.hovered && (this.$emit("enter"), this.hovered = !0), t.touches.length && this.initAnchor(this.touches.reduce((function (e, i) { return { clientX: e.clientX + i.clientX / t.touches.length, clientY: e.clientY + i.clientY / t.touches.length } }), { clientX: 0, clientY: 0 })), t.preventDefault && t.preventDefault(), t.stopPropagation()) }, onTouchEnd: function () { this.processEnd() }, onTouchMove: function (t) { this.touches.length && (this.processMove(t, t.touches), t.preventDefault && t.preventDefault(), t.stopPropagation && t.stopPropagation()) }, onMouseDown: function (t) { if (!this.disabled) { var e = { fake: !0, clientX: t.clientX, clientY: t.clientY }; this.touches = [e], this.initAnchor(e), t.stopPropagation() } }, onMouseMove: function (t) { this.touches.length && (this.processMove(t, [{ fake: !0, clientX: t.clientX, clientY: t.clientY }]), t.preventDefault && t.preventDefault()) }, onMouseUp: function () { this.processEnd() }, initAnchor: function (t) { var e = this.$refs.draggable.getBoundingClientRect(), i = e.left, n = e.right, s = e.bottom, o = e.top; this.anchor = { left: t.clientX - i, top: t.clientY - o, bottom: s - t.clientY, right: n - t.clientX } }, processMove: function (t, e) { var i = r(e); if (this.touches.length) { if (1 === this.touches.length && 1 === i.length) { var n = this.$refs.draggable; this.$emit("drag", new w(t, n, { left: i[0].clientX, top: i[0].clientY }, { left: this.touches[0].clientX, top: this.touches[0].clientY }, this.anchor)) } this.touches = i } }, processEnd: function () { this.touches = [], this.hovered && (this.$emit("leave"), this.hovered = !1) } } }], props: { classname: { type: String } } }, void 0, !1, void 0, !1, void 0, void 0, void 0), lt = u("vue-handler-wrapper"), ct = at({ render: function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { class: t.classes.root }, [i("DraggableElement", { class: t.classes.draggable, attrs: { disabled: t.disabled }, on: { drag: function (e) { return t.$emit("drag", e) }, leave: function () { return t.$emit("leave") }, enter: function () { return t.$emit("enter") } } }, [t._t("default")], 2)], 1) }, staticRenderFns: [] }, void 0, { name: "HandlerWrapper", components: { DraggableElement: rt }, props: { horizontalPosition: { type: String }, verticalPosition: { type: String }, disabled: { type: Boolean, default: !1 }, classname: { type: String, validator: function (t) { return G(t) } } }, computed: { classes: function () { var t; if (this.horizontalPosition || this.verticalPosition) { var e, i = Z(this.horizontalPosition, this.verticalPosition); t = h(this.classname, lt((s(e = {}, i.classname, !0), s(e, "disabled", this.disabled), e))) } else t = h(this.classname, lt({ disabled: this.disabled })); return { root: t, draggable: lt("draggable") } } } }, void 0, !1, void 0, !1, void 0, void 0, void 0), dt = u("vue-line-wrapper"), ht = at({ render: function () { var t = this, e = t.$createElement; return (t._self._c || e)("DraggableElement", { class: t.classname, attrs: { disabled: t.disabled }, on: { drag: function (e) { return t.$emit("drag", e) }, leave: function () { return t.$emit("leave") }, enter: function () { return t.$emit("enter") } } }, [t._t("default")], 2) }, staticRenderFns: [] }, void 0, { name: "LineWrapper", components: { DraggableElement: rt }, props: { position: { type: String, required: !0 }, disabled: { type: Boolean, default: !1 } }, computed: { classname: function () { var t; return dt((s(t = {}, this.position, !0), s(t, "disabled", this.disabled), t)) } } }, void 0, !1, void 0, !1, void 0, void 0, void 0), ut = u("vue-simple-handler"), pt = at({ render: function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("HandlerWrapper", { attrs: { "vertical-position": t.verticalPosition, "horizontal-position": t.horizontalPosition, disabled: t.disabled }, on: { drag: t.onDrag, enter: t.onEnter, leave: t.onLeave } }, [i("div", { class: t.classnames.default })]) }, staticRenderFns: [] }, void 0, { name: "SimpleHandler", components: { HandlerWrapper: ct }, props: { classname: { type: String }, hoverClassname: { type: String }, horizontalPosition: { type: String }, verticalPosition: { type: String }, disabled: { type: Boolean, default: !1 } }, data: function () { return { hover: !1 } }, computed: { classnames: function () { var t; return { default: h(ut((t = {}, s(t, this.horizontalPosition, !!this.horizontalPosition), s(t, this.verticalPosition, !!this.verticalPosition), s(t, "".concat(this.horizontalPosition, "-").concat(this.verticalPosition), !(!this.verticalPosition || !this.horizontalPosition)), s(t, "hover", this.hover), t)), this.classname, this.hover && this.hoverClassname) } } }, methods: { onDrag: function (t) { this.$emit("drag", t) }, onEnter: function () { this.hover = !0 }, onLeave: function () { this.hover = !1 } } }, void 0, !1, void 0, !1, void 0, void 0, void 0), mt = u("vue-simple-line"), ft = at({ render: function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("LineWrapper", { attrs: { position: t.position, disabled: t.disabled }, on: { enter: t.onEnter, leave: t.onLeave, drag: t.onDrag } }, [i("div", { class: t.classes.root })]) }, staticRenderFns: [] }, void 0, { name: "SimpleLine", components: { LineWrapper: ht }, props: { classname: { type: String }, hoverClassname: { type: String }, position: { type: String }, disabled: { type: Boolean, default: !1 } }, data: function () { return { hover: !1 } }, computed: { classes: function () { return { root: h(mt(s({}, this.position, !0)), this.classname, this.hover && this.hoverClassname) } } }, methods: { onDrag: function (t) { this.$emit("drag", t) }, onEnter: function () { this.hover = !0 }, onLeave: function () { this.hover = !1 } } }, void 0, !1, void 0, !1, void 0, void 0, void 0), vt = u("vue-bounding-box"), gt = ["east", "west", null], bt = ["south", "north", null], wt = at({ render: function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { ref: "box", class: t.classes.root }, [t._t("default"), t._v(" "), i("div", t._l(t.lineNodes, (function (e) { return i(e.component, { key: e.name, tag: "component", attrs: { classname: e.class, "hover-classname": e.hoverClass, position: e.name, disabled: e.disabled }, on: { drag: function (i) { return t.onHandlerDrag(i, e.horizontalDirection, e.verticalDirection) } } }) })), 1), t._v(" "), i("div", t._l(t.handlerNodes, (function (e) { return i(e.component, { key: e.name, tag: "component", attrs: { classname: e.class, "hover-classname": e.hoverClass, "horizontal-position": e.horizontalDirection, "vertical-position": e.verticalDirection, disabled: e.disabled }, on: { drag: function (i) { return t.onHandlerDrag(i, e.horizontalDirection, e.verticalDirection) } } }) })), 1)], 2) }, staticRenderFns: [] }, void 0, { name: "BoundingBox", props: { handlers: { type: Object, default: function () { return { eastNorth: !0, north: !0, westNorth: !0, west: !0, westSouth: !0, south: !0, eastSouth: !0, east: !0 } } }, handlerComponent: { type: [Object, String], default: function () { return pt } }, handlersClasses: { type: Object, default: function () { return {} } }, lines: { type: Object, default: function () { return { west: !0, north: !0, east: !0, south: !0 } } }, lineComponent: { type: [Object, String], default: function () { return ft } }, linesClasses: { type: Object, default: function () { return {} } }, scalable: { type: Boolean, default: !0 }, classname: { type: String, validator: function (t) { return G(t) } }, linesClassnames: { type: Object, default: function () { return {} }, validator: function (t) { return G(t) } }, handlersClassnames: { type: Object, default: function () { return {} }, validator: function (t) { return G(t) } } }, data: function () { var t = []; return gt.forEach((function (e) { bt.forEach((function (i) { if (e !== i) { var n = Z(e, i), s = n.name, o = n.classname; t.push({ name: s, classname: o, verticalDirection: i, horizontalDirection: e }) } })) })), { points: t } }, computed: { classes: function () { var t = Q(this.handlersClasses) ? this.handlersClassnames : this.handlersClasses, e = Q(this.linesClasses) ? this.linesClassnames : this.linesClasses; return { root: h(vt(), this.classname), handlers: t, lines: e } }, lineNodes: function () { var t = this, e = []; return this.points.forEach((function (i) { i.horizontalDirection && i.verticalDirection || !t.lines[i.name] || e.push({ name: i.name, component: t.lineComponent, class: h(t.classes.lines.default, t.classes.lines[i.name], !t.scalable && t.classes.lines.disabled), hoverClass: t.classes.lines.hover, verticalDirection: i.verticalDirection, horizontalDirection: i.horizontalDirection, disabled: !t.scalable }) })), e }, handlerNodes: function () { var t = this, e = []; return this.points.forEach((function (i) { t.handlers[i.name] && e.push({ name: i.name, component: t.handlerComponent, class: h(t.classes.handlers.default, t.classes.handlers[i.name]), hoverClass: t.classes.handlers.hover, verticalDirection: i.verticalDirection, horizontalDirection: i.horizontalDirection, disabled: !t.scalable }) })), e } }, beforeMount: function () { window.addEventListener("mouseup", this.onMouseUp, { passive: !1 }), window.addEventListener("mousemove", this.onMouseMove, { passive: !1 }), window.addEventListener("touchmove", this.onTouchMove, { passive: !1 }), window.addEventListener("touchend", this.onTouchEnd, { passive: !1 }) }, beforeDestroy: function () { window.removeEventListener("mouseup", this.onMouseUp), window.removeEventListener("mousemove", this.onMouseMove), window.removeEventListener("touchmove", this.onTouchMove), window.removeEventListener("touchend", this.onTouchEnd) }, mounted: function () { this.touches = [] }, methods: { onHandlerDrag: function (t, e, i) { var n, s = t.shift(), o = s.left, a = s.top, r = { left: 0, right: 0, top: 0, bottom: 0 }; "west" === e ? r.left -= o : "east" == e && (r.right += o), "north" === i ? r.top -= a : "south" == i && (r.bottom += a), !i && e ? n = "width" : i && !e && (n = "height"), this.scalable && this.$emit("resize", new g(r, { allowedDirections: { left: "west" === e || !e, right: "east" === e || !e, bottom: "south" === i || !i, top: "north" === i || !i }, preserveAspectRatio: t.nativeEvent && t.nativeEvent.shiftKey, respectDirection: n })) } } }, void 0, !1, void 0, !1, void 0, void 0, void 0), yt = function (t, e) { void 0 === t && (t = {}), void 0 === e && (e = {}), this.type = "manipulateImage", this.move = t, this.scale = e }, _t = function (t) { this.type = "move", this.directions = t }, xt = u("vue-draggable-area"), Ct = at({ render: function () { var t = this, e = t.$createElement; return (t._self._c || e)("div", { ref: "container", on: { touchstart: t.onTouchStart, mousedown: t.onMouseDown } }, [t._t("default")], 2) }, staticRenderFns: [] }, void 0, { name: "DraggableArea", props: { movable: { type: Boolean, default: !0 }, activationDistance: { type: Number, default: 20 } }, computed: { classnames: function () { return { default: h(xt(), this.classname) } } }, beforeMount: function () { window.addEventListener("mouseup", this.onMouseUp, { passive: !1 }), window.addEventListener("mousemove", this.onMouseMove, { passive: !1 }), window.addEventListener("touchmove", this.onTouchMove, { passive: !1 }), window.addEventListener("touchend", this.onTouchEnd, { passive: !1 }) }, beforeDestroy: function () { window.removeEventListener("mouseup", this.onMouseUp), window.removeEventListener("mousemove", this.onMouseMove), window.removeEventListener("touchmove", this.onTouchMove), window.removeEventListener("touchend", this.onTouchEnd) }, mounted: function () { this.touches = [], this.touchStarted = !1 }, methods: { onTouchStart: function (t) { if (t.cancelable) { var e = this.movable && 1 === t.touches.length; e && (this.touches = r(t.touches)), (this.touchStarted || e) && (t.preventDefault(), t.stopPropagation()) } }, onTouchEnd: function () { this.touchStarted = !1, this.processEnd() }, onTouchMove: function (t) { 1 <= this.touches.length && (this.touchStarted ? (this.processMove(t, t.touches), t.preventDefault(), t.stopPropagation()) : J({ x: this.touches[0].clientX, y: this.touches[0].clientY }, { x: t.touches[0].clientX, y: t.touches[0].clientY }) > this.activationDistance && (this.initAnchor({ clientX: t.touches[0].clientX, clientY: t.touches[0].clientY }), this.touchStarted = !0)) }, onMouseDown: function (t) { if (this.movable) { var e = { fake: !0, clientX: t.clientX, clientY: t.clientY }; this.touches = [e], this.initAnchor(e), t.stopPropagation() } }, onMouseMove: function (t) { this.touches.length && (this.processMove(t, [{ fake: !0, clientX: t.clientX, clientY: t.clientY }]), t.preventDefault && t.cancelable && t.preventDefault(), t.stopPropagation()) }, onMouseUp: function () { this.touches = [] }, initAnchor: function (t) { var e = this.$refs.container.getBoundingClientRect(), i = e.left, n = e.top; this.anchor = { x: t.clientX - i, y: t.clientY - n } }, processMove: function (t, e) { var i = r(e); if (this.touches.length) { var n = this.$refs.container.getBoundingClientRect(), s = n.left, o = n.top; 1 === this.touches.length && 1 === i.length && this.$emit("move", new _t({ left: i[0].clientX - (s + this.anchor.x), top: i[0].clientY - (o + this.anchor.y) })) } }, processEnd: function () { this.touches = [] } } }, void 0, !1, void 0, !1, void 0, void 0, void 0); function Rt(t) { return new Promise((function (e, i) { try { if (t) if (/^data:/i.test(t)) e(function (t) { t = t.replace(/^data:([^;]+);base64,/gim, ""); for (var e = atob(t), i = e.length, n = new ArrayBuffer(i), s = new Uint8Array(n), o = 0; o < i; o++)s[o] = e.charCodeAt(o); return n }(t)); else if (/^blob:/i.test(t)) { var n = new FileReader; n.onload = function (t) { e(t.target.result) }, function (t, e) { var i = new XMLHttpRequest; i.open("GET", t, !0), i.responseType = "blob", i.onload = function () { (200 == this.status || 0 === this.status) && e(this.response) }, i.send() }(t, (function (t) { n.readAsArrayBuffer(t) })) } else { var s = new XMLHttpRequest; s.onreadystatechange = function () { 4 !== s.readyState || (200 === s.status || 0 === s.status ? e(s.response) : i("Warning: could not load an image to parse its orientation"), s = null) }, s.onprogress = function () { "image/jpeg" !== s.getResponseHeader("content-type") && s.abort() }, s.withCredentials = !1, s.open("GET", t, !0), s.responseType = "arraybuffer", s.send(null) } else i("Error: the image is empty") } catch (e) { i(e) } })) } function kt(t) { var e = t.rotate, i = t.scaleX, n = t.scaleY, s = ""; return (e || i || n) && (e && (s += " rotate(" + e + "deg) "), i && (s += " scaleX(" + i + ") "), n && (s += " scaleY(" + n + ") ")), s } function St(t) { try { var e, i = new DataView(t), n = void 0, s = void 0, o = void 0, a = void 0; if (255 === i.getUint8(0) && 216 === i.getUint8(1)) for (var r = i.byteLength, l = 2; l + 1 < r;) { if (255 === i.getUint8(l) && 225 === i.getUint8(l + 1)) { o = l; break } l++ } if (o && (n = o + 10, "Exif" === function (t, e, i) { var n, s = ""; for (n = e, i += e; n < i; n++)s += String.fromCharCode(t.getUint8(n)); return s }(i, o + 4, 4))) { var c = i.getUint16(n); if (((s = 18761 === c) || 19789 === c) && 42 === i.getUint16(n + 2, s)) { var d = i.getUint32(n + 4, s); 8 <= d && (a = n + d) } } if (a) for (var h = i.getUint16(a, s), u = 0; u < h; u++)if (l = a + 12 * u + 2, 274 === i.getUint16(l, s)) { l += 8, e = i.getUint16(l, s), i.setUint16(l, 1, s); break } return e } catch (t) { return null } } var $t = u("vue-preview-result"), At = at({ render: function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { class: t.classes.root }, [i("div", { ref: "wrapper", class: t.classes.wrapper, style: t.wrapperStyle }, [i("img", { ref: "image", class: t.classes.image, style: t.imageStyle, attrs: { src: t.img.src } })])]) }, staticRenderFns: [] }, void 0, { name: "PreviewResult", props: { img: { type: Object }, stencilCoordinates: { type: Object, default: function () { return { width: 0, height: 0, left: 0, top: 0 } } }, imageClass: { type: String }, classname: { type: String, validator: function (t) { return G(t) } }, imageClassname: { type: String, validator: function (t) { return G(t) } } }, computed: { classes: function () { return { root: h($t(), this.classname), image: h($t("image"), this.imageClass || this.imageClassname), wrapper: $t("wrapper") } }, wrapperStyle: function () { return { width: "".concat(this.stencilCoordinates.width, "px"), height: "".concat(this.stencilCoordinates.height, "px"), left: "calc(50% - ".concat(this.stencilCoordinates.width / 2, "px)"), top: "calc(50% - ".concat(this.stencilCoordinates.height / 2, "px)") } }, imageStyle: function () { var t = this.img.transforms, e = t.flipped, i = this.img.coefficient, n = this.img.size.height / i, s = this.img.size.width / i, o = { width: "".concat(s, "px"), height: "".concat(n, "px") }; return e ? (o.width = "".concat(n, "px"), o.height = "".concat(s, "px"), o.left = "".concat(-this.stencilCoordinates.left - t.translateX - (n - s) / 2, "px"), o.top = "".concat(-this.stencilCoordinates.top - t.translateY - (s - n) / 2, "px")) : (o.left = "".concat(-this.stencilCoordinates.left - t.translateX, "px"), o.top = "".concat(-this.stencilCoordinates.top - t.translateY, "px")), o.transform = kt(t), o } } }, void 0, !1, void 0, !1, void 0, void 0, void 0); function zt(t, e) { var i = e.getBoundingClientRect(), n = i.left, s = i.top, o = { left: 0, top: 0 }, a = 0; return t.forEach((function (e) { o.left += (e.clientX - n) / t.length, o.top += (e.clientY - s) / t.length })), t.forEach((function (t) { a += J({ x: o.left, y: o.top }, { x: t.clientX - n, y: t.clientY - s }) })), { centerMass: o, spread: a, count: t.length } } var Mt = at({ render: function () { var t = this, e = t.$createElement; return (t._self._c || e)("div", { ref: "container", on: { touchstart: t.onTouchStart, mousedown: t.onMouseDown, wheel: t.onWheel } }, [t._t("default")], 2) }, staticRenderFns: [] }, void 0, { name: "CropperWrapper", props: { touchMove: { type: Object, required: !0 }, mouseMove: { type: Object, required: !0 }, touchResize: { type: Object, required: !0 }, wheelResize: { type: Object, required: !0 } }, beforeMount: function () { window.addEventListener("mouseup", this.onMouseUp, { passive: !1 }), window.addEventListener("mousemove", this.onMouseMove, { passive: !1 }), window.addEventListener("touchmove", this.onTouchMove, { passive: !1 }), window.addEventListener("touchend", this.onTouchEnd, { passive: !1 }) }, beforeDestroy: function () { window.removeEventListener("mouseup", this.onMouseUp), window.removeEventListener("mousemove", this.onMouseMove), window.removeEventListener("touchmove", this.onTouchMove), window.removeEventListener("touchend", this.onTouchEnd) }, mounted: function () { this.touches = [] }, methods: { onTouchStart: function (t) { if (t.cancelable && (this.touchMove.enabled || this.touchResize.enabled && 1 < t.touches.length)) { var e = this.$refs.container, i = e.getBoundingClientRect(), n = i.left, s = i.top, o = i.bottom, a = i.right; this.touches = r(t.touches).filter((function (t) { return t.clientX > n && t.clientX < a && t.clientY > s && t.clientY < o })), this.oldGeometricProperties = zt(this.touches, e), t.preventDefault && t.preventDefault(), t.stopPropagation() } }, onTouchEnd: function (t) { 0 === t.touches.length && this.processEnd() }, onTouchMove: function (t) { var e = this; if (this.touches.length) { var i = r(t.touches).filter((function (t) { return !t.identifier || e.touches.find((function (e) { return e.identifier === t.identifier })) })); this.processMove(t, i), t.preventDefault && t.preventDefault(), t.stopPropagation && t.stopPropagation() } }, onMouseDown: function (t) { if (this.mouseMove && "buttons" in t && 1 === t.buttons) { var e = { fake: !0, clientX: t.clientX, clientY: t.clientY }; this.touches = [e], t.stopPropagation() } }, onMouseMove: function (t) { this.touches.length && (this.processMove(t, [{ fake: !0, clientX: t.clientX, clientY: t.clientY }]), t.preventDefault && t.cancelable && t.preventDefault()) }, onMouseUp: function () { this.touches = [] }, processMove: function (t, e) { if (this.touches.length) { if (1 === this.touches.length && 1 === e.length && this.touchMove.enabled) this.$emit("move", new yt({ left: this.touches[0].clientX - e[0].clientX, top: this.touches[0].clientY - e[0].clientY })); else if (1 < this.touches.length && this.touchResize) { var i = zt(e, this.$refs.container), n = this.oldGeometricProperties; n.count === i.count && 1 < n.count && this.$emit("resize", new yt({ left: n.centerMass.left - i.centerMass.left, top: n.centerMass.top - i.centerMass.top }, { factor: n.spread / i.spread, center: i.centerMass })), this.oldGeometricProperties = i } this.touches = e } }, processEnd: function () { this.touches = [] }, onWheel: function (t) { if (this.wheelResize.enabled) { var e = this.$refs.container.getBoundingClientRect(), i = e.left, n = e.top, s = 1 + this.wheelResize.ratio * Math.sign(t.deltaY || t.detail || t.wheelDelta), o = { left: t.clientX - i, top: t.clientY - n }; this.$emit("resize", new yt({}, { factor: s, center: o })), t.preventDefault(), t.stopPropagation() } } } }, void 0, !1, void 0, !1, void 0, void 0, void 0), Pt = u("vue-rectangle-stencil"), Et = at({ render: function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { class: t.classes.stencil, style: t.style }, [i("BoundingBox", { class: t.classes.boundingBox, attrs: { handlers: t.handlers, "handler-component": t.handlerComponent, "handlers-classnames": t.handlersClassnames, "handlers-classes": t.handlersClasses, lines: t.lines, "line-component": t.lineComponent, "lines-classnames": t.linesClassnames, "lines-classes": t.linesClasses, scalable: t.scalable }, on: { resize: t.onResize } }, [i("DraggableArea", { attrs: { movable: t.movable }, on: { move: t.onMove } }, [i("PreviewResult", { class: t.classes.preview, attrs: { img: t.img, "stencil-coordinates": t.stencilCoordinates } })], 1)], 1)], 1) }, staticRenderFns: [] }, void 0, { name: "RectangleStencil", components: { PreviewResult: At, BoundingBox: wt, DraggableArea: Ct }, props: { img: { type: Object }, stencilCoordinates: { type: Object }, handlers: { type: Object }, handlerComponent: { type: [Object, String], default: function () { return pt } }, lines: { type: Object }, lineComponent: { type: [Object, String], default: function () { return ft } }, aspectRatio: { type: [Number, String] }, minAspectRatio: { type: [Number, String] }, maxAspectRatio: { type: [Number, String] }, movable: { type: Boolean, default: !0 }, scalable: { type: Boolean, default: !0 }, previewClass: { type: String }, boundingBoxClass: { type: String }, linesClasses: { type: Object, default: function () { return {} } }, handlersClasses: { type: Object, default: function () { return {} } }, classname: { type: String, validator: function (t) { return G(t) } }, previewClassname: { type: String, validator: function (t) { return G(t) } }, boundingBoxClassname: { type: String, validator: function (t) { return G(t) } }, linesClassnames: { type: Object, validator: function (t) { return G(t) } }, handlersClassnames: { type: Object, validator: function (t) { return G(t) } } }, computed: { classes: function () { return { stencil: h(Pt({ movable: this.movable }), this.classname), preview: h(Pt("preview"), this.previewClass || this.previewClassname), boundingBox: h(Pt("bounding-box"), this.boundingBoxClass || this.boundingBoxClassname) } }, style: function () { var t = this.stencilCoordinates, e = t.height, i = t.width, n = t.left, s = t.top; return { width: "".concat(i, "px"), height: "".concat(e, "px"), left: "".concat(n, "px"), top: "".concat(s, "px") } } }, methods: { onMove: function (t) { this.$emit("move", t) }, onResize: function (t) { this.$emit("resize", t) }, aspectRatios: function () { return { minimum: this.aspectRatio || this.minAspectRatio, maximum: this.aspectRatio || this.maxAspectRatio } } } }, void 0, !1, void 0, !1, void 0, void 0, void 0), Ot = u("vue-circle-stencil"), Lt = at({ render: function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { class: t.classes.stencil, style: t.style }, [i("BoundingBox", { class: t.classes.boundingBox, attrs: { handlers: t.handlers, "handler-component": t.handlerComponent, "handlers-classes": t.handlersClasses, "handlers-classnames": t.handlersClassnames, lines: t.lines, "line-component": t.lineComponent, "lines-classes": t.linesClasses, "lines-classnames": t.linesClassnames, scalable: t.scalable }, on: { resize: t.onResize } }, [i("DraggableArea", { attrs: { movable: t.movable }, on: { move: t.onMove } }, [i("PreviewResult", { class: t.classes.preview, attrs: { img: t.img, "stencil-coordinates": t.stencilCoordinates } })], 1)], 1)], 1) }, staticRenderFns: [] }, void 0, { name: "CircleStencil", components: { PreviewResult: At, BoundingBox: wt, DraggableArea: Ct }, props: { img: { type: Object }, stencilCoordinates: { type: Object }, handlers: { type: Object, default: function () { return { eastNorth: !0, westNorth: !0, westSouth: !0, eastSouth: !0 } } }, handlerComponent: { type: [Object, String], default: function () { return pt } }, lines: { type: Object }, lineComponent: { type: [Object, String], default: function () { return ft } }, movable: { type: Boolean, default: !0 }, scalable: { type: Boolean, default: !0 }, previewClass: { type: String }, boundingBoxClass: { type: String }, linesClasses: { type: Object, default: function () { return {} } }, handlersClasses: { type: Object, default: function () { return {} } }, classname: { type: String, validator: function (t) { return G(t) } }, previewClassname: { type: String, validator: function (t) { return G(t) } }, boundingBoxClassname: { type: String, validator: function (t) { return G(t) } }, linesClassnames: { type: Object, validator: function (t) { return G(t) } }, handlersClassnames: { type: Object, validator: function (t) { return G(t) } } }, computed: { classes: function () { return { stencil: h(Ot(), this.classname), preview: h(Ot("preview"), this.previewClass || this.previewClassname), boundingBox: h(Ot("bounding-box"), this.boundingBoxClass || this.boundingBoxClassname) } }, style: function () { var t = this.stencilCoordinates, e = t.height, i = t.width, n = t.left, s = t.top; return { width: "".concat(i, "px"), height: "".concat(e, "px"), left: "".concat(n, "px"), top: "".concat(s, "px") } } }, methods: { onMove: function (t) { this.$emit("move", t) }, onResize: function (t) { this.$emit("resize", t) }, aspectRatios: function () { return { minimum: 1, maximum: 1 } } } }, void 0, !1, void 0, !1, void 0, void 0, void 0); var It = u("vue-advanced-cropper"), Tt = at({ render: function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { ref: "cropper", class: t.classes.cropper }, [i("div", { class: t.classes.background, style: t.boundariesStyle }), t._v(" "), i("div", { ref: "stretcher", class: t.classes.stretcher }), t._v(" "), i("div", { class: t.classes.boundaries, style: t.boundariesStyle }, [i("cropper-wrapper", { class: t.classes.cropperWrapper, attrs: { "wheel-resize": t.settings.wheelResize, "touch-resize": t.settings.touchResize, "touch-move": t.settings.touchMove, "mouse-move": t.settings.mouseMove }, on: { move: t.onManipulateImage, resize: t.onManipulateImage } }, [i("div", { class: t.classes.imageWrapper }, [i("img", { ref: "image", class: t.classes.image, style: t.imageStyle, attrs: { crossorigin: t.imageAttributes.crossOrigin, src: t.imageAttributes.src }, on: { mousedown: function (t) { t.preventDefault() } } })]), t._v(" "), i(t.stencilComponent, t._b({ ref: "stencil", tag: "component", attrs: { img: { src: t.imageAttributes.src, size: t.imageSize, transforms: t.imageTransforms, coefficient: t.coefficient }, "result-coordinates": t.coordinates, "stencil-coordinates": t.stencilCoordinates }, on: { resize: t.onResize, move: t.onMove } }, "component", t.stencilProps, !1)), t._v(" "), i("canvas", { ref: "canvas", style: { display: "none" } }), t._v(" "), i("canvas", { ref: "sourceCanvas", style: { display: "none" } })], 1)], 1)]) }, staticRenderFns: [] }, void 0, { name: "Cropper", components: { CropperWrapper: Mt }, props: { src: { type: String, default: null }, stencilComponent: { type: [Object, String], default: function () { return Et } }, stencilProps: { type: Object, default: function () { return {} } }, imageClass: { type: String }, boundariesClass: { type: String }, backgroundClass: { type: String }, minWidth: { type: [Number, String] }, minHeight: { type: [Number, String] }, maxWidth: { type: [Number, String] }, maxHeight: { type: [Number, String] }, debounce: { type: [Boolean, Number], default: 500 }, canvas: { type: Boolean, default: !0 }, checkOrientation: { type: Boolean, default: !0 }, crossOrigin: { type: String, default: "anonymous" }, transitionTime: { type: Number, default: 300 }, wheelResize: { type: [Boolean, Object], default: !0 }, touchResize: { type: [Boolean, Object], default: !0 }, touchMove: { type: [Boolean, Object], default: !0 }, mouseMove: { type: [Boolean, Object], default: !0 }, imageRestriction: { type: String, default: "area", validator: function (t) { return -1 !== R.indexOf(t) } }, roundResult: { type: Boolean, default: !0 }, resizeAlgorithm: { type: Function, default: function (t) { var e = Math.abs, i = t.event, n = t.coordinates, s = t.aspectRatio, o = t.positionRestrictions, a = t.sizeRestrictions, r = f(f({}, n), { right: n.left + n.width, bottom: n.top + n.height }), l = i.params || {}, c = f({}, i.directions), d = l.allowedDirections || { left: !0, right: !0, bottom: !0, top: !0 }; a.widthFrozen && (c.left = 0, c.right = 0), a.heightFrozen && (c.top = 0, c.bottom = 0), y.forEach((function (t) { d[t] || (c[t] = 0) })); var h = z(r, c = ot({ coordinates: r, directions: c, sizeRestrictions: a, positionRestrictions: o })).width, u = z(r, c).height, p = l.preserveRatio ? O(r) : T(h / u, s); if (p) { var m = l.respectDirection; if (m || (m = r.width >= r.height || 1 === p ? "width" : "height"), "width" === m) { var v = h / p - r.height; d.top && d.bottom ? (c.bottom = v / 2, c.top = v / 2) : d.bottom ? c.bottom = v : d.top ? c.top = v : d.right ? c.right = 0 : d.left && (c.left = 0) } else if ("height" === m) { var g = r.width - u * p; d.left && d.right ? (c.left = -g / 2, c.right = -g / 2) : d.left ? c.left = -g : d.right ? c.right = -g : d.top ? c.top = 0 : d.bottom && (c.bottom = 0) } c = ot({ directions: c, coordinates: r, sizeRestrictions: a, positionRestrictions: o, preserveRatio: !0, compensate: l.compensate }) } return h = z(r, c).width, u = z(r, c).height, (p = l.preserveRatio ? O(r) : T(h / u, s)) && .001 < e(p - h / u) && y.forEach((function (t) { d[t] || (c[t] = 0) })), tt({ event: new b({ left: -c.left, top: -c.top }), coordinates: { width: n.width + c.right + c.left, height: n.height + c.top + c.bottom, left: n.left, top: n.top }, positionRestrictions: o }) } }, moveAlgorithm: { type: Function, default: tt }, initStretcher: { type: Function, default: function (t) { var e = t.stretcher, i = t.imageSize, n = O(i); e.style.width = i.width + "px", e.style.height = e.clientWidth / n + "px", e.style.width = e.clientWidth + "px" } }, fitCoordinates: { type: Function, default: function (t) { var e = Math.min, i = t.visibleArea, n = t.coordinates, s = t.aspectRatio, o = t.sizeRestrictions, a = t.positionRestrictions, r = f(f({}, n), N({ width: n.width, height: n.height, aspectRatio: s, sizeRestrictions: { maxWidth: i.width, maxHeight: i.height, minHeight: e(i.height, o.minHeight), minWidth: e(i.width, o.minWidth) } })); return r = P(r, function (t, e) { return { left: t.left - e.left, top: t.top - e.top } }($(n), $(r))), r = P(r, I(r, W(S(i), a))) } }, fitVisibleArea: { type: Function, default: function (t) { var e = Math.min, i = Math.max, n = t.visibleArea, s = t.boundaries, o = t.areaRestrictions, a = t.coordinates, r = f({}, n); r.height = r.width / O(s), r.top += (n.height - r.height) / 2, (0 < a.height - r.height || 0 < a.width - r.width) && (r = E(r, i(a.height / r.height, a.width / r.height))); var l = A(r, o); l.left + l.right + l.top + l.bottom && (r = l.left + l.right > l.top + l.bottom ? E(r, e((r.width + l.left + l.right) / r.width, L(r, o))) : E(r, e((r.height + l.top + l.bottom) / r.height, L(r, o)))); var c = M(I(a, S(r))); return r.width < a.width && (c.left = 0), r.height < a.height && (c.top = 0), r = j(r = P(r, c), o) } }, defaultVisibleArea: { type: [Function, Object], default: function (t) { var e = Math.max, i = t.areaRestrictions, n = t.coordinates, s = t.imageSize, o = O(t.boundaries); if (n) { var a = { height: e(n.height, s.height), width: e(n.width, s.width) }, r = O(a), l = D({ width: r > o ? a.width : a.height * o, height: r > o ? a.width / o : a.height }, function (t) { return { width: void 0 !== t.right && void 0 !== t.left ? t.right - t.left : 1 / 0, height: void 0 !== t.bottom && void 0 !== t.top ? t.bottom - t.top : 1 / 0 } }(i)), c = { left: n.left + n.width / 2 - l.width / 2, top: n.top + n.height / 2 - l.height / 2, width: l.width, height: l.height }, d = A(n, S(f({ left: 0, top: 0 }, s))), h = {}; return d.left || d.right || !(c.width <= s.width) || (h.left = 0, h.right = s.width), d.top || d.bottom || !(c.height <= s.height) || (h.top = 0, h.bottom = s.height), j(c, W(h, i)) } var u = O(s); return l = { height: u > o ? s.height : s.width / o, width: u > o ? s.height * o : s.width }, { left: s.width / 2 - l.width / 2, top: s.height / 2 - l.height / 2, width: l.width, height: l.height } } }, defaultSize: { type: [Function, Object], default: function (t) { var e = t.imageSize, i = t.visibleArea, n = t.boundaries, s = t.aspectRatio, o = t.sizeRestrictions, a = i || e, r = n.width > n.height ? { width: .8 * a.width, height: .8 * a.width / O(n) } : { height: .8 * a.height, width: .8 * a.height * O(n) }; return N(f(f({}, r), { aspectRatio: s, sizeRestrictions: o })) } }, defaultPosition: { type: [Function, Object], default: function (t) { var e = t.imageSize, i = t.visibleArea, n = t.coordinates, s = i || e; return { left: (i ? i.left : 0) + s.width / 2 - n.width / 2, top: (i ? i.top : 0) + s.height / 2 - n.height / 2 } } }, defaultBoundaries: { type: [Function, String], default: it, validator: function (t) { return !("string" == typeof t && "fill" !== t && "fit" !== t) } }, areaRestrictionsAlgorithm: { type: Function, default: function (t) { var e = t.imageSize, i = {}; return "area" === t.imageRestriction && (i = { left: 0, top: 0, right: e.width, bottom: e.height }), i } }, sizeRestrictionsAlgorithm: { type: Function, default: function (t) { var e = t.imageSize, i = t.minWidth, n = t.minHeight, s = t.maxWidth, o = t.maxHeight; return { minWidth: i / 100 * e.width, minHeight: n / 100 * e.height, maxWidth: s / 100 * e.width, maxHeight: o / 100 * e.height } } }, positionRestrictionsAlgorithm: { type: Function, default: function (t) { var e = t.imageSize, i = {}; return "none" !== t.imageRestriction && (i = { left: 0, top: 0, right: e.width, bottom: e.height }), i } }, priority: { type: String, default: "coordinates" }, restrictions: { type: Function, validator: function (t) { return G(t) } }, classname: { type: String, validator: function (t) { return G(t) } }, imageClassname: { type: String, validator: function (t) { return G(t) } }, areaClassname: { type: String, validator: function (t) { return G(t) } }, backgroundClassname: { type: String, validator: function (t) { return G(t) } }, areaClass: { type: String, validator: function (t) { return G(t) } } }, data: function () { return { imageLoaded: !1, imageAttributes: { crossOrigin: !1, src: null }, basicImageTransforms: { rotate: null, scaleX: null, scaleY: null }, imageSize: { width: 0, height: 0 }, boundaries: { width: 0, height: 0 }, visibleArea: null, coordinates: a({}, k) } }, computed: { initialized: function () { return !(!this.visibleArea || !this.imageLoaded) }, settings: function () { return { resize: q(this.resize, { stencil: !1 }), touchResize: q(this.touchResize), touchMove: q(this.touchMove), mouseMove: q(this.mouseMove), wheelResize: q(this.wheelResize, { ratio: .1 }) } }, coefficient: function () { return this.visibleArea ? this.visibleArea.width / this.boundaries.width : 0 }, areaRestrictions: function () { return this.imageLoaded ? this.areaRestrictionsAlgorithm({ imageSize: this.imageSize, imageRestriction: this.imageRestriction }) : {} }, sizeRestrictions: function () { if (this.boundaries.width && this.boundaries.height) { var t = (this.restrictions || this.sizeRestrictionsAlgorithm)({ imageSize: this.imageSize, minWidth: V(this.minWidth) ? 0 : K(this.minWidth), minHeight: V(this.minHeight) ? 0 : K(this.minHeight), maxWidth: V(this.maxWidth) ? 1 / 0 : K(this.maxWidth), maxHeight: V(this.maxHeight) ? 1 / 0 : K(this.maxHeight), imageWidth: this.imageSize.width, imageHeight: this.imageSize.height, props: this.$props }); return function (t) { var e = Math.min, i = t.sizeRestrictions, n = t.imageSize, s = t.boundaries, o = t.positionRestrictions, a = t.imageRestriction, r = void 0 === a ? "none" : a, l = f(f({}, i), { minWidth: void 0 === i.minWidth ? 0 : i.minWidth, minHeight: void 0 === i.minHeight ? 0 : i.minHeight, maxWidth: void 0 === i.maxWidth ? 1 / 0 : i.maxWidth, maxHeight: void 0 === i.maxHeight ? 1 / 0 : i.maxHeight }); if (void 0 !== o.left && void 0 !== o.right && (l.maxWidth = e(l.maxWidth, o.right - o.left)), void 0 !== o.bottom && void 0 !== o.top && (l.maxHeight = e(l.maxHeight, o.bottom - o.top)), "none" !== r) { var c = D(s, n), d = "area" === r ? c.width : n.width, h = "area" === r ? c.height : n.height; (!l.maxWidth || l.maxWidth > d) && (l.maxWidth = d), (!l.maxHeight || l.maxHeight > h) && (l.maxHeight = h) } return l.minWidth > l.maxWidth && (l.minWidth = l.maxWidth, l.widthFrozen = !0), l.minHeight > l.maxHeight && (l.minHeight = l.maxHeight, l.heightFrozen = !0), l }({ sizeRestrictions: t, imageSize: this.imageSize, boundaries: this.boundaries, positionRestrictions: this.positionRestrictions, imageRestriction: this.imageRestriction }) } return { minWidth: 0, minHeight: 0, maxWidth: 0, maxHeight: 0 } }, positionRestrictions: function () { return this.positionRestrictionsAlgorithm({ imageSize: this.imageSize, imageRestriction: this.imageRestriction }) }, classes: function () { return { cropper: h(It(), this.classname), image: h(It("image"), this.imageClass || this.imageClassname), boundaries: h(It("boundaries"), this.boundariesClass || this.areaClass || this.areaClassname), stretcher: h(It("stretcher")), background: h(It("background"), this.backgroundClass || this.backgroundClassname), imageWrapper: h(It("image-wrapper")), cropperWrapper: h(It("cropper-wrapper")) } }, imageTransforms: function () { return a(a({}, this.basicImageTransforms), {}, { scaleX: this.basicImageTransforms.scaleX || 1, scaleY: this.basicImageTransforms.scaleY || 1, translateX: this.visibleArea ? this.visibleArea.left / this.coefficient : 0, translateY: this.visibleArea ? this.visibleArea.top / this.coefficient : 0 }) }, stencilCoordinates: function () { if (this.initialized) { var t = this.coordinates, e = t.width, i = t.height, n = t.left, s = t.top; return { width: e / this.coefficient, height: i / this.coefficient, left: (n - this.visibleArea.left) / this.coefficient, top: (s - this.visibleArea.top) / this.coefficient } } return this.defaultCoordinates() }, wrapperStyle: function () { return { width: "".concat(this.stencilCoordinates.width, "px"), height: "".concat(this.stencilCoordinates.height, "px"), left: "".concat(this.stencilCoordinates.left, "px"), top: "".concat(this.stencilCoordinates.top, "px") } }, boundariesStyle: function () { return { width: this.boundaries.width ? "".concat(this.boundaries.width, "px") : "auto", height: this.boundaries.height ? "".concat(this.boundaries.height, "px") : "auto", opacity: this.imageLoaded ? 1 : 0, transition: "opacity ".concat(this.transitionTime, "ms"), pointerEvents: this.imageLoaded ? "all" : "none" } }, imageStyle: function () { var t = { left: "".concat(this.imageSize.width / (2 * this.coefficient) - this.imageTransforms.translateX, "px"), top: "".concat(this.imageSize.height / (2 * this.coefficient) - this.imageTransforms.translateY, "px"), transform: "translate(-50%, -50%)" + kt(this.imageTransforms) }; return this.imageTransforms.flipped ? (t.width = "".concat(this.imageSize.height / this.coefficient, "px"), t.height = "".concat(this.imageSize.width / this.coefficient, "px")) : (t.width = "".concat(this.imageSize.width / this.coefficient, "px"), t.height = "".concat(this.imageSize.height / this.coefficient, "px")), t } }, watch: { src: function () { this.onChangeImage() }, stencilComponent: function () { var t = this; this.$nextTick((function () { t.resetCoordinates() })) }, minWidth: function () { this.onPropsChange() }, maxWidth: function () { this.onPropsChange() }, minHeight: function () { this.onPropsChange() }, maxHeight: function () { this.onPropsChange() }, imageRestriction: function () { this.reset() }, stencilProps: function (t, e) { ["aspectRatio", "minAspectRatio", "maxAspectRatio"].find((function (i) { return t[i] !== e[i] })) && this.$nextTick(this.onPropsChange) } }, mounted: function () { this.debouncedUpdate = m(this.update, this.debounce), this.$refs.image.addEventListener("load", this.onSuccessLoadImage), this.$refs.image.addEventListener("error", this.onFailLoadImage), this.onChangeImage(), window.addEventListener("resize", this.refresh), window.addEventListener("orientationchange", this.refresh) }, destroyed: function () { window.removeEventListener("resize", this.refresh), window.removeEventListener("orientationchange", this.refresh) }, methods: { getResult: function (t) { var e = this.initialized ? this.prepareResult(a({}, this.coordinates)) : this.defaultCoordinates(); return (t || this.canvas) && this.src && this.imageLoaded ? (this.updateCanvas(), { coordinates: e, visibleArea: this.visibleArea ? a({}, this.visibleArea) : null, canvas: this.$refs.canvas }) : { coordinates: e, visibleArea: this.visibleArea ? a({}, this.visibleArea) : null } }, zoom: function (t, e) { this.onManipulateImage(new v({}, { factor: 1 / t, center: e }), !1) }, move: function (t, e) { this.onManipulateImage(new v({ left: t || 0, top: e || 0 }), !1) }, setCoordinates: function (t) { var e = this, i = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}, n = i.autoZoom; this.$nextTick((function () { e.imageLoaded ? e.applyTransform(t, !(void 0 !== n) || n) : e.delayedTransforms = t })) }, refresh: function () { var t = this.$refs.image; if (this.src && t) return this.initialized ? this.updateVisibleArea() : this.reset() }, reset: function () { return this.resetVisibleArea() }, prepareResult: function (t) { return this.roundResult ? function (t) { var e = Math.ceil, i = Math.floor, n = Math.round, s = t.coordinates, o = t.sizeRestrictions, a = t.positionRestrictions, r = { width: n(s.width), height: n(s.height), left: n(s.left), top: n(s.top) }; return r.width > o.maxWidth ? r.width = i(s.width) : r.width < o.minWidth && (r.width = e(s.width)), r.height > o.maxHeight ? r.height = i(s.height) : r.height < o.minHeight && (r.height = e(s.height)), void 0 !== a.left && (r.left < a.left || void 0 !== a.right && r.left + r.width > a.right) && (r.left = i(a.left)), void 0 !== a.top && (r.top < a.top || void 0 !== a.bottom && r.top + r.height > a.bottom) && (r.top = i(a.top)), r }(a(a({}, this.getPublicProperties()), {}, { positionRestrictions: nt(this.positionRestrictions, this.visibleArea), coordinates: t })) : t }, autoZoom: function (t) { var e = function (t) { var e = Math.min, i = Math.max, n = t.coordinates, s = t.visibleArea, o = t.areaRestrictions, a = f({}, s), r = f({}, n), l = i(0, r.width - a.width), c = i(0, r.height - a.height); return l > c ? a = E(a, e(r.width / a.width, L(a, o))) : c > l && (a = E(a, e(r.height / a.height, L(a, o)))), a = P(a, M(I(r, S(a)))), { visibleArea: a = P(a, I(a, o)) } }(a(a({}, this.getPublicProperties()), {}, { coordinates: t })).visibleArea; this.visibleArea = e }, normalizeEvent: function (t) { return function (t) { var e = t.event, i = t.visibleArea, n = t.coefficient; if ("manipulateImage" === e.type) return f(f({}, e), { move: { left: e.move && e.move.left ? n * e.move.left : 0, top: e.move && e.move.top ? n * e.move.top : 0 }, scale: { factor: e.scale && e.scale.factor ? e.scale.factor : 1, center: e.scale && e.scale.center ? { left: e.scale.center.left * n + i.left, top: e.scale.center.top * n + i.top } : null } }); if ("resize" === e.type) { var s = f(f({}, e), { directions: f({}, e.directions) }); return y.forEach((function (t) { s.directions[t] *= n })), s } if ("move" === e.type) { var o = f(f({}, e), { directions: f({}, e.directions) }); return C.forEach((function (t) { o.directions[t] *= n })), o } return e }(a(a({}, this.getPublicProperties()), {}, { event: t })) }, updateCanvas: function () { if (this.$refs.canvas) { var t = this.$refs.canvas, e = this.$refs.image, i = this.checkOrientation ? function (t, e, i) { var n = Math.PI, s = i.flipped, o = i.orientation, a = e.naturalWidth, r = e.naturalHeight, l = t.getContext("2d"); return t.width = a, t.height = r, l.save(), s && (t.width = r, t.height = a), 2 == o ? (l.translate(a, 0), l.scale(-1, 1)) : 3 == o ? (l.translate(a, r), l.rotate(1 * n)) : 4 == o ? (l.translate(0, r), l.scale(1, -1)) : 5 == o ? (l.rotate(.5 * n), l.scale(1, -1)) : 6 == o ? (l.rotate(.5 * n), l.translate(0, -r)) : 7 == o ? (l.rotate(1.5 * n), l.translate(-a, r), l.scale(1, -1)) : 8 == o && (l.translate(0, a), l.rotate(1.5 * n)), l.drawImage(e, 0, 0, a, r), l.restore(), t }(this.$refs.sourceCanvas, e, this.imageTransforms) : e; !function (t, e, i) { t.width = i.width, t.height = i.height; var n = t.getContext("2d"); n.clearRect(0, 0, t.width, t.height), n.drawImage(e, i.left, i.top, i.width, i.height, 0, 0, i.width, i.height) }(t, i, this.coordinates) } }, update: function () { this.$emit("change", this.getResult()) }, applyTransform: function (t) { var e = !!(1 < arguments.length && void 0 !== arguments[1]) && arguments[1], i = !!(2 < arguments.length && void 0 !== arguments[2]) && arguments[2], n = this.visibleArea && i ? B(this.sizeRestrictions, this.visibleArea) : this.sizeRestrictions, s = this.visibleArea && i ? nt(this.positionRestrictions, this.visibleArea) : this.positionRestrictions, o = et({ transform: t, coordinates: this.coordinates, imageSize: this.imageSize, sizeRestrictions: n, positionRestrictions: s, aspectRatio: this.getAspectRatio() }); return e && this.autoZoom(o), this.onChangeCoordinates(o, !1), o }, resetCoordinates: function () { var t = this; if (this.$refs.image) { var e = this.$refs.cropper, i = this.$refs.image, n = this.sizeRestrictions, s = (n.minWidth, n.minHeight, n.maxWidth, n.maxHeight, [X(this.defaultSize) ? this.defaultSize(a({ boundaries: this.boundaries, imageSize: this.imageSize, aspectRatio: this.getAspectRatio(), sizeRestrictions: this.sizeRestrictions, visibleArea: this.visibleArea, cropper: e, image: i, imageWidth: this.imageSize.width, imageHeight: this.imageSize.height, props: this.$props }, this.sizeRestrictions)) : this.defaultSize, function (n) { return a({}, X(t.defaultPosition) ? t.defaultPosition({ coordinates: n, imageSize: t.imageSize, visibleArea: t.visibleArea, cropper: e, image: i, stencilWidth: n.width, stencilHeight: n.height, imageWidth: t.imageSize.width, imageHeight: t.imageSize.height, props: t.$props }) : t.defaultPosition) }]); this.delayedTransforms && s.push.apply(s, r(Array.isArray(this.delayedTransforms) ? this.delayedTransforms : [this.delayedTransforms])), this.applyTransform(s, !1, !0), this.delayedTransforms = null } }, clearImage: function () { var t = this; this.imageLoaded = !1, setTimeout((function () { var e = t.$refs.stretcher; e && (e.style.height = "auto", e.style.width = "auto"), t.coordinates = t.defaultCoordinates(), t.boundaries = { width: 0, height: 0 } }), this.transitionTime) }, updateBoundaries: function () { var t = this, e = this.$refs.stretcher, i = this.$refs.cropper; return this.initStretcher({ cropper: i, stretcher: e, imageSize: this.imageSize }), this.$nextTick().then((function () { var e = { cropper: i, imageSize: t.imageSize }; if (t.boundaries = X(t.defaultBoundaries) ? t.defaultBoundaries(e) : "fill" === t.defaultBoundaries ? function (t) { var e = t.cropper; return { width: e.clientWidth, height: e.clientHeight } }(e) : it(e), !t.boundaries.width || !t.boundaries.height) throw new Error("It's impossible to fit the cropper in the current container") })) }, resetVisibleArea: function () { var t = this; return this.updateBoundaries().then((function () { "visibleArea" !== t.priority && (t.visibleArea = null, t.resetCoordinates()), t.visibleArea = function (t) { var e = t.visibleArea, i = t.boundaries, n = t.areaRestrictions, s = f({}, e), o = O(i); return s.width / s.height !== o && (s.height = s.width / o), j(s, n) }({ visibleArea: X(t.defaultVisibleArea) ? t.defaultVisibleArea({ imageSize: t.imageSize, boundaries: t.boundaries, coordinates: "visibleArea" === t.priority ? null : t.coordinates, areaRestrictions: t.areaRestrictions }) : t.defaultVisibleArea, boundaries: t.boundaries, areaRestrictions: t.areaRestrictions }), "visibleArea" === t.priority ? t.resetCoordinates() : t.coordinates = t.fitCoordinates({ visibleArea: t.visibleArea, coordinates: t.coordinates, aspectRatio: t.getAspectRatio(), positionRestrictions: t.positionRestrictions, sizeRestrictions: t.sizeRestrictions }) })).catch((function () { t.visibleArea = null })) }, updateVisibleArea: function () { var t = this; return this.updateBoundaries().then((function () { t.visibleArea = t.fitVisibleArea({ imageSize: t.imageSize, boundaries: t.boundaries, visibleArea: t.visibleArea, coordinates: t.coordinates, areaRestrictions: t.areaRestrictions }), t.coordinates = t.fitCoordinates({ visibleArea: t.visibleArea, coordinates: t.coordinates, aspectRatio: t.getAspectRatio(), positionRestrictions: t.positionRestrictions, sizeRestrictions: t.sizeRestrictions }) })).catch((function () { t.visibleArea = null })) }, onChangeCoordinates: function (t) { var e = !(1 < arguments.length && void 0 !== arguments[1]) || arguments[1]; this.coordinates = t, this.$listeners && this.$listeners.change && (e && this.debounce ? this.debouncedUpdate() : this.update()) }, onChangeImage: function () { var t = this; if (this.imageLoaded = !1, this.delayedTransforms = null, this.imageAttributes.src = null, this.src) { var e = function (t) { return new Promise((function (e) { Rt(t).then((function (i) { e(i ? { source: t, arrayBuffer: i, orientation: St(i) } : { source: t, arrayBuffer: null, orientation: null }) })).catch((function (i) { console.warn(i), e({ source: t, arrayBuffer: null, orientation: null }) })) })) }(this.src); (function (t) { if (Y(t)) return !1; var e = window.location, i = /(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(t) || [], n = { protocol: i[1] || "", host: i[2] || "", port: i[3] || "" }, s = function (t) { return t.port || function (t) { return "http" === t ? 80 : 433 }(t.protocol || e.protocol) }; return (n.protocol || n.host || n.port) && !(n.protocol && n.protocol == e.protocol && n.host && n.host == e.host && n.host && s(n) == s(e)) })(this.src) && (this.imageAttributes.crossOrigin = this.crossOrigin), setTimeout((function () { e.then(t.onParseImage) }), this.transitionTime) } else this.clearImage() }, onFailLoadImage: function () { this.clearImage(), this.$emit("error") }, onSuccessLoadImage: function () { var t = this, e = this.$refs.image; e && !this.imageLoaded && (this.imageTransforms.flipped ? (this.imageSize.height = e.naturalWidth, this.imageSize.width = e.naturalHeight) : (this.imageSize.height = e.naturalHeight, this.imageSize.width = e.naturalWidth), this.imageLoaded = !0, this.reset().then((function () { t.$emit("ready") }))) }, onParseImage: function (t) { var e = this, i = t.source, n = t.arrayBuffer, s = t.orientation; this.imageAttributes.src = n && s && Y(i) ? function (t) { for (var e = [], i = new Uint8Array(t); 0 < i.length;) { var n = i.subarray(0, 8192); e.push(String.fromCharCode.apply(null, Array.from ? Array.from(n) : n.slice())), i = i.subarray(8192) } return "data:image/jpeg;base64," + btoa(e.join("")) }(n) : i, this.basicImageTransforms = function (t) { var e = { orientation: t }; return t && (2 === t ? e.scaleX = -1 : 3 === t ? e.rotate = -180 : 4 === t ? e.scaleY = -1 : 5 === t ? (e.rotate = 90, e.scaleY = -1) : 6 === t ? e.rotate = 90 : 7 === t ? (e.rotate = 90, e.scaleX = -1) : 8 === t && (e.rotate = -90)), (90 === e.rotate || -90 === e.rotate) && (e.flipped = !0), e }(s), this.$nextTick((function () { var t = e.$refs.image; t && t.complete && (function (t) { return !!t.naturalWidth }(t) ? e.onSuccessLoadImage() : e.onFailLoadImage()) })) }, onMove: function (t) { this.onChangeCoordinates(this.moveAlgorithm(a(a({}, this.getPublicProperties()), {}, { positionRestrictions: nt(this.positionRestrictions, this.visibleArea), coordinates: this.coordinates, event: this.normalizeEvent(t) }))) }, onResize: function (t) { var e = Math.max, i = this.sizeRestrictions, n = Math.min(this.coordinates.width, this.coordinates.height, 20 * this.coefficient); this.onChangeCoordinates(this.resizeAlgorithm(a(a({}, this.getPublicProperties()), {}, { positionRestrictions: nt(this.positionRestrictions, this.visibleArea), sizeRestrictions: a(a({}, i), {}, { minWidth: e(i.minWidth, n), minHeight: e(i.minHeight, n) }), event: this.normalizeEvent(t) }))) }, onManipulateImage: function (t) { var e = !(1 < arguments.length && void 0 !== arguments[1]) || arguments[1], i = st(a(a({}, this.getPublicProperties()), {}, { event: e ? this.normalizeEvent(t) : t, imageRestriction: this.imageRestriction, settings: { resize: this.settings.resize.stencil } })), n = i.visibleArea, s = i.coordinates; this.visibleArea = n, this.onChangeCoordinates(s) }, onPropsChange: function () { this.applyTransform(this.coordinates, !0, !0) }, getAspectRatio: function () { return this.$refs.stencil.aspectRatios ? this.$refs.stencil.aspectRatios() : { minimum: this.stencilProps.aspectRatio || this.stencilProps.minAspectRatio, maximum: this.stencilProps.aspectRatio || this.stencilProps.maxAspectRatio } }, getPublicProperties: function () { return { coefficient: this.coefficient, visibleArea: this.visibleArea, coordinates: this.coordinates, boundaries: this.boundaries, sizeRestrictions: this.sizeRestrictions, positionRestrictions: this.positionRestrictions, areaRestrictions: this.areaRestrictions, aspectRatio: this.getAspectRatio(), imageRestriction: this.imageRestriction } }, defaultCoordinates: function () { return a({}, k) } } }, void 0, !1, void 0, !1, void 0, void 0, void 0), Dt = u("vue-preview-image"); at({ render: function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { class: t.classes.root, style: t.wrapperStyle }, [i("img", { ref: "image", class: t.classes.image, style: t.imageStyle, attrs: { src: t.img } })]) }, staticRenderFns: [] }, void 0, { name: "PreviewImage", props: { img: { type: String }, imageClass: { type: String }, width: { type: Number }, height: { type: Number }, top: { type: Number }, left: { type: Number }, previewWidth: { type: Number, required: !0 }, previewHeight: { type: Number, required: !0 } }, data: function () { return { imageSize: { width: 0, height: 0 } } }, computed: { classes: function () { return { root: Dt(), image: h(Dt("image"), this.imageClass) } }, wrapperStyle: function () { return { width: "".concat(this.previewWidth, "px"), height: "".concat(this.previewHeight, "px") } }, imageStyle: function () { var t = this.previewHeight / this.height; return { width: "".concat(this.imageSize.width * t, "px"), height: "".concat(this.imageSize.height * t, "px"), left: "".concat(-this.left * t, "px"), top: "".concat(-this.top * t, "px") } } }, watch: { img: function () { this.onChangeImage() } }, mounted: function () { this.onChangeImage() }, methods: { refreshImage: function () { var t = this.$refs.image; this.imageSize.height = t.naturalHeight, this.imageSize.width = t.naturalWidth }, onChangeImage: function () { var t = this, e = this.$refs.image; e.complete ? this.refreshImage() : e.addEventListener("load", (function () { t.refreshImage() })) } } }, void 0, !1, void 0, !1, void 0, void 0, void 0); n.default.component("cropper", Tt), n.default.component("rectangle-stencil", Et), n.default.component("circle-stencil", Lt), n.default.component("simple-handler", pt), n.default.component("simple-line", ft), function (t, e) { if (e && "undefined" != typeof document) { for (var i, n = document.head || document.getElementsByTagName("head")[0], s = n.getElementsByTagName("style"), o = 0; o < s.length; o++)s[o] && s[o].innerText && s[o].innerText.startsWith("/*for=" + t) && (i = s[o]); if (i || ((i = document.createElement("style")).type = "text/css", n.insertBefore(i, s[0] || n.firstChild)), i.styleSheet) i.styleSheet.cssText = e; else { var a = document.createTextNode("/*for=" + t + "*/" + e); i.innerHTML = "", i.appendChild(a) } } }("vue-advanced-cropper", ".vue-advanced-cropper{text-align:center;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;max-height:100%;max-width:100%;direction:ltr}.vue-advanced-cropper__stretcher{pointer-events:none;position:relative;max-width:100%;max-height:100%}.vue-advanced-cropper__image{opacity:.5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;-webkit-transform-origin:center;transform-origin:center;max-width:unset!important}.vue-advanced-cropper__boundaries{position:absolute;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);top:50%}.vue-advanced-cropper__background{position:absolute;background:#000;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vue-advanced-cropper__cropper-wrapper{width:100%;height:100%}.vue-advanced-cropper__image-wrapper{overflow:hidden;position:absolute;width:100%;height:100%}.vue-advanced-cropper__stencil-wrapper{position:absolute}.vue-handler-wrapper{position:absolute;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vue-handler-wrapper__draggable{width:30px;height:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.vue-handler-wrapper--west-north{left:0;top:0;cursor:nw-resize}.vue-handler-wrapper--north{left:50%;top:0;cursor:n-resize}.vue-handler-wrapper--east-north{left:100%;top:0;cursor:ne-resize}.vue-handler-wrapper--east{left:100%;top:50%;cursor:e-resize}.vue-handler-wrapper--east-south{left:100%;top:100%;cursor:se-resize}.vue-handler-wrapper--south{left:50%;top:100%;cursor:s-resize}.vue-handler-wrapper--west-south{left:0;top:100%;cursor:sw-resize}.vue-handler-wrapper--west{left:0;top:50%;cursor:w-resize}.vue-handler-wrapper--disabled{cursor:auto}.vue-draggable-area{position:relative}.vue-simple-handler{display:block;background:#fff;height:10px;width:10px}.vue-line-wrapper{background:0 0;position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.vue-line-wrapper--north,.vue-line-wrapper--south{height:12px;width:100%;left:0;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.vue-line-wrapper--north{top:0;cursor:n-resize}.vue-line-wrapper--south{top:100%;cursor:s-resize}.vue-line-wrapper--east,.vue-line-wrapper--west{width:12px;height:100%;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:0}.vue-line-wrapper--east{left:100%;cursor:e-resize}.vue-line-wrapper--west{left:0;cursor:w-resize}.vue-line-wrapper--disabled{cursor:auto}.vue-preview-result{overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;height:100%;width:100%}.vue-preview-result__wrapper{position:absolute}.vue-preview-result__image{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transform-origin:center;transform-origin:center;max-width:unset!important}.vue-bounding-box{position:relative;height:100%;width:100%}.vue-preview-image{overflow:hidden;position:relative}.vue-preview-image__image{pointer-events:none;position:absolute;max-width:unset!important}.vue-circle-stencil{position:absolute;height:100%;width:100%;-webkit-box-sizing:content-box;box-sizing:content-box;cursor:move}.vue-circle-stencil__preview{border-radius:50%}.vue-rectangle-stencil{position:absolute;height:100%;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.vue-rectangle-stencil--movable{cursor:move}.vue-simple-line{background:0 0;-webkit-transition:border .5s;transition:border .5s;border-color:rgba(255,255,255,.3);border-width:0;border-style:solid}.vue-simple-line--north,.vue-simple-line--south{height:0;width:100%}.vue-simple-line--east,.vue-simple-line--west{height:100%;width:0}.vue-simple-line--east{border-right-width:1px}.vue-simple-line--west{border-left-width:1px}.vue-simple-line--south{border-top-width:1px}.vue-simple-line--north{border-bottom-width:1px}.vue-simple-line--hover{opacity:1;border-color:#fff}") }, 3832: (t, e, i) => { "use strict"; i.r(e), i.d(e, { default: () => m }); var n = i(9655), s = i(9539), o = i(738); const a = { name: "UserMenu" }; var r = i(1900); const l = { props: {}, name: "HeaderToolbar", data: function () { return { menuVisible: !1, menuLeft: 0, showLogin: !1, showSignup: !1 } }, methods: { showUserMenu: function (t) { this.menuVisible = !0; var e = document.getElementById("usermenu-show").getBoundingClientRect().x; this.menuLeft = e + "px" } }, components: { UserMenu: (0, r.Z)(a, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return null != t.$store.state.user ? i("div", { staticClass: "usermenu card" }, [i("div", { staticClass: "card-header px-2 d-flex bg-white border-bottom" }, [i("wire-link", { staticClass: "d-flex aling-items-center", attrs: { href: "/" + this.$store.state.user.username } }, [i("img", { staticClass: "profile-sm", attrs: { src: this.$store.state.user.profile } }), t._v(" "), i("span", { staticClass: "mx-2 d-flex flex-column justify-content-center" }, [i("strong", { staticClass: "text-black" }, [t._v(t._s(this.$store.state.user.name) + "\n\t\t\t\t\t"), 1 === this.$store.state.user.is_verified ? i("i", { staticClass: "verificationcheck" }, [t._v("check_circle")]) : t._e()]), t._v(" "), i("small", [t._v(t._s(this.$store.state.user.short_bio))])])])], 1), t._v(" "), i("div", { staticClass: "card-body p-0" }, [i("ul", { staticClass: "list-group list-group-flush" }, [i("li", { staticClass: "list-group-item headermenu-item d-flex flex-column px-2 pt-3" }, [i("wire-link", { staticClass: "m-0", attrs: { href: "/settings" } }, [i("i", { staticClass: "material-icons-outlined" }, [t._v("settings")]), t._v(" تنظیمات و حریم خصوصی ")])], 1), t._v(" "), i("li", { staticClass: "list-group-item border-top-0 headermenu-item d-flex flex-column pb-3 px-2" }, [i("wire-link", { staticClass: "m-0", attrs: { href: "/ideas" } }, [i("i", { staticClass: "material-icons-outlined" }, [t._v("emoji_objects")]), t._v(" ایده‌های شما ")])], 1), t._v(" "), t._m(0)])])]) : t._e() }), [function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("li", { staticClass: "list-group-item headermenu-item d-flex flex-column px-2 pb-2" }, [i("form", { attrs: { action: "/logout", method: "POST" } }, [i("button", { staticClass: "text-right bg-transparent hover-danger m-0 border-0 text-grey", attrs: { type: "submit" } }, [i("i", { staticClass: "material-icons" }, [t._v("power_settings_new")]), t._v(" خروج")])])]) }], !1, null, null, null).exports, LoginModal: s.Z, SignupModal: o.Z } }; const c = (0, r.Z)(l, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { staticClass: "toolbar" }, [null != t.$store.state.user ? i("div", { staticClass: "header-menu" }, [i("wire-link", { class: { active: "/feed" === t.$store.state.url }, attrs: { href: "/feed" } }, [i("i", { staticClass: "navheader-icon" }, [t._v("home")]), t._v(" "), i("div", { staticClass: "navheader-text" }, [t._v("خانه")])]), t._v(" "), i("wire-link", { class: { active: "/chats" === t.$store.state.url }, attrs: { href: "/chats" } }, [i("i", { staticClass: "navheader-icon", class: { unread: t.$store.state.shared.unread_messages_count > 0 && "/chats" != t.$store.state.url } }, [t._v("textsms")]), t._v(" "), i("div", { staticClass: "navheader-text" }, [t._v("گفتگو")])]), t._v(" "), i("wire-link", { class: { active: "/connections" === t.$store.state.url }, attrs: { href: "/connections" } }, [i("i", { staticClass: "navheader-icon" }, [t._v("group")]), t._v(" "), i("div", { staticClass: "navheader-text" }, [t._v("شبکه من")])]), t._v(" "), i("wire-link", { class: { active: "/notifications" === t.$store.state.url }, attrs: { href: "/notifications" } }, [i("i", { staticClass: "navheader-icon", class: { unread: t.$store.state.shared.notifications_count > 0 && "/notifications" != t.$store.state.url } }, [t._v(t._s("/notifications" === t.$store.state.url ? "notifications" : "notifications_none"))]), t._v(" "), i("div", { staticClass: "navheader-text" }, [t._v("اعلان‌ها")])]), t._v(" "), i("wire-link", { class: { active: "/bookmarks" === t.$store.state.url }, attrs: { href: "/bookmarks" } }, [i("i", { staticClass: "navheader-icon" }, [t._v("bookmarks")]), t._v(" "), i("div", { staticClass: "navheader-text" }, [t._v("نشان‌ها")])])], 1) : i("div", [i("login-modal", { attrs: { show: t.showLogin }, on: { "update:show": function (e) { t.showLogin = e } } }), t._v(" "), i("signup-modal", { attrs: { show: t.showSignup }, on: { "update:show": function (e) { t.showSignup = e } } }), t._v(" "), i("div", { staticClass: "d-flex align-items-center" }, [i("button", { staticClass: "text-dark btn btn-transparent font-14 py-1", on: { click: function (e) { t.showLogin = !0 } } }, [t._v("ورود")]), t._v(" "), i("span", { staticClass: "splitor-line" }), t._v(" "), i("button", { staticClass: "text-dark btn btn-transparent font-14 py-1", on: { click: function (e) { t.showSignup = !0 } } }, [t._v("ثبت‌نام")])])], 1), t._v(" "), null != t.$store.state.user ? i("div", { staticClass: "usertoolbar h-100 d-flex align-items-center mr-2 py-3", attrs: { id: "usermenu-show" }, on: { mouseenter: t.showUserMenu, mouseleave: function (e) { t.menuVisible = !1 } } }, [i("div", { staticClass: "d-flex align-items-center" }, [i("div", { staticClass: "d-flex align-items-center" }, [i("span", { staticClass: "ml-2", staticStyle: { "white-space": "nowrap", "user-select": "none" }, attrs: { dir: "ltr" } }, [t._v(t._s(t.$store.state.user.username) + " "), 1 === t.$store.state.user.is_verified ? i("i", { staticClass: "verificationcheck" }, [t._v("check_circle")]) : t._e()]), t._v(" "), i("img", { staticClass: "profile-xsm", attrs: { src: t.$store.state.user.profile } })]), t._v(" "), i("i", { staticClass: "material-icons text-light" }, [t._v("more_vert")])]), t._v(" "), i("transition", { attrs: { name: "fade", mode: "out-in" } }, [i("user-menu", { directives: [{ name: "show", rawName: "v-show", value: t.menuVisible, expression: "menuVisible" }], style: { left: t.menuLeft } })], 1)], 1) : t._e()]) }), [], !1, null, null, null).exports; var d = i(9949); const h = { data: function () { return { showLogin: !1, showSignup: !1 } }, components: { LoginModal: s.Z, SignupModal: o.Z }, methods: { onShow: function () { var t = this; setTimeout((function () { t.$refs.modal.$refs.dialog.style.marginTop = "0" }), 100) } }, mixins: [d.Z], name: "UserOptionModal" }; const u = (0, r.Z)(h, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", [i("login-modal", { attrs: { show: t.showLogin }, on: { "update:show": function (e) { t.showLogin = e } } }), t._v(" "), i("signup-modal", { attrs: { show: t.showSignup }, on: { "update:show": function (e) { t.showSignup = e } } }), t._v(" "), i("b-modal", { ref: "modal", attrs: { "hide-footer": "", "hide-header": "", "body-class": "pb-0", size: "lg" }, on: { show: t.onShow }, model: { value: t.showModal, callback: function (e) { t.showModal = e }, expression: "showModal" } }, [t.$store.state.user ? i("div", { staticClass: "useroptions" }, [i("div", { staticClass: "useroptions-header" }, [i("wire-link", { staticClass: "d-flex aling-items-center", attrs: { href: "/" + t.$store.state.user.username }, on: { click: function (e) { return t.$emit("update:show", !1) } } }, [i("img", { staticClass: "profile-sm", attrs: { src: t.$store.state.user.profile } }), t._v(" "), i("span", { staticClass: "mx-2 d-flex flex-column justify-content-center" }, [i("strong", { staticClass: "text-black" }, [t._v(t._s(t.$store.state.user.name) + "\n\t\t\t\t\t\t\t"), 1 === t.$store.state.user.is_verified ? i("i", { staticClass: "position-relative verificationcheck" }, [t._v("check_circle")]) : t._e()]), t._v(" "), i("small", [t._v(t._s(t.$store.state.user.short_bio))])])]), t._v(" "), i("i", { staticClass: "close material-icons text-muted hover-dark", on: { click: function (e) { return t.$emit("update:show", !1) } } }, [t._v("close")])], 1), t._v(" "), i("ul", { staticClass: "p-0 menu" }, [i("li", { staticClass: "list-item d-flex flex-column" }, [i("wire-link", { staticClass: "m-0", attrs: { href: "/settings" }, on: { click: function (e) { return t.$emit("update:show", !1) } } }, [i("i", { staticClass: "material-icons-outlined" }, [t._v("settings")]), t._v(" تنظیمات و حریم خصوصی ")])], 1), t._v(" "), i("li", { staticClass: "list-item d-flex flex-column" }, [i("wire-link", { staticClass: "m-0", attrs: { href: "/ideas" }, on: { click: function (e) { return t.$emit("update:show", !1) } } }, [i("i", { staticClass: "material-icons-outlined" }, [t._v("emoji_objects")]), t._v(" صدای شما ")])], 1), t._v(" "), i("li", { staticClass: "list-item d-flex flex-column" }, [i("wire-link", { staticClass: "m-0", attrs: { href: "/help" }, on: { click: function (e) { return t.$emit("update:show", !1) } } }, [i("i", { staticClass: "material-icons-outlined" }, [t._v("help_outline")]), t._v(" مرکز راهنمایی ")])], 1)]), t._v(" "), i("div", { staticClass: "langs" }, [i("div", { staticClass: "lang-item disabled" }, [i("img", { attrs: { src: "/img/franch.png", width: "24", height: "24" } }), t._v(" "), i("span", [t._v("Française")])]), t._v(" "), i("div", { staticClass: "lang-item disabled" }, [i("img", { attrs: { src: "/img/en.png", width: "24", height: "24" } }), t._v(" "), i("span", [t._v("English")])]), t._v(" "), i("div", { staticClass: "lang-item" }, [i("img", { attrs: { src: "/img/iranicon.png", width: "24", height: "24" } }), t._v(" "), i("span", [t._v("فارسی")])])]), t._v(" "), i("ul", { staticClass: "mb-0 p-0" }, [i("li", { staticClass: "list-item" }, [i("wire-link", { staticClass: "text-right bg-transparent hover-danger m-0 border-0 text-grey", attrs: { href: "/logout", method: "post", as: "button" }, on: { click: function (e) { return t.$emit("update:show", !1) } } }, [i("i", { staticClass: "material-icons" }, [t._v("power_settings_new")]), t._v(" خروج ")])], 1)])]) : i("div", { staticClass: "useroptions" }, [i("ul", { staticClass: "p-0 menu" }, [i("li", { staticClass: "list-item d-flex flex-column" }, [i("a", { staticClass: "clickable m-0", on: { click: function (e) { t.$emit("update:show", !1), t.showLogin = !0 } } }, [i("i", { staticClass: "material-icons-outlined" }, [t._v("login")]), t._v(" ورود ")])]), t._v(" "), i("li", { staticClass: "list-item d-flex flex-column" }, [i("a", { staticClass: "clickable m-0", on: { click: function (e) { t.$emit("update:show", !1), t.showSignup = !0 } } }, [i("i", { staticClass: "material-icons-outlined" }, [t._v("account_circle")]), t._v(" ثبت‌نام ")])])])])])], 1) }), [], !1, null, null, null).exports, p = { created: function () { this.searchVal = this.$store.state.search }, data: function () { return { searchVal: null, showOptions: !1 } }, methods: { search: function (t) { var e = this, i = document.getElementById("searchforminput").parentElement; return i.style.position = "unset", i.getElementsByClassName("autocomplete-result-list").length > 0 && (i.getElementsByClassName("autocomplete-result-list")[0].style.width = i.getBoundingClientRect().width + "px", i.getElementsByClassName("autocomplete-result-list")[0].style.marginTop = "-14px"), t.length < 2 ? [] : new Promise((function (i, n) { axios.post(e.$APP_URL + "/search", { q: t }).then((function (t) { t.data.result ? i(t.data.suggestions) : i([]) })) })) } }, name: "AppHeader", components: { HeaderToolbar: c, Autocomplete: n.Z, UserOptionModal: u } }; const m = (0, r.Z)(p, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { staticClass: "header" }, [i("user-option-modal", { attrs: { show: t.showOptions }, on: { "update:show": function (e) { t.showOptions = e } } }), t._v(" "), i("div", { staticClass: "container" }, [i("div", { staticClass: "d-flex align-items-center w-100" }, [t.$root.isDesktop ? i("wire-link", { staticClass: "logodesktop", attrs: { href: "/feed" } }, [i("img", { staticClass: "w-100", attrs: { src: "/images/farsi-logo.png" } })]) : t._e(), t._v(" "), t.$root.isDesktop ? t._e() : i("wire-link", { staticClass: "logo-sm", attrs: { href: "/feed" } }, [i("img", { staticClass: "mr-2", attrs: { src: "/images/logo.svg" } })]), t._v(" "), i("form", { staticClass: "searchfield d-flex mr-3", attrs: { method: "get", action: "/search" } }, [i("autocomplete", { staticClass: "search-field w-100", attrs: { "default-value": t.searchVal, search: t.search, id: "searchforminput", autocomplete: "off", required: "", type: "text", name: "q", placeholder: "هر چیزی که در جستن آنی، آنی" } }), t._v(" "), t._m(0)], 1), t._v(" "), t.$root.isDesktop ? t._e() : i("div", [i("i", { staticClass: "material-icons hover-dark clickable", on: { click: function (e) { t.showOptions = !0 } } }, [t._v("more_vert")])])], 1), t._v(" "), t.$root.isDesktop ? i("div", { staticClass: "d-flex align-items-center justify-content-end", staticStyle: { "min-width": "400px" } }, [i("header-toolbar")], 1) : t._e()])], 1) }), [function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { staticClass: "text-muted align-items-center justify-content-center d-lg-flex d-none nowrap font-12", staticStyle: { width: "max-content", "margin-right": "24px !important" } }, [i("img", { staticClass: "verical-middle", attrs: { src: "/images/beta.svg", width: "36" } }), t._v(" "), i("span", { staticClass: "mx-1 text-nowrap", staticStyle: { "margin-top": "3px" } }, [t._v("۰.۶ V")])]) }], !1, null, null, null).exports }, 6214: (t, e, i) => { "use strict"; i.d(e, { Z: () => c }); const n = { props: { type: { type: String, default: "voting" } } }; var s = i(1900); const o = (0, s.Z)(n, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return "voting" !== t.type ? i("div", { staticClass: "feedback-label", class: "feedback-color-" + t.type }, [t._t("default")], 2) : t._e() }), [], !1, null, null, null).exports; var a = i(1401), r = i.n(a); const l = { data: function () { return { voted: !1, loading: !1, votes: 0, bookmarked: !1 } }, created: function () { this.votes = this.idea.votes, this.voted = this.idea.voted, this.bookmarked = this.idea.isBookmarked }, methods: { bookmark: function () { this.bookmarked = !this.bookmarked, axios.post(this.$APP_URL + "/ideas/bookmark", { id: this.idea.id }) }, voteIdea: function () { var t = this; this.loading = !0, axios.post(this.$APP_URL + "/ideas/vote", { idea: this.idea.id }).then((function (e) { e.data.result && (t.voted = e.data.vote, e.data.vote ? t.votes++ : t.votes--) })).catch((function (e) { t.$toast("خطا در برقراری ارتباط") })).then((function () { t.loading = !1 })) } }, computed: { ideaStatus: function () { return "done" === this.idea.status ? "انجام شده" : "scheduled" === this.idea.status ? "برنامه‌ریزی شده" : "closed" === this.idea.status ? "بسته شده" : "" }, createDate: function () { return new (r())(Date.parse(this.idea.created_at)).format("D MMMM YYYY") } }, props: { idea: { type: Object, default: void 0, required: !0 } }, components: { FeedbackLabel: o } }; const c = (0, s.Z)(l, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { staticClass: "idea-card" }, [i("div", { staticClass: "card-body" }, [i("div", { staticClass: "row" }, [i("div", { staticClass: "col-md-2" }, [i("div", { staticClass: "vote-box" }, [i("div", { staticClass: "idea-votes" }, [t._v("\n\t\t\t\t\t\t" + t._s(t.votes) + "\n\t\t\t\t\t")]), t._v(" "), "scheduled" !== t.idea.status && "done" !== t.idea.status ? i("loading-button", { staticClass: "btn mt-2 btn-dark w-100", class: { voted: t.voted }, attrs: { loading: t.loading }, nativeOn: { click: function (e) { return t.voteIdea(e) } } }, [t._v("\n\t\t\t\t\t\t" + t._s(t.voted ? "ثبت شده" : "ثبت رای") + "\n\t\t\t\t\t")]) : t._e()], 1)]), t._v(" "), i("div", { staticClass: "col-md-10" }, [i("div", { staticClass: "idea-title mb-2" }, [i("div", [i("wire-link", { attrs: { href: "/ideas/" + t.idea.id } }, [i("strong", [t._v(t._s(t.idea.title))])]), t._v(" "), i("i", { staticClass: "material-icons text-grey clickable", on: { click: t.bookmark } }, [t._v("\n\t\t\t\t\t\t\t" + t._s(t.bookmarked ? "flag" : "outlined_flag") + "\n\t\t\t\t\t\t")])], 1), t._v(" "), i("feedback-label", { attrs: { type: t.idea.status } }, [t._v(" " + t._s(t.ideaStatus) + " ")])], 1), t._v(" "), i("p", [t._v("\n\t\t\t\t\t" + t._s(t.idea.description) + "\n\t\t\t\t")]), t._v(" "), i("div", { staticClass: "d-flex align-items-center font-12" }, [i("wire-link", { staticClass: "d-flex align-items-center ml-2", attrs: { href: "/" + t.idea.user.username } }, [i("lazy-image", { staticClass: "my-0 ml-1", attrs: { src: t.idea.user.profile, "img-class": "profile-sm" } }), t._v(" "), i("strong", { staticClass: "text-grey" }, [t._v(" " + t._s(t.idea.user.name))])], 1), t._v(" "), i("span", { staticClass: "text-grey ml-1" }, [t._v("این ایده را به اشتراک گذاشته است")]), t._v(" "), i("span", { staticClass: "mx-2" }, [t._v(".")]), t._v(" "), i("strong", { staticClass: "text-grey" }, [t._v(t._s(t.createDate))]), t._v(" "), i("span", { staticClass: "mx-2" }, [t._v(".")]), t._v(" "), i("span", { staticClass: "text-grey" }, [t._v(t._s(t.idea.replies.length) + " نظر ")])], 1)])])])]) }), [], !1, null, null, null).exports }, 4543: (t, e, i) => { "use strict"; i.d(e, { Z: () => a }); var n = i(9949), s = i(516); const o = { methods: { cropImage: function () { var t = this, e = this.$refs.cropper.getResult(), i = e.canvas, n = e.coordinates; i.toBlob((function (e) { t.$emit("cropped", n, i), t.$emit("update:show", !1) })) } }, props: { image: { default: void 0, required: !0 }, aspectRatio: { default: 16 / 12, required: !1 }, title: { type: String, default: void 0, required: !0 } }, components: { Cropper: s.fl }, mixins: [n.Z] }; const a = (0, i(1900).Z)(o, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("b-modal", { attrs: { "no-close-on-backdrop": "", "hide-footer": "", title: t.title, size: "lg", centered: !0 }, model: { value: t.showModal, callback: function (e) { t.showModal = e }, expression: "showModal" } }, [i("cropper", { ref: "cropper", staticClass: "cropper", attrs: { src: t.image, "stencil-props": { aspectRatio: t.aspectRatio } } }), t._v(" "), i("div", { staticClass: "w-100 align-items-center py-3 px-2 d-flex" }, [i("button", { staticClass: "btn btn-primary", on: { click: t.cropImage } }, [t._v("تایید")])])], 1) }), [], !1, null, null, null).exports }, 9539: (t, e, i) => { "use strict"; i.d(e, { Z: () => c }); var n = i(9949), s = i(222); const o = { data: function () { return { input: void 0, loading: !1, passwordChage: !1, resetCode: void 0, password: void 0, password1: void 0 } }, methods: { changePassord: function () { var t = this; this.loading = !0, axios.post("updatepassword", { newpassword: this.password, code: this.resetCode }).then((function (e) { var i = e.data; !1 !== i ? i.result ? t.$store.state.ternoboWireApp.visit("/feed") : t.handleError(i.errors) : t.toast("همه فیلد‌ها اجباری است") })).then((function () { return t.loading = !1 })) }, sendResetCode: function () { var t = this; this.loading = !0, axios.post("rest-password", { input: this.input }).then((function (e) { var i = e.data; !1 !== i ? i.result ? (t.toast(i.msg), t.passwordChage = !0) : t.handleError(i.errors) : t.toast("همه فیلد‌ها اجباری است") })).then((function () { return t.loading = !1 })) } }, components: { MaterialTextField: i(2665).Z }, mixins: [n.Z], name: "ResetPasswordModal" }; var a = i(1900); const r = (0, a.Z)(o, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("b-modal", { attrs: { "hide-footer": "", "hide-header": "", centered: !0 }, model: { value: t.showModal, callback: function (e) { t.showModal = e }, expression: "showModal" } }, [i("div", { staticClass: "d-flex w-100 justify-content-center aling-items-center" }, [i("h5", { staticClass: "mt-0 font-16 text-center mb-4 w-25", staticStyle: { "border-bottom": "1px solid #000019", width: "fit-content", "align-self": "center", "margin-top": "20px", "padding-bottom": "10px", "padding-left": "0", "padding-right": "0" } }, [t._v("بازیابی رمزعبور")]), t._v(" "), i("div", { staticStyle: { position: "absolute", left: "20px" }, on: { click: function (e) { return t.$emit("back") } } }, [i("a", { staticClass: "text-muted hover-dark clickable" }, [t._v("بازگشت")])])]), t._v(" "), t.passwordChage ? i("div", { staticClass: "signup-login d-flex flex-column align-items-center justify-content-center clearfix" }, [i("MaterialTextField", { staticClass: "material--sm mb-3", attrs: { placeholder: "کد بازیابی" }, model: { value: t.resetCode, callback: function (e) { t.resetCode = e }, expression: "resetCode" } }), t._v(" "), i("MaterialTextField", { staticClass: "material--sm mb-3", attrs: { type: "password", placeholder: "رمزعبور جدید" }, model: { value: t.password, callback: function (e) { t.password = e }, expression: "password" } }), t._v(" "), i("MaterialTextField", { staticClass: "material--sm mb-3", attrs: { type: "password", placeholder: "تکرار رمزعبور جدید" }, model: { value: t.password1, callback: function (e) { t.password1 = e }, expression: "password1" } }), t._v(" "), i("loading-button", { staticClass: "btn btn-dark mt-2 w-50", attrs: { loading: t.loading, type: "button" }, nativeOn: { click: function (e) { return t.changePassord(e) } } }, [t._v(" تغییر رمزعبور ")])], 1) : i("div", { ref: "loginForm", staticClass: "signup-login d-flex flex-column align-items-center justify-content-center clearfix", attrs: { action: "javascript:;" } }, [i("div", { staticClass: "w-100" }, [i("input", { directives: [{ name: "model", rawName: "v-model", value: t.input, expression: "input" }], staticClass: "form-control bg-transparent mb-2", attrs: { type: "text", name: "username", placeholder: "تلفن، ایمیل یا شناسه" }, domProps: { value: t.input }, on: { input: function (e) { e.target.composing || (t.input = e.target.value) } } })]), t._v(" "), i("loading-button", { staticClass: "btn btn-dark mt-2 w-50", attrs: { loading: t.loading, type: "button" }, nativeOn: { click: function (e) { return t.sendResetCode(e) } } }, [t._v(" ارسال کد بازیابی ")])], 1)]) }), [], !1, null, null, null).exports, l = { data: function () { return { password: void 0, username: void 0, resetpass: !1, loading: !1, loginStep: !0, VerifyStep: !1, recovery: !1, code: null, verifyText: "کد نمایان شده در اپلیکیشن تایید هویت را اینجا وارد کنید" } }, methods: { onHide: function () { this.password = void 0, this.username = void 0, this.VerifyStep = !1, this.loginStep = !0, this.resetpass = !1, this.recovery = !1, this.code = null }, verifyCode: function () { var t = this; if (null != this.code) { this.loading = !0; var e = { code: this.code }; this.recovery && (e.type = "recovery"), axios.post("/auth/verify-tfa", e).then((function (e) { e.data.result ? window.location = "/feed" : t.toast("کد ورودی نامعتبر است"), t.loading = !1 })).catch((function (e) { return t.loading = !0 })) } }, login: function () { var t = this; if (void 0 !== this.username && "" !== this.username && void 0 !== this.password && "" !== this.password) { this.loading = !0; var e = new FormData; e.append("username", this.username), e.append("password", this.password); var i = { method: "post", url: this.$APP_URL + "/auth/login", data: e }; axios(i).then((function (e) { if (e.data.result) window.location = "/feed"; else if (e.data.two_factor) t.loginStep = !1, t.VerifyStep = !0, "email" == e.data.type ? t.verifyText = "کد ارسال شده با ایمیل خود را وارد کنید" : "phone" == e.data.type && (t.verifyText = "کد ارسال شده با تلفن‌ خود را وارد کنید"); else { var i = e.data.errors; Object.keys(i).forEach((function (e, n) { t.$bvToast.toast(i[e][0], { noCloseButton: !0, toaster: "b-toaster-bottom-left", bodyClass: ["bg-dark", "text-right", "text-white"], solid: !0 }) })) } t.loading = !1 })).catch((function (e) { t.loading = !1, t.$bvToast.toast("خطا در برقراری ارتباط", { noCloseButton: !0, toaster: "b-toaster-bottom-left", bodyClass: ["bg-dark", "text-right", "text-white"], solid: !0 }) })) } } }, mixins: [n.Z], components: { ResetPasswordModal: r, OtpInput: s.Z }, name: "LoginModal" }; const c = (0, a.Z)(l, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", [i("ResetPasswordModal", { attrs: { show: t.resetpass }, on: { "update:show": function (e) { t.resetpass = e }, back: function (e) { t.resetpass = !1, t.showModal = !0 } } }), t._v(" "), i("b-modal", { attrs: { "hide-footer": "", "hide-header": "", "no-stacking": "", centered: !0 }, on: { hide: t.onHide }, model: { value: t.showModal, callback: function (e) { t.showModal = e }, expression: "showModal" } }, [i("div", { staticClass: "d-flex flex-column w-100 aling-items-center" }, [i("h5", { staticClass: "mt-0 font-16 text-center mb-4 w-25", staticStyle: { "border-bottom": "1px solid #000019", width: "fit-content", "align-self": "center", "margin-top": "20px", "padding-bottom": "10px", "padding-left": "0", "padding-right": "0" } }, [t._v("ورود")])]), t._v(" "), t.loginStep ? i("div", { ref: "loginForm", staticClass: "signup-login d-flex flex-column align-items-center justify-content-center clearfix", attrs: { method: "POST", action: "javascript:;" }, on: { keydown: function (e) { return !e.type.indexOf("key") && t._k(e.keyCode, "enter", 13, e.key, "Enter") ? null : t.login(e) } } }, [i("div", { staticClass: "w-100" }, [i("material-text-field", { staticClass: "material--sm w-100 bg-transparent mb-2", attrs: { type: "text", "input-class": "w-100", name: "username", placeholder: "تلفن، ایمیل یا شناسه" }, model: { value: t.username, callback: function (e) { t.username = e }, expression: "username" } })], 1), t._v(" "), i("div", { staticClass: "w-100", staticStyle: { "margin-top": "12px" } }, [i("material-text-field", { staticClass: "material--sm w-100 bg-transparent", attrs: { type: "password", "input-class": "w-100", name: "password", placeholder: "رمزعبور" }, model: { value: t.password, callback: function (e) { t.password = e }, expression: "password" } }), t._v(" "), i("a", { staticClass: "text-primary float-left font-11 clickable", staticStyle: { "margin-top": "3px" }, on: { click: function (e) { t.resetpass = !0 } } }, [t._v("فراموشی رمزعبور")])], 1), t._v(" "), i("loading-button", { staticClass: "btn btn-dark mt-2", attrs: { loading: t.loading, type: "button" }, nativeOn: { click: function (e) { return t.login(e) } } }, [t._v(" ورود ")])], 1) : t.VerifyStep ? i("div", { ref: "loginForm", staticClass: "signup-login d-flex flex-column align-items-center justify-content-center clearfix", attrs: { method: "POST", action: "javascript:;" }, on: { keydown: function (e) { return !e.type.indexOf("key") && t._k(e.keyCode, "enter", 13, e.key, "Enter") ? null : t.verifyCode(e) } } }, [i("p", { staticClass: "mb-3" }, [t._v(t._s(t.verifyText))]), t._v(" "), i("div", { staticClass: "text-left mb-3" }, [t.recovery ? t._e() : i("otp-input", { staticClass: "material--sm mb-1 text-center", attrs: { "input-class": "w-100", numInputs: 6 }, on: { completed: t.verifyCode }, model: { value: t.code, callback: function (e) { t.code = e }, expression: "code" } }), t._v(" "), t.recovery ? t._e() : i("small", { staticClass: "text-muted clickable", on: { click: function (e) { t.recovery = !0 } } }, [t._v("استفاده از کد بازیابی")]), t._v(" "), t.recovery ? i("input", { directives: [{ name: "model", rawName: "v-model", value: t.code, expression: "code" }], staticClass: "form-control", attrs: { placeholder: "کد بازیابی را وارد کنید", maxlength: "8" }, domProps: { value: t.code }, on: { input: function (e) { e.target.composing || (t.code = e.target.value) } } }) : t._e(), t._v(" "), t.recovery ? i("small", { staticClass: "text-muted clickable", on: { click: function (e) { t.recovery = !1 } } }, [t._v("استفاده از کد تایید")]) : t._e()], 1), t._v(" "), i("loading-button", { staticClass: "btn btn-dark", attrs: { loading: t.loading }, nativeOn: { click: function (e) { return t.verifyCode(e) } } }, [t._v("تایید")])], 1) : t._e()])], 1) }), [], !1, null, null, null).exports }, 738: (t, e, i) => { "use strict"; i.d(e, { Z: () => l }); var n = i(9949), s = i(7430), o = i(9536), a = i(222); const r = { methods: { updateProfile: function () { this.$store.state.ternoboWireApp.visit("/feed") }, sendVcode: function (t) { this.loading = !0; var e = this, i = new FormData; "email" === t ? i.append("email", this.email) : i.append("phone", this.phone_number); var n = { method: "post", url: this.$APP_URL + "/auth/verification", data: i }; axios(n).then((function (t) { if (t.data.result) e.emailphone_step = !1, e.verification_step = !0; else { var i = t.data.errors; e.handleError(i) } e.loading = !1 })).catch((function (t) { e.loading = !1 })) }, verifyCode: function () { var t = this; this.loading = !0; var e = this, i = new FormData; i.append("code", this.code); var n = { method: "post", url: this.$APP_URL + "/auth/verifycode", data: i }; axios(n).then((function (e) { e.data.result ? (t.verification_step = !1, t.personal_info_step = !0, t.invalidCode = !1) : t.invalidCode = !0, t.loading = !1 })).catch((function (t) { e.loading = !1 })).then((function () { return t.completedCode = !0 })) }, savePersonal: function () { this.loading = !0; var t = this, e = new FormData; void 0 !== this.first_name && "" !== this.first_name && e.append("firstname", this.first_name), void 0 !== this.last_name && "" !== this.last_name && e.append("lastname", this.last_name), void 0 !== this.username && "" !== this.username && e.append("username", this.username), void 0 !== this.gender && e.append("gender", this.gender.code); var i = { method: "post", url: this.$APP_URL + "/auth/signup", data: e }; axios(i).then((function (e) { if (e.data.result) t.personal_info_step = !1, t.password_step = !0; else { var i = e.data.errors; t.handleError(i) } t.loading = !1 })).catch((function (e) { t.loading = !1 })) }, savePassword: function () { var t = this, e = new FormData; if (this.password === this.password_repeat) { this.loading = !0, e.append("password", this.password); var i = { method: "post", url: this.$APP_URL + "/auth/setpassword", data: e }; axios(i).then((function (e) { if (e.data.result) t.password_step = !1, t.profile_step = !0; else { var i = e.data.errors; t.handleError(i) } t.loading = !1 })).catch((function (e) { t.loading = !1 })) } else this.toast("رمزعبور و تاییدیه آن برابر نیست") } }, data: function () { return { emailphone_step: !0, verification_step: !1, personal_info_step: !1, profile_step: !1, password_step: !1, phone_number: void 0, email: void 0, code: void 0, first_name: "", last_name: "", username: "", gender: void 0, password: "", password_repeat: "", profile: "/images/man-profile.png", loading: !1, invalidCode: !1, completedCode: !1 } }, mixins: [n.Z], name: "SignupModal", components: { LoadingButton: s.Z, ProfileImage: o.Z, OtpInput: a.Z } }; const l = (0, i(1900).Z)(r, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("b-modal", { attrs: { "hide-footer": "", "hide-header": "", "body-class": "modal-signup", centered: !0 }, model: { value: t.showModal, callback: function (e) { t.showModal = e }, expression: "showModal" } }, [t.verification_step || t.emailphone_step ? i("tabs", { on: { selected: function (e) { t.emailphone_step = !0, t.verification_step = !1 } } }, [i("tab", { attrs: { name: "ایمیل", selected: !0 } }, [i("div", { staticClass: "input-group ephone-input-group d-flex align-items-center", on: { keydown: function (e) { return !e.type.indexOf("key") && t._k(e.keyCode, "enter", 13, e.key, "Enter") ? null : t.sendVcode("email") } } }, [t.verification_step ? i("i", { staticClass: "material-icons-outlined text-superlight hover-danger", on: { click: function (e) { t.emailphone_step = !0, t.verification_step = !1 } } }, [t._v("edit")]) : i("LoadingButton", { staticClass: "signup-save-btn btn btn-dark", attrs: { loading: t.loading }, nativeOn: { click: function (e) { return t.sendVcode("email") } } }, [t._v("ثبت")]), t._v(" "), i("input", { directives: [{ name: "model", rawName: "v-model", value: t.email, expression: "email" }], staticClass: "form-control mx-1 text-left", attrs: { dir: "ltr", "input-class": "w-100", type: "email", readonly: t.verification_step, placeholder: "example@ternobo.com" }, domProps: { value: t.email }, on: { input: function (e) { e.target.composing || (t.email = e.target.value) } } })], 1)]), t._v(" "), i("tab", { attrs: { name: "شماره همراه" } }, [i("div", { staticClass: "input-group ephone-input-group d-flex align-items-center", on: { keydown: function (e) { return !e.type.indexOf("key") && t._k(e.keyCode, "enter", 13, e.key, "Enter") ? null : t.sendVcode("phone") } } }, [t.verification_step ? i("i", { staticClass: "material-icons-outlined text-superlight hover-danger", on: { click: function (e) { t.emailphone_step = !0, t.verification_step = !1 } } }, [t._v("edit")]) : i("LoadingButton", { staticClass: "signup-save-btn btn btn-dark", attrs: { loading: t.loading }, nativeOn: { click: function (e) { return t.sendVcode("phone") } } }, [t._v("ثبت")]), t._v(" "), i("input", { directives: [{ name: "model", rawName: "v-model", value: t.phone_number, expression: "phone_number" }], staticClass: "form-control mx-1 text-left", attrs: { dir: "ltr", type: "tel", readonly: t.verification_step, placeholder: "09123456789" }, domProps: { value: t.phone_number }, on: { input: function (e) { e.target.composing || (t.phone_number = e.target.value) } } })], 1)])], 1) : t._e(), t._v(" "), i("transition", { attrs: { name: "slide" } }, [t.verification_step ? i("div", { staticClass: "text-center" }, [i("div", { staticClass: "input-group d-flex align-items-center flex-column justify-content-center mt-4" }, [i("label", { staticClass: "w-100" }, [t._v("کد "), i("strong", [t._v("تایید")]), t._v(" ارسال شده ‌را وارد کنید")]), t._v(" "), i("div", { staticClass: "d-flex justify-content-center" }, [i("div", { staticClass: "d-flex align-items-center" }, [i("otp-input", { staticClass: "material--sm mx-1 text-center", attrs: { "input-class": "w-100", numInputs: 6 }, on: { completed: t.verifyCode }, model: { value: t.code, callback: function (e) { t.code = e }, expression: "code" } }), t._v(" "), i("i", { staticClass: "material-icons-outlined mr-4", class: { "text-muted": !t.invalidCode && !t.completedCode, "text-danger": t.invalidCode, "text-success": !t.invalidCode } }, [t._v("verified_user")])], 1)])]), t._v(" "), i("LoadingButton", { staticClass: "btn btn-dark mt-4", attrs: { loading: t.loading }, nativeOn: { click: function (e) { return t.verifyCode(e) } } }, [t._v("بعدی")])], 1) : t._e()]), t._v(" "), i("transition", { attrs: { name: "slide" } }, [t.personal_info_step ? i("div", { staticClass: "text-center" }, [i("h5", { staticClass: "mb-4", staticStyle: { "border-bottom": "2px solid #000019", width: "fit-content", "align-self": "center", "margin-top": "20px", margin: "auto", "padding-bottom": "10px", "padding-left": "0", "padding-right": "0" } }, [t._v("اطلاعات تکمیلی")]), t._v(" "), i("div", [i("material-text-field", { staticClass: "material--sm mb-3", attrs: { "input-class": "w-100", placeholder: "نام" }, model: { value: t.first_name, callback: function (e) { t.first_name = e }, expression: "first_name" } }), t._v(" "), i("material-text-field", { staticClass: "material--sm mb-3", attrs: { "input-class": "w-100", placeholder: "نام خانوادگی" }, model: { value: t.last_name, callback: function (e) { t.last_name = e }, expression: "last_name" } }), t._v(" "), i("material-text-field", { staticClass: "material--sm mb-3", attrs: { "input-class": "w-100", placeholder: "نام کاربری" }, model: { value: t.username, callback: function (e) { t.username = e }, expression: "username" } }), t._v(" "), i("v-select", { staticClass: "datepicker-list", attrs: { placeholder: "جنسیت", dir: "rtl", options: [{ label: "زن", code: "1" }, { label: "مرد", code: "2" }] }, scopedSlots: t._u([{ key: "no-options", fn: function () { return [t._v("موردی یافت نشد")] }, proxy: !0 }], null, !1, 1105869603), model: { value: t.gender, callback: function (e) { t.gender = e }, expression: "gender" } })], 1), t._v(" "), i("LoadingButton", { staticClass: "btn btn-dark mx-auto mt-4 signup-save-btn", attrs: { loading: t.loading, disabled: !(t.first_name.length > 0 && t.last_name.length > 0 && t.username.length > 0 && null != t.gender) }, nativeOn: { click: function (e) { return t.savePersonal(e) } } }, [t._v("بعدی")])], 1) : t._e()]), t._v(" "), i("transition", { attrs: { name: "slide" } }, [t.password_step ? i("div", { staticClass: "text-center" }, [i("h5", { staticClass: "mb-4", staticStyle: { "border-bottom": "2px solid #000019", margin: "auto", width: "fit-content", display: "flex", "justify-content": "center", "margin-top": "20px", "padding-bottom": "10px", "padding-left": "0", "padding-right": "0" } }, [t._v("رمزعبور")]), t._v(" "), i("div", { staticClass: "d-flex flex-column", staticStyle: { "align-items": "center" } }, [i("material-text-field", { staticClass: "material--sm w-50 mx-1 text-right", attrs: { "input-class": "w-100", type: "password", placeholder: "رمزعبور" }, model: { value: t.password, callback: function (e) { t.password = e }, expression: "password" } }), t._v(" "), i("material-text-field", { staticClass: "material--sm w-50 mx-1 text-right mt-3", attrs: { "input-class": "w-100", type: "password", placeholder: "تکرار رمزعبور" }, model: { value: t.password_repeat, callback: function (e) { t.password_repeat = e }, expression: "password_repeat" } })], 1), t._v(" "), i("div", { staticClass: "text-right mt-5 mx-auto", staticStyle: { "max-width": "80%" } }, [i("p", { staticClass: "font-18 pr-3" }, [t._v("نکات امنیتی")]), t._v(" "), i("ul", { staticClass: "font-14 pr-3", staticStyle: { "list-style": "none" } }, [i("li", [t._v("رمزعبور حداقل ۸ کاراکتر باشد")]), t._v(" "), i("li", [t._v("بهتر است که از حروف کوچک، بزرگ و سمبل‌ها در رمزعبور خود استفاده کنید.")])])]), t._v(" "), i("LoadingButton", { staticClass: "btn btn-dark mx-auto mt-4 signup-save-btn", attrs: { loading: t.loading, disabled: !(t.password.length > 0 && t.password.length) }, nativeOn: { click: function (e) { return t.savePassword(e) } } }, [t._v("بعدی")])], 1) : t._e()]), t._v(" "), i("transition", { attrs: { name: "slide" } }, [t.profile_step ? i("div", { staticClass: "d-flex flex-column align-items-center" }, [i("ProfileImage", { staticClass: "m-0", attrs: { canChange: !0, src: t.$APP_URL + "/images/man-profile.png" }, on: { updated: t.updateProfile } }), t._v(" "), i("div", { staticClass: "d-flex mt-4 flex-column" }, [i("span", { staticClass: "text-center" }, [t._v("تصویر خود را وارد کنید")]), t._v(" "), i("wire-link", { staticClass: "btn btn-dark mx-auto mt-4 signup-save-btn", staticStyle: { "white-space": "nowrap" }, attrs: { href: "/feed", loading: t.loading } }, [t._v("رد شدن")])], 1)], 1) : t._e()])], 1) }), [], !1, null, null, null).exports }, 8775: (t, e, i) => { "use strict"; i.d(e, { Z: () => l }); const n = {}; var s = i(3379), o = i.n(s), a = i(8063), r = { insert: "head", singleton: !1 }; o()(a.Z, r); a.Z.locals; const l = (0, i(1900).Z)(n, (function () { var t = this, e = t.$createElement; return (t._self._c || e)("div", { staticClass: "no-content" }, [t._t("default", [t._v("\n        هیچ محتوایی وجود ندارد\n    ")])], 2) }), [], !1, null, "0257f0e1", null).exports }, 222: (t, e, i) => { "use strict"; i.d(e, { Z: () => r }); const n = { name: "SingleOtpInput", props: { value: { type: String }, separator: { type: String }, focus: { type: Boolean }, inputClasses: { type: String }, shouldAutoFocus: { type: Boolean }, inputType: { type: String, default: function () { return "tel" } }, isLastChild: { type: Boolean } }, data: function () { return { model: this.value || "" } }, mounted: function () { this.$refs.input && this.focus && this.shouldAutoFocus && this.$refs.input.focus() }, watch: { value: function (t, e) { t !== e && (this.model = t) }, focus: function (t, e) { e !== t && this.$refs.input && this.focus && (this.$refs.input.focus(), this.$refs.input.select()) } }, methods: { handleOnChange: function () { return this.model.length > 1 && (this.model = this.model.slice(0, 1)), this.$emit("on-change", this.model) }, handleOnKeyDown: function (t) { var e = t || window.event, i = e.which ? e.which : e.keyCode; this.isCodeNumeric(i) || 8 === i || 86 === i || 46 === i ? this.$emit("on-keydown", t) : e.preventDefault() }, isCodeNumeric: function (t) { return t >= 48 && t <= 57 || t >= 96 && t <= 105 }, handleOnPaste: function (t) { return this.$emit("on-paste", t) }, handleOnFocus: function () { return this.$refs.input.select(), this.$emit("on-focus") }, handleOnBlur: function () { return this.$emit("on-blur") } } }; var s = i(1900); const o = (0, s.Z)(n, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { staticStyle: { display: "flex", "align-items": "center" } }, [i("div", t._g({ staticClass: "otp-input-single material-textfield material--transparent material--sm" }, t.$listeners), ["checkbox" === t.inputType ? i("input", { directives: [{ name: "model", rawName: "v-model", value: t.model, expression: "model" }], ref: "input", staticClass: "input", class: t.inputClasses, attrs: { min: "0", max: "9", maxlength: "1", pattern: "[0-9]", type: "checkbox" }, domProps: { checked: Array.isArray(t.model) ? t._i(t.model, null) > -1 : t.model }, on: { input: t.handleOnChange, keydown: t.handleOnKeyDown, paste: t.handleOnPaste, focus: t.handleOnFocus, blur: t.handleOnBlur, change: function (e) { var i = t.model, n = e.target, s = !!n.checked; if (Array.isArray(i)) { var o = t._i(i, null); n.checked ? o < 0 && (t.model = i.concat([null])) : o > -1 && (t.model = i.slice(0, o).concat(i.slice(o + 1))) } else t.model = s } } }) : "radio" === t.inputType ? i("input", { directives: [{ name: "model", rawName: "v-model", value: t.model, expression: "model" }], ref: "input", staticClass: "input", class: t.inputClasses, attrs: { min: "0", max: "9", maxlength: "1", pattern: "[0-9]", type: "radio" }, domProps: { checked: t._q(t.model, null) }, on: { input: t.handleOnChange, keydown: t.handleOnKeyDown, paste: t.handleOnPaste, focus: t.handleOnFocus, blur: t.handleOnBlur, change: function (e) { t.model = null } } }) : i("input", { directives: [{ name: "model", rawName: "v-model", value: t.model, expression: "model" }], ref: "input", staticClass: "input", class: t.inputClasses, attrs: { min: "0", max: "9", maxlength: "1", pattern: "[0-9]", type: t.inputType }, domProps: { value: t.model }, on: { input: [function (e) { e.target.composing || (t.model = e.target.value) }, t.handleOnChange], keydown: t.handleOnKeyDown, paste: t.handleOnPaste, focus: t.handleOnFocus, blur: t.handleOnBlur } })])]) }), [], !1, null, null, null).exports; const a = { name: "OtpInput", components: { SingleOtpInput: o }, props: { numInputs: { default: 4 }, separator: { type: String, default: "**" }, inputClasses: { type: String }, inputType: { type: String, validator: function (t) { return ["number", "tel", "password"].includes(t) } }, shouldAutoFocus: { type: Boolean, default: !1 } }, data: function () { return { activeInput: 0, otp: [], oldOtp: [] } }, methods: { handleOnFocus: function (t) { this.activeInput = t }, handleOnBlur: function () { this.activeInput = -1 }, checkFilledAllInputs: function () { return this.otp.join("").length === this.numInputs ? (this.$emit("input", this.otp.join("")), this.$emit("completed"), this.$emit("input", this.otp.join(""))) : "Wait until the user enters the required number of characters" }, focusInput: function (t) { this.activeInput = Math.max(Math.min(this.numInputs - 1, t), 0) }, focusNextInput: function () { this.focusInput(this.activeInput + 1) }, focusPrevInput: function () { this.focusInput(this.activeInput - 1) }, changeCodeAtFocus: function (t) { this.oldOtp = Object.assign([], this.otp), this.$set(this.otp, this.activeInput, t), this.oldOtp.join("") !== this.otp.join("") && (this.$emit("on-change", this.otp.join("")), this.checkFilledAllInputs()) }, handleOnPaste: function (t) { t.preventDefault(); var e = t.clipboardData.getData("text/plain").slice(0, this.numInputs - this.activeInput).split(""); if ("number" === this.inputType && !e.join("").match(/^\d+$/)) return "Invalid pasted data"; var i = this.otp.slice(0, this.activeInput).concat(e); return this.$set(this, "otp", i.slice(0, this.numInputs)), this.focusInput(i.slice(0, this.numInputs).length), this.checkFilledAllInputs() }, handleOnChange: function (t) { this.changeCodeAtFocus(t), this.focusNextInput() }, clearInput: function () { this.otp.length > 0 && this.$emit("on-change", ""), this.otp = [], this.activeInput = 0 }, handleOnKeyDown: function (t) { switch (t.keyCode) { case 8: t.preventDefault(), this.changeCodeAtFocus(""), this.focusPrevInput(); break; case 46: t.preventDefault(), this.changeCodeAtFocus(""); break; case 37: t.preventDefault(), this.focusPrevInput(); break; case 39: t.preventDefault(), this.focusNextInput() } } } }; const r = (0, s.Z)(a, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { staticStyle: { display: "flex", "flex-direction": "row-reverse" } }, ["password" === t.inputType ? i("input", { staticStyle: { display: "none" }, attrs: { autocomplete: "off", name: "hidden", type: "text" } }) : t._e(), t._v(" "), t._l(t.numInputs, (function (e, n) { return i("single-otp-input", { key: n, attrs: { focus: t.activeInput === n, value: t.otp[n], separator: t.separator, "input-type": t.inputType, "input-classes": t.inputClasses, "is-last-child": n === t.numInputs - 1, "should-auto-focus": t.shouldAutoFocus }, on: { "on-change": t.handleOnChange, "on-keydown": t.handleOnKeyDown, "on-paste": t.handleOnPaste, "on-focus": function (e) { return t.handleOnFocus(n) }, "on-blur": t.handleOnBlur } }) }))], 2) }), [], !1, null, null, null).exports }, 9536: (t, e, i) => { "use strict"; i.d(e, { Z: () => o }); var n = i(4543); const s = { watch: { src: function (t) { this.picture = t } }, created: function () { this.picture = this.src }, props: { canChange: { type: Boolean, default: !1, required: !1 }, src: { type: String, default: void 0, required: !0 }, size: { type: String, default: "profile-xlg", required: !1 } }, methods: { openFileSelect: function () { this.canChange && this.$refs.imageFile.click() }, imageSelect: function (t) { var e = t.target; if (e.files && e.files[0]) { var i = t.target.files[0], n = i.type, s = URL.createObjectURL(i); n.startsWith("image") ? (this.file = i, this.image = s, this.crop = !0) : this.toast("فایل انتخابی تصویر نیست!") } }, upload: function (t) { var e = this; this.loading = !0; var i = new FormData; i.append("profile", this.file), i.append("sizes", JSON.stringify(t)), i.append("json", !0), axios.post(this.$APP_URL + "/setprofile", i).then((function (t) { var i = t.data; if (i.result) e.$store.commit("userUpdate"), e.$store.state.ternoboWireApp.reload(), i.url && (e.picture = i.url), e.$emit("updated"); else { var n = i.errors; e.handleError(n) } })).then((function () { return e.loading = !1 })) } }, data: function () { return { crop: !1, image: "", file: null, loading: !1, picture: "" } }, components: { CropperModal: n.Z } }; const o = (0, i(1900).Z)(s, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { staticClass: "profile-box clickable", class: t.size, on: { click: t.openFileSelect } }, [t.canChange ? i("CropperModal", { attrs: { title: "انتخاب تصویر پروفایل", show: t.crop, "aspect-ratio": 1, image: t.image }, on: { "update:show": function (e) { t.crop = e }, cropped: t.upload } }) : t._e(), t._v(" "), t.canChange ? i("input", { ref: "imageFile", staticClass: "d-none", attrs: { type: "file" }, on: { change: t.imageSelect } }) : t._e(), t._v(" "), i("lazy-image", { class: t.size, attrs: { src: t.picture, "img-class": "rounded-circle" } }), t._v(" "), t.canChange ? i("i", { staticClass: "material-icons-outlined" }, [t._v("camera_alt")]) : t._e(), t._v(" "), t.loading ? i("div", { staticClass: "position-absolute d-flex align-items-center justify-content-center profile-xlg", staticStyle: { top: "-3px", left: "-3px", right: "-3px", bottom: "-3px", width: "calc(100%+3px)", height: "calc(100%+3px)", background: "rgba(0, 0, 0, 0.5)" } }, [i("loading-spinner")], 1) : t._e()], 1) }), [], !1, null, null, null).exports }, 8184: (t, e, i) => { "use strict"; i.d(e, { Z: () => r }); const n = {}; var s = i(1900); const o = (0, s.Z)(n, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { staticClass: "bottom-nav d-lg-none d-flex" }, [i("wire-link", { class: { active: "/notifications" === t.$store.state.url }, attrs: { href: "/notifications" } }, [i("i", { staticClass: "navheader-icon", class: { unread: t.$store.shared.notifications_count > 0 } }, [t._v(t._s("/notifications" === t.$store.state.url ? "notifications" : "notifications_none"))])]), t._v(" "), i("wire-link", { class: { active: "/connections" === t.$store.state.url }, attrs: { href: "/connections" } }, [i("i", { staticClass: "navheader-icon" }, [t._v("group")])]), t._v(" "), i("wire-link", { class: { active: "/feed" === t.$store.state.url }, attrs: { href: "/feed" } }, [i("i", { staticClass: "navheader-icon material-icons" }, [t._v("home")])]), t._v(" "), i("wire-link", { class: { active: "/bookmarks" === t.$store.state.url }, attrs: { href: "/bookmarks" } }, [i("i", { staticClass: "navheader-icon" }, [t._v("bookmarks")])]), t._v(" "), i("wire-link", { class: { active: t.$store.state.url === "/" + t.$store.state.user.username }, attrs: { href: "/" + t.$store.state.user.username } }, [i("i", { staticClass: "navheader-icon" }, [i("img", { staticClass: "rounded-circle", staticStyle: { width: "24px", height: "24px" }, attrs: { src: t.$store.state.user.profile } })])])], 1) }), [], !1, null, null, null).exports; const a = { name: "AppLayout", components: { AppHeader: i(3832).default, BottomNavigator: o } }; const r = (0, s.Z)(a, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { attrs: { id: "app" } }, [i("AppHeader"), t._v(" "), i("div", { staticClass: "px-3", class: { "has-bnav": !t.$root.isDesktop } }, [i("transition", { attrs: { mode: "out-in", name: "fade" } }, [t._t("default")], 2)], 1), t._v(" "), t.$root.isDesktop ? t._e() : i("bottom-navigator")], 1) }), [], !1, null, null, null).exports }, 1584: (t, e, i) => { "use strict"; i.r(e), i.d(e, { default: () => k }); var n = i(8184), s = i(8775), o = i(6214), a = i(9250), r = i(5410); const l = { watch: { text: function (t) { t.length > 0 ? this.showSubmit = !0 : this.showSubmit = !1 } }, props: { idea: { type: Number, default: void 0, required: !0 }, replyTo: { default: void 0, required: !1 } }, data: function () { return { loading: !1, showSubmit: !1, text: "" } }, methods: { submit: function () { var t = this; if (this.text.length > 0) { this.loading = !0; var e = { text: this.text }; void 0 !== this.replyTo && (e.reply_to = this.replyTo), axios.post(this.$APP_URL + "/ideas/" + this.idea + "/replies", e).then((function (e) { e.data.result ? (t.text = "", t.$emit("submit", e.data.reply)) : t.handleError(e.data.errors) })).catch((function (t) { return console.log(t) })).then((function () { return t.loading = !1 })) } } }, name: "NewIdeaReply", components: { MaterialTextArea: r.Z } }; var c = i(1900); const d = (0, c.Z)(l, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return null != t.$store.state.user ? i("div", { staticClass: "sendidea clearfix" }, [i("div", { staticClass: "input-group-btn mb-0" }, [i("img", { staticClass: "idea-profile", attrs: { src: t.$store.state.user.profile } }), t._v(" "), i("MaterialTextArea", { staticClass: "w-100", attrs: { "input-class": "form-control autoresize", placeholder: "نظر شما چیست؟", name: "text", maxlength: "2500" }, model: { value: t.text, callback: function (e) { t.text = e }, expression: "text" } })], 1), t._v(" "), i("transition", { attrs: { name: "slide" } }, [t.showSubmit ? i("div", { staticClass: "justify-content-end mt-0" }, [i("loading-button", { staticClass: "btn btn-primary", attrs: { loading: t.loading }, nativeOn: { click: function (e) { return t.submit(e) } } }, [t._v("ارسال")])], 1) : t._e()])], 1) : t._e() }), [], !1, null, null, null).exports; var h = i(8126), u = i(3914); h.Z.addLocale(u); var p, m, f; const v = { mounted: function () { this.liked = this.ideaReply.is_liked }, data: function () { return { deleted: !1, showReply: !1, replies: [], repliesLoading: !0, showReplies: !1, next_page_url: null, loadingMore: !1, liked: !1 } }, methods: { commentDelete: function () { var t = this.replies.indexOf(comment); t > -1 && (this.replies.splice(t, 1), this.loadMore()) }, likeComment: function () { this.liked ? this.liked = !1 : this.liked = !0, axios.post(this.$APP_URL + "/idea-replies/" + this.ideaReply.id + "/like") }, loadReplies: function () { var t = this; this.showReplies = !this.showReplies, this.showReplies && (this.repliesLoading = !0, axios.post(this.$APP_URL + "/idea-replies/" + this.ideaReply.id + "/replies").then((function (e) { var i = e.data; i.result && (t.next_page_url = i.data.next_page_url, t.replies = i.data.data), t.repliesLoading = !1 })).catch((function (t) { return console.log(t) })).then((function () { return t.repliesLoading = !1 }))) }, deleteComment: function () { var t = this; this.deleted = !0, axios.delete("/idea-replies/" + this.ideaReply.idea_id + "/replies/" + this.ideaReply.id).then((function (e) { t.$emit("deleted", t.ideaReply) })).catch((function (t) { return console.log(t) })) }, loadMore: function () { var t = this; null === this.next_page_url || this.loadingMore || (this.loadingMore = !0, axios.get(this.next_page_url).then((function (e) { var i = e.data; i.result && (t.next_page_url = i.data.next_page_url, t.replies = t.replies.concat(i.data.data)), t.loadingMore = !1 })).catch((function (t) { return console.log(t) })).then((function () { return t.loadingMore = !1 }))) }, submit: function (t) { var e = this; void 0 !== this.replyTo ? this.$emit("replied", t) : (this.replies.unshift(t), setTimeout((function () { var t = e.$el; e.$parent.$el.scrollTop += t.getBoundingClientRect().top }), 300)) } }, computed: { ideaReply_time: function () { return new h.Z("fa-FA").format(Date.parse(this.ideaReply.created_at), "twitter") } }, components: (p = { NewIdeaReply: d, LoadingSpinner: a.Z }, m = "NewIdeaReply", f = d, m in p ? Object.defineProperty(p, m, { value: f, enumerable: !0, configurable: !0, writable: !0 }) : p[m] = f, p), props: { replyTo: { default: void 0, required: !1 }, ideaReply: { type: Object, default: void 0, required: !0 } }, name: "IdeaReply" }; var g = i(3379), b = i.n(g), w = i(7136), y = { insert: "head", singleton: !1 }; b()(w.Z, y); w.Z.locals; const _ = (0, c.Z)(v, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { staticClass: "mb-3" }, [t.deleted ? t._e() : i("div", { staticClass: "idea-reply" }, [i("div", { staticClass: "idea-reply-header" }, [i("wire-link", { staticClass: "d-flex align-items-center", attrs: { href: "/" + t.ideaReply.user.username } }, [i("img", { staticClass: "profile-sm", attrs: { src: t.ideaReply.user.profile } }), t._v(" "), i("div", { staticClass: "pr-3 pagedetail" }, [i("span", { staticClass: "name" }, [i("strong", [t._v("\n\t\t\t\t\t\t\t" + t._s(t.ideaReply.user.name) + "\n\t\t\t\t\t\t")])])])]), t._v(" "), i("div", { staticClass: "d-flex align-items-center" }, [i("span", { staticClass: "font-10 text-muted" }, [t._v(t._s(t.ideaReply_time))]), t._v(" "), i("div", [i("b-dropdown", { attrs: { size: "lg", variant: "link", "toggle-class": "text-decoration-none", "no-caret": "" }, scopedSlots: t._u([{ key: "button-content", fn: function () { return [i("i", { staticClass: "material-icons openmenu clickale text-muted hover-dark" }, [t._v("more_vert")])] }, proxy: !0 }], null, !1, 3552891933) }, [t._v(" "), i("b-dropdown-item", [i("div", { staticClass: "d-flex align-items-center" }, [i("i", { staticClass: "material-icons ml-2 text-dark" }, [t._v("link")]), t._v(" "), i("div", [i("div", [i("strong", [t._v(" گزارش تخلف ")])]), t._v(" "), i("small", { staticClass: "text-muted" }, [t._v(" این دیدگاه در تضاد با قوانین ترنوبو است ")])])])]), t._v(" "), t.checkUser(t.ideaReply.user_id) ? i("b-dropdown-item", { staticClass: "hover-danger", on: { click: t.deleteComment } }, [i("div", { staticClass: "d-flex hover-danger align-items-center" }, [i("i", { staticClass: "material-icons-outlined ml-2" }, [t._v("delete_sweep")]), t._v(" "), i("div", [i("div", [i("strong", [t._v(" حذف ")])])])])]) : t._e()], 1)], 1)])], 1), t._v(" "), i("div", { staticClass: "idea-reply-body" }, [i("div", { staticStyle: { "unicode-bidi": "plaintext", width: "100% !important", display: "block", "text-align": "justify" }, domProps: { innerHTML: t._s(t.ideaReply.text) } })])]), t._v(" "), i("div", { staticClass: "w-100 d-flex align-content-center justify-content-between pt-2" }, [i("span", { domProps: { innerHTML: t._s(t.ideaReply.liked_by) } }), t._v(" "), i("div", { staticClass: "actions" }, [i("i", { staticClass: "hover-dark clickable", class: { "material-icons-outlined": !t.showReplies, "material-icons": t.showReplies }, on: { click: t.loadReplies } }, [t._v(" insert_comment ")]), t._v(" "), i("i", { staticClass: "hover-danger clickable material-icons", class: { "text-danger": t.liked }, on: { click: t.likeComment } }, [t._v("\n\t\t\t\t" + t._s(t.liked ? "favorite" : "favorite_border") + "\n\t\t\t")])])]), t._v(" "), i("transition", { attrs: { name: "slide" } }, [t.showReplies ? i("div", { staticClass: "idea-reply-replies" }, [i("new-idea-reply", { attrs: { idea: t.ideaReply.idea_id, "reply-to": t.ideaReply.id }, on: { submit: t.submit } }), t._v(" "), void 0 === t.replyTo ? i("div", { staticClass: "border-right pr-3", staticStyle: { "border-color": "#212121 !important" } }, [t._l(t.replies, (function (e) { return i("idea-reply", { key: e.id, attrs: { "reply-to": t.ideaReply.id, "idea-reply": e }, on: { replied: t.submit, deleted: t.ideaReplyDelete } }) })), t._v(" "), t.repliesLoading ? i("div", { staticClass: "w-100 d-flex p-2 justify-content-center align-items-center" }, [i("loading-spinner")], 1) : t._e()], 2) : t._e(), t._v(" "), i("div", { staticClass: "w-100 d-flex align-items-center justify-content-center p-2" }, [null !== t.next_page_url ? i("loading-button", { staticClass: "btn btn-outline-dark", attrs: { loading: t.loadingMore }, nativeOn: { click: function (e) { return t.loadMore(e) } } }, [t._v("بارگیری بیشتر")]) : t._e()], 1)], 1) : t._e()])], 1) }), [], !1, null, "fb1c371c", null).exports; const x = { methods: { submit: function (t) { this.ideaReplies.unshift(t) }, ideaReplyDelete: function (t) { var e = this.ideaReplies.indexOf(t); e > -1 && (this.ideaReplies.splice(e, 1), this.loadMore()) }, loadMore: function () { var t = this; null === this.next_page_url || this.ideaRepliesLoading || (this.ideaRepliesLoading = !0, axios.get(this.next_page_url).then((function (e) { var i = e.data; i.result && (t.next_page_url = i.data.next_page_url, t.ideaReplies = t.ideaReplies.concat(i.data.data)), t.ideaRepliesLoading = !1 })).catch((function (t) { return console.log(t) })).then((function () { return t.ideaRepliesLoading = !1 }))) } }, props: { noScroll: { type: Boolean, default: !1, required: !1 }, idea: { type: Number, default: void 0, required: !0 } }, mounted: function () { var t = this; axios.get(this.$APP_URL + "/ideas/" + this.idea + "/replies").then((function (e) { var i = e.data; i.result && (t.next_page_url = i.data.next_page_url, t.ideaReplies = i.data.data), t.ideaRepliesLoading = !1 })).catch((function (t) { return console.log(t) })) }, data: function () { return { ideaRepliesLoading: !0, ideaReplies: void 0, next_page_url: null } }, name: "IdeaReplies", components: function (t, e, i) { return e in t ? Object.defineProperty(t, e, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = i, t }({ LoadingSpinner: a.Z, IdeaReply: _, NewIdeaReply: d }, "IdeaReply", _) }; const C = (0, c.Z)(x, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("div", { staticClass: "idea-replies px-2" }, [i("new-idea-reply", { attrs: { idea: t.idea }, on: { submit: t.submit } }), t._v(" "), t._l(t.ideaReplies, (function (e) { return i("idea-reply", { key: "idea_reply_" + e.id, attrs: { "idea-reply": e }, on: { deleted: t.ideaReplyDelete } }) })), t._v(" "), t.ideaRepliesLoading ? i("div", { staticClass: "d-flex w-100 justify-content-center align-items-center py-3" }, [i("LoadingSpinner")], 1) : t._e()], 2) }), [], !1, null, null, null).exports, R = { methods: { loadMore: function () { this.$refs.replies.loadMore() } }, props: { pages: { type: Array, default: void 0 }, idea: { type: Object, default: void 0 } }, components: { NoContent: s.Z, FeedbackCard: o.Z, IdeaReplies: C }, name: "Ideapage", layout: n.Z }; const k = (0, c.Z)(R, (function () { var t = this, e = t.$createElement, i = t._self._c || e; return i("base-layout", [i("div", { directives: [{ name: "infinite-scroll", rawName: "v-infinite-scroll", value: t.loadMore, expression: "loadMore" }], staticClass: "content-container-right", attrs: { "infinite-scroll-distance": 5 } }, [i("div", { staticClass: "w-100 d-flex justify-content-end align-items-center py-3" }, [i("wire-link", { staticClass: "text-grey", attrs: { href: "/ideas" } }, [t._v("\n\t\t\t\tبازگشت\n\t\t\t\t"), i("i", { staticClass: "material-icons" }, [t._v("keyboard_backspace")])])], 1), t._v(" "), i("FeedbackCard", { attrs: { idea: t.idea } }), t._v(" "), i("idea-replies", { ref: "replies", staticClass: "mt-3", attrs: { idea: t.idea.id } })], 1), t._v(" "), i("sidebar-left", [i("div", { staticClass: "card" }, [i("div", { staticClass: "card-body px-2 py-1" }, t._l(t.pages, (function (t) { return i("people-suggestion", { key: t.id, attrs: { page: t } }) })), 1)])])], 1) }), [], !1, null, null, null).exports } }]);
//# sourceMappingURL=1584.js.map
